{"version":3,"sources":["components/Chart.jsx","utilities.js","ExperimentOverview.jsx","components/LogTable.jsx","components/ExperimentSummary.jsx","components/MediaCard.jsx","Experiments.jsx","components/TactileButtonNotification.jsx","components/ErrorSnackbar.jsx","ExportData.jsx","components/AutomationForm.jsx","components/ChangeAutomationsDialog.jsx","components/ActionDosingForm.jsx","components/ActionManualDosingForm.jsx","components/ActionCirculatingForm.jsx","components/ActionLEDForm.jsx","components/UnderlineSpan.jsx","Pioreactors.jsx","components/AssignLabels.jsx","StartNewExperiment.jsx","components/DisplayProfile.jsx","components/DisplaySourceCode.jsx","CreateExperimentProfile.jsx","EditExperimentProfile.jsx","Calibrations.jsx","EditConfig.jsx","components/SelectButton.jsx","Updates.jsx","Plugins.jsx","Profiles.jsx","Feedback.jsx","components/SideNavAndHeader.jsx","components/ErrorBoundary.jsx","App.jsx","serviceWorker.js","index.js","components/PioreactorIcon.jsx"],"names":["i","colors","primary","colorMaps","getColorFromName","name","sensorRe","test","match","newPallete","shift","Chart","props","createToolTip","d","datum","x","format","relabelAndFormatSeries","childName","Math","round","yTransformation","y","fixedDecimals","state","seriesMap","hiddenSeries","Set","names","legendEvents","fetched","onConnect","bind","onMessageArrived","selectLegendData","selectVictoryLines","VictoryVoronoiContainer","allowZoom","createContainer","this","client","subscribe","experiment","topic","prevProps","getHistoricalDataFromServer","unsubscribe","isLiveChart","config","remote","ws_url","Client","floor","random","connect","userName","password","keepAliveInterval","onSuccess","reconnect","queryParams","URLSearchParams","filter_mod_N","downSample","max","min","deltaHours","lookback","fetch","dataSource","dataSourceColumn","then","response","json","data","initialSeriesMap","entries","v","length","map","item","moment","utc","local","color","Object","keys","setState","createLegendEvents","catch","e","console","log","forceUpdate","set","value","delete","target","eventHandlers","onClick","_","eventKey","mutation","has","prevState","deleteAndReturnSet","add","message","retained","payloadString","payloadKey","payload","JSON","parse","timestamp","parseFloat","key","isODReading","split","push","newSeriesMap","error","string","slice","relabelMap","results","index","sensor","breakString","reformattedName","symbol","fill","marker","size","style","interpolation","labels","stroke","strokeWidth","parent","border","maxWidth","title","domainPadding","padding","left","right","bottom","top","events","height","width","scale","theme","VictoryTheme","material","containerComponent","zoomDimension","responsive","voronoiBlacklist","labelComponent","cornerRadius","flyoutStyle","text","textAnchor","fontSize","fontFamily","tickLabels","offsetY","orientation","crossAxis","dependentAxis","domain","yAxisDomain","tickFormat","t","toFixed","label","yAxisLabel","axisLabelComponent","dy","symbolSpacer","itemsPerRow","borderPadding","cursor","gutter","rowGutter","React","Component","getConfig","setCallback","ok","Error","regex","section","param","comment","lines","forEach","line","parseINIString","getRelabelMap","runPioreactorJob","unit","job","args","options","callback","method","body","stringify","headers","Overview","useState","experimentMetadata","setExperimentMetadata","setRelabelMap","setConfig","charts","setCharts","useEffect","document","reduce","obj","chart_key","Fragment","container","spacing","justifyContent","xs","md","filter","chart","maxHeight","data_source","mqtt_topic","payload_key","y_axis_label","delta_hours","down_sample","y_axis_domain","eval","fixed_decimals","y_transformation","data_source_column","to","component","Link","textTransform","verticalAlign","margin","levelMappingToOrdinal","NOTSET","DEBUG","INFO","NOTICE","WARNING","ERROR","CRITICAL","LogTable","listOfLogs","min_level","logging","ui_log_level","logs","getData","timeout","join","pop","level","toUpperCase","pioreactor_unit","String","task","is_error","is_warning","is_notice","classes","variant","fontWeight","overflowY","stickyHeader","aria-label","className","clsx","headerCell","tightCell","smallText","noticeLog","errorLog","warningLog","relabelUnit","replace","withStyles","backgroundColor","tightRight","textAlign","useStyles","makeStyles","cardContent","pos","marginBottom","textIcon","headerMenu","display","breakpoints","down","flexFlow","flexDirection","headerButtons","EditableDescription","saveToDatabaseOrSkip","recentChange","setTimeout","description","desc","res","status","savingLoopActive","onFocus","evt","scrollHeight","handleChange","render","htmlFor","placeholder","id","multiline","fullWidth","onChange","overflow","contentEditable","createRef","ButtonNewExperiment","confirm","useConfirm","float","confirmationText","confirmationButtonProps","cancellationButtonProps","root","ButtonEndExperiment","ExperimentSummary","startedAt","created_at","marginRight","flexGrow","MediaCard","mediaThroughputPerUnit","altMediaThroughputPerUnit","mediaThroughput","altMediaThroughput","rates","all","mediaRate","altMediaRate","activeUnits","getRecentRates","hash","object","hasOwnProperty","topicParts","destinationName","objectRef","totalRef","addOrUpdate","total","values","a","b","align","scope","marginTop","formControl","caption","marginLeft","ExperimentSelection","experiments","setExperiments","selectedExperient","find","o","experimentSelection","handleExperimentSelectionChange","labelId","sx","p","pt","gutterBottom","whiteSpace","ChartSelection","getCharts","handleChartSelectionChange","checked","control","chartSelection","ExperimentsContainer","setExperimentSelection","setChartSelection","experimentName","chart_obj","is_checked","rest","objectToQueryString","chartKeyToDataKey","implied_growth_rate","raw_optical_density","temperature","normalized_optical_density","fraction_of_volume_that_is_alternative_media","queryString","additionalQueryString","sort","Experiments","TactileButtonNotification","setUnit","renamedUnit","setRenamedUnit","open","setOpen","qos","msg","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","transitionDuration","enter","Alert","severity","icon","AlertTitle","ErrorSnackbar","setMsg","setLevel","setTask","onFailure","endsWith","handleClose","event","reason","toLowerCase","datasetItem","recommended","datasetDescription","FormControl","FormLabel","Select","MenuItem","CheckboxesGroup","FormGroup","FormControlLabel","Checkbox","isChecked","pioreactor_unit_activity_data","Typography","growth_rates","od_readings","od_readings_filtered","temperature_readings","alt_media_fractions","pioreactor_unit_activity_data_rollup","dosing_events","led_change_events","dosing_automation_settings","led_automation_settings","temperature_automation_settings","dosing_automation_events","led_automation_events","temperature_automation_events","kalman_filter_outputs","stirring_rates","pioreactor_unit_labels","pwm_dcs","ExportDataContainer","useSearchParams","isRunning","setIsRunning","isError","setIsError","errorMsg","setErrorMsg","get","datasetCheckbox","count","acc","errorFeedbackOrDefault","Box","LoadingButton","type","loading","loadingPosition","preventDefault","some","link","createElement","filename","setAttribute","href","appendChild","click","remove","endIcon","disabled","Card","Grid","rel","ExportData","textFieldCompact","AutomationForm","defaults","assign","fields","field","default","updateParent","onSettingsChange","listOfTextField","TextField","autoComplete","defaultValue","InputProps","endAdornment","InputAdornment","position","onKeyPress","unitTitle","unitTitleDialog","suptitle","defaultAutomations","dosing","led","ChangeAutomationsDialog","automationType","automationTypeForDisplay","automationName","setAutomationName","skip_first_run","algoSettings","setAlgoSettings","setClient","automations","setAutomations","openSnackbar","setOpenSnackbar","listOfAuto","auto","automation_name","onFinished","Dialog","aria-labelledby","PaperProps","DialogTitle","PioreactorIcon","IconButton","palette","grey","DialogContent","no_skip_first_run","display_name","setting","Boolean","pathname","DialogActions","Button","isJobRunning","Message","publish","actionTextField","actionForm","actionToAct","ActionPumpForm","mL","setML","duration","setDuration","snackbarMsg","setSnackbarMsg","textfieldError","setTextfieldError","clicked","setClicked","dosingMethod","setDosingMethod","formErrorDuration","setFormErrorDuration","formErrorML","setFormErrorML","action","RadioGroup","Radio","params","ml","source_of_event","continuously","manualAction","setManualAction","handleMLChange","manually","ActionCirculatingForm","ActionLEDForm","re","intensity","setIntensity","errorForm","setErrorForm","validInput","onSubmit","channel","proposedIntensity","UnderlineSpan","underlineSpan","children","lostRed","readyGreen","pioreactorCard","code","disabledText","textbox","textboxLabel","footnote","textField","textFieldWide","slider","divider","jobButton","paddingRight","paddingLeft","unitSettingsSubtext","wordBreak","unitSettingsSubtextEmpty","minHeight","ledBlock","rowOfUnitSettingDisplay","flexWrap","alignItems","alignContent","testingListItemIcon","minWidth","testingListItem","paddingTop","paddingBottom","cardHeaderSettings","cardHeaderButtons","patientButton","PythonBoolToJS","pythonBoolAsString","TabPanel","other","role","hidden","UnitSettingDisplaySubtext","subtext","UnitSettingDisplay","stateDisplay","prettyPrint","isStateSetting","isUnitActive","displaySettings","isLEDIntensity","ledIntensities","LEDMap","renamedA","renamedB","renamedC","renamedD","isPWMDc","pwmDcs","PWM_TO_PIN","1","2","3","4","PWMMap","renamed1","renamed2","renamed3","renamed4","precision","formatForDisplay","measurementUnit","ButtonStopProcess","AddNewPioreactor","setName","isSuccess","setIsSuccess","successMsg","setSuccessMsg","expectedPathMsg","setExpectedPathMsg","startAdornment","newPioreactorName","PioreactorHeader","SettingsActionsDialogAll","Divider","PatientButton","buttonText","setButtonText","disableElevation","CircularProgress","CalibrateDialog","tabValue","setTabValue","createUserButtonsBasedOnState","jobState","blankODButton","odBlankJobState","stirringCalibrationButton","stirringCalibrationState","Tabs","newValue","indicatorColor","textColor","Tab","odBlankReading","k","SelfTestDialog","displayIcon","selfTestTests","publishedSettings","colorOfIcon","selfTestButton","selfTestState","List","subheader","ListSubheader","lineHeight","disableSticky","disableGutters","ListItem","ListItemIcon","ListItemText","secondary","led_pd","SettingsActionsDialog","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","rebooting","setRebooting","openChangeDosingDialog","setOpenChangeDosingDialog","openChangeLEDDialog","setOpenChangeLEDDialog","openChangeTemperatureDialog","setOpenChangeTemperatureDialog","setPioreactorJobState","setPioreactorJobAttr","stopPioreactorJob","job_attr","buttons","fromEntries","jobs","job_key","versionInfo","monitor","versions","voltageInfo","voltage_on_pwm_rail","ipInfo","ipv4","isLargeScreen","useMediaQuery","dosingControlJob","dosing_control","dosingControlJobRunning","includes","ledControlJob","led_control","ledControlJobRunning","temperatureControlJob","temperature_control","temperatureControlJobRunning","scrollButtons","allowScrollButtonsMobile","metadata","source","dangerouslySetInnerHTML","__html","SettingTextField","onUpdate","relabeledTo","setLabel","settings","setting_key","SettingSwitchField","units","circulate_media","circulate_alt_media","add_media","remove_waste","add_alt_media","hat","hat_serial","voltage","loadingIndicator","resumeHideDuration","setJobs","listOfJobs","jobs_","metaData_","job_name","prev","sendMessage","handleRunPioreactorJobResponse","startAction","backgroundImage","setValue","activeSubmit","setActiveSumbit","Switch","ActiveUnits","cards","PioreactorCard","emptyState","FlashLEDButton","flashing","setFlashing","blinkled","jobFetchComplete","setJobFetchComplete","is_testing","parseToType","typeOfSetting","updatedJob","updatedSetting","indicatorDotColor","indicatorLabel","isActive","getInicatorLabel","sm","Tooltip","placement","boxShadow","means","InactiveUnits","Pioreactors","inactiveUnits","button","AssignLabels","setLabels","confirmed","setConfirmed","onLabelChange","accumulator","lg","disable","unit_label","skipButton","instructions","thinTextField","createFilterOptions","FreeSoloCreateOption","updateParentCallback","Autocomplete","inputValue","filterOptions","filtered","isExisting","option","selectOnFocus","clearOnBlur","handleHomeEndKeys","getOptionLabel","renderOption","freeSolo","renderInput","ExperimentSummaryForm","formError","setFormError","helperText","setHelperText","expName","setExpName","setDescription","organismUsed","setOrganismUsed","mediaUsed","setMediaUsed","historicalMediaUsed","setHistoricalMediaUsed","historicalOrganismUsed","setHistoricalOrganismUsed","historicalExperiments","setHistoricalExperiments","required","experimentNameProposed","trim","rows","organism_used","media_used","toISOString","handleNext","StartNewExperimentContainer","activeStep","setActiveStep","skipped","setSkipped","steps","window","location","newSkipped","step","prevActiveStep","scrollTo","content","optional","mr","StartNewExperiment","DisplayProfileCard","letterSpacing","borderRadius","humanReadableDuration","actionType","hoursElapsed","DisplayProfile","CardContent","experiment_profile_name","mb","author","worker","common","actions","hours_elapsed","pioreactors","pioreactor","DisplaySourceCode","sourceCode","EditExperimentProfilesContent","DEFAULT_CODE","DEFAULT_FILENAME","getCodeFlaskRef","codeFlask","onTextChange","onFilenameChange","handleSnackbarClose","saveCurrentCode","saving","parsedJson","styles","direction","editorRef","language","ProfilesContainer","CreateNewProfile","filenameEditable","setSource","EditProfile","PageHeader","Calibrations","EditableCodeDiv","onSelectionChange","getHistoricalConfigFiles","onSelectionHistoricalChange","ix","historicalConfigs","findIndex","c","configBlob","timestamp_ix","hasChangedSinceSave","availableConfigs","deleteConfig","listOfHistoricalConfigs","reload","getListOfConfigFiles","InputLabel","displayEmpty","EditConfigContainer","EditConfig","buttonStyle","buttonDropdown","SelectButton","forwardRef","ref","textPrefix","initialValue","anchorRef","useRef","isOpen","valueRef","current","items","Children","child","selected","valueReadable","defineProperty","writable","aria-selected","undefined","data-value-readable","data-value","ButtonGroup","Menu","getContentAnchorEl","anchorEl","transformOrigin","displayName","UpdateToLatestConfirmDialog","updating","setUpdating","installDev","setInstallDev","version","setVersion","uiVersion","setUIVersion","latestVersion","setLatestVersion","getCurrentUIVersion","getCurrentAppVersion","getLatestAppVersion","underline","ChangelogContainer","changelog","setChangelog","markdown","Updates","pluginList","primaryActionButton","secondaryActionButton","ListAvailablePlugins","alreadyInstalledPluginsNames","availablePlugins","setAvailablePlugins","dense","plugin","ListItemAvatar","Avatar","primaryTypographyProps","fontStyle","ListItemSecondaryAction","plugin_name","homepage","ListInstalledPlugins","installedPlugins","startsWith","PluginContainer","setInstalledPlugins","isFetchComplete","setIsFetchComplete","Plugins","ExperimentProfilesContent","experimentProfilesAvailable","setExperimentProfilesAvailable","selectedExperimentProfile","setSelectedExperimentProfile","viewSource","setViewSource","profiles","profilesByKey","cur","file","experimentProfile","getSourceAndView","profile","leader_hostname","Profiles","halfTextField","FeedbackContainer","email","setEmail","feedback","setFeedback","sending","setSending","hasBeenSent","setHasBeenSent","maxRows","minRows","Feedback","drawer","up","flexShrink","menuButton","drawerPaper","appBarRoot","zIndex","listItemIcon","SideNavAndHeader","useLocation","mobileOpen","setMobileOpen","getCurrentApp","getLatestVersion","handleDrawerToggle","isSelected","path","list","renderExpandIcon","active","menuItemStyles","viewBox","Badge","invisible","suffix","AppBar","Toolbar","edge","alt","src","Drawer","anchor","paper","ModalProps","keepMounted","ErrorBoundary","hasError","errorInfo","createTheme","background","main","ScrollToTop","MainSite","element","ExperimentOverview","CreateExperimentProfile","EditExperimentProfile","App","StrictMode","StyledEngineProvider","injectFirst","ThemeProvider","CssBaseline","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","fillColor","fillRule","transform","cx","cy","r"],"mappings":"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","file":"static/js/main.9cc8af15.chunk.js","sourcesContent":["import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport {\n  VictoryChart,\n  VictoryLabel,\n  VictoryAxis,\n  VictoryTheme,\n  VictoryLine,\n  VictoryScatter,\n  VictoryGroup,\n  VictoryLegend,\n  VictoryTooltip,\n  createContainer\n} from \"victory\";\nimport moment from \"moment\";\n\nconst colors = [\n  {primary: \"#0077BB\", \"1\": \"#0077BB\", \"2\": \"#0077BB\"},\n  {primary: \"#009988\", \"1\": \"#009988\", \"2\": \"#009988\"},\n  {primary: \"#CC3311\", \"1\": \"#CC3311\", \"2\": \"#CC3311\"},\n  {primary: \"#33BBEE\", \"1\": \"#33BBEE\", \"2\": \"#33BBEE\"},\n  {primary: \"#EE7733\", \"1\": \"#EE7733\", \"2\": \"#EE7733\"},\n  {primary: \"#EE3377\", \"1\": \"#EE3377\", \"2\": \"#EE3377\"},\n  {primary: \"#BBBBBB\", \"1\": \"#BBBBBB\", \"2\": \"#BBBBBB\"},\n  {primary: \"#a6cee3\", \"1\": \"#a6cee3\", \"2\": \"#a6cee3\"},\n  {primary: \"#1f78b4\", \"1\": \"#1f78b4\", \"2\": \"#1f78b4\"},\n  {primary: \"#b2df8a\", \"1\": \"#b2df8a\", \"2\": \"#b2df8a\"},\n  {primary: \"#33a02c\", \"1\": \"#33a02c\", \"2\": \"#33a02c\"},\n  {primary: \"#fb9a99\", \"1\": \"#fb9a99\", \"2\": \"#fb9a99\"},\n  {primary: \"#e31a1c\", \"1\": \"#e31a1c\", \"2\": \"#e31a1c\"},\n  {primary: \"#fdbf6f\", \"1\": \"#fdbf6f\", \"2\": \"#fdbf6f\"},\n  {primary: \"#ff7f00\", \"1\": \"#ff7f00\", \"2\": \"#ff7f00\"},\n  {primary: \"#cab2d6\", \"1\": \"#cab2d6\", \"2\": \"#cab2d6\"},\n  {primary: \"#6a3d9a\", \"1\": \"#6a3d9a\", \"2\": \"#6a3d9a\"},\n  {primary: \"#ffff99\", \"1\": \"#ffff99\", \"2\": \"#ffff99\"},\n  {primary: \"#b15928\", \"1\": \"#b15928\", \"2\": \"#b15928\"},\n];\n\nconst colorMaps = {}\n\nfunction getColorFromName(name){\n  if (name in colorMaps){\n    return colorMaps[name]\n  }\n\n  let sensorRe = /(.*)-[1234]/;\n  if (sensorRe.test(name)){\n    let primaryName = name.match(sensorRe)[1]\n    return getColorFromName(primaryName)\n  }\n  else{\n    var newPallete = colors.shift()\n    colorMaps[name] = newPallete.primary\n    colorMaps[name + \"-1\"] = newPallete[\"1\"]\n    colorMaps[name + \"-2\"] = newPallete[\"2\"]\n    colorMaps[name + \"-3\"] = newPallete[\"3\"]\n    colorMaps[name + \"-4\"] = newPallete[\"4\"]\n    return getColorFromName(name)\n  }\n}\n\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seriesMap: {},\n      hiddenSeries: new Set(),\n      names: [],\n      legendEvents: [],\n      fetched: false,\n    };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.selectLegendData = this.selectLegendData.bind(this);\n    this.selectVictoryLines = this.selectVictoryLines.bind(this);\n    this.yTransformation = this.props.yTransformation || ((y) => y)\n    this.VictoryVoronoiContainer = (this.props.allowZoom  || false) ? createContainer(\"zoom\", \"voronoi\") : createContainer(\"voronoi\");\n\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      `pioreactor/+/${this.props.experiment}/${this.props.topic}`\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getHistoricalDataFromServer()\n\n      this.client.unsubscribe(\n        `pioreactor/+/${prevProps.experiment}/${prevProps.topic}`\n      )\n\n      this.client.subscribe(\n        `pioreactor/+/${this.props.experiment}/${this.props.topic}`\n      )\n\n     }\n  }\n\n  componentDidMount() {\n    this.getHistoricalDataFromServer()\n\n    if (!this.props.isLiveChart){\n      return\n    }\n\n\n    if (!this.props.config || !this.props.config['cluster.topology']){\n      return\n    }\n\n    if (this.props.config.remote && this.props.config.remote.ws_url) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_Chart\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_Chart\" + Math.floor(Math.random()*10000)\n      );\n    }\n\n    this.client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15,  onSuccess: this.onConnect, reconnect: true});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  async getHistoricalDataFromServer() {\n    if (!this.props.experiment){\n      return\n    }\n    const tweak = 0.60 // increase to filter more\n    const queryParams = new URLSearchParams({\n        filter_mod_N: this.props.downSample ? Math.max(Math.floor(tweak * Math.min(this.props.deltaHours, this.props.lookback)), 1) : 1,\n        lookback: this.props.lookback\n    })\n    await fetch(`/api/time_series/${this.props.dataSource}/${this.props.experiment}${this.props.dataSourceColumn ? \"/\" + this.props.dataSourceColumn : \"\"}?${queryParams}`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let initialSeriesMap = {};\n        for (const [i, v] of data[\"series\"].entries()) {\n          if (data[\"data\"][i].length > 0) {\n            initialSeriesMap[v] = {\n              data: (data[\"data\"][i]).map(item => ({y: item.y, x: moment.utc(item.x, 'YYYY-MM-DDTHH:mm:ss.SSSSS').local()})),\n              name: v,\n              color: getColorFromName(v),\n            };\n          }\n        }\n        let names = Object.keys(initialSeriesMap);\n        this.setState({\n          seriesMap: initialSeriesMap,\n          legendEvents: this.createLegendEvents(),\n          names: names,\n          fetched: true\n        });\n      })\n      .catch((e) => {\n        console.log(e)\n        this.setState({fetched: true})\n      });\n      this.forceUpdate()\n\n  }\n\n  deleteAndReturnSet(set, value){\n    set.delete(value)\n    return set\n  }\n\n  createLegendEvents() {\n    return [{\n      childName: \"legend\",\n      target: \"data\",\n      eventHandlers: {\n        onClick: (_, props) => {\n          return [\n            {\n              childName: props.datum.name,\n              target: \"data\",\n              eventKey: \"all\",\n              mutation: () => {\n                if (!this.state.hiddenSeries.has(props.datum.name)) {\n                  // Was not already hidden => add to set\n                  this.setState((prevState) => ({\n                    hiddenSeries: prevState.hiddenSeries.add(props.datum.name)\n                  }));\n                } else {\n                  // remove from set\n                  this.setState((prevState) => ({\n                    hiddenSeries: this.deleteAndReturnSet(prevState.hiddenSeries, props.datum.name)\n                  }));\n                }\n                return null;\n              },\n            },\n          ];\n        },\n      },\n    }]\n  }\n\n  onMessageArrived(message) {\n    if (!this.state.fetched){\n      return\n    }\n    if (message.retained){\n      return\n    }\n\n    if (!message.payloadString){\n      return\n    }\n\n\n    if (this.props.payloadKey){\n      var payload = JSON.parse(message.payloadString)\n      var timestamp = moment.utc(payload.timestamp).local()\n      var value = parseFloat(payload[this.props.payloadKey])\n    } else {\n      value = parseFloat(message.payloadString)\n      timestamp = moment.utc().local()\n    }\n\n    var key = this.props.isODReading //TODO: change this variable name, something like: IsPartitionedBySensor\n      ? message.topic.split(\"/\")[1] + \"-\" + message.topic.split(\"/\")[5]\n      : message.topic.split(\"/\")[1];\n\n    try {\n      if (!(key in this.state.seriesMap)){\n        const newSeriesMap = {...this.state.seriesMap, [key]:  {\n          data: [{x: timestamp, y: value}],\n          name: key,\n          color: getColorFromName(key)\n        }}\n\n        this.setState({ seriesMap: newSeriesMap })\n        this.setState({\n          names: [...this.state.names, key]\n        })\n      } else {\n        // .push seems like bad state management, and maybe a hit to performance...\n        this.state.seriesMap[key].data.push({\n          x: timestamp,\n          y: value,\n        });\n        this.setState({ seriesMap: this.state.seriesMap })\n      }\n    }\n    catch (error) {\n      console.log(error)\n    }\n    return;\n  }\n\n  breakString(string){\n    if (string.length > 12){\n      return string.slice(0, 5) + \"...\" + string.slice(string.length-2, string.length)\n    }\n    return string\n  }\n\n  relabelAndFormatSeries(name){\n    if (!this.props.relabelMap){\n      return name\n    }\n\n    if (name.match(/(.*)-([1234])/g)){\n      const results = name.match(/(.*)-([1234])/);\n      const index = results[1];\n      const sensor = results[2];\n      return this.breakString(this.props.relabelMap[index] || index) + \"-ch\" + sensor\n    }\n    else {\n      return this.breakString(this.props.relabelMap[name] || name)\n    }\n  }\n\n\n\n  createToolTip = (d) => {\n      return `${d.datum.x.format(\"MMM DD HH:mm\")}\n${this.relabelAndFormatSeries(d.datum.childName)}: ${Math.round(this.yTransformation(d.datum.y) * 10 ** this.props.fixedDecimals) / 10 ** this.props.fixedDecimals}`\n  }\n\n\n  selectLegendData(name){\n    var reformattedName = this.relabelAndFormatSeries(name)\n    if (!this.state.seriesMap) {\n      return {}\n    }\n    const line = this.state.seriesMap[name];\n    const item = {\n      name: reformattedName,\n      symbol: { fill: line.color },\n    };\n    if (this.state.hiddenSeries.has(reformattedName)) {\n      return { ...item, symbol: { fill: \"white\" } };\n    }\n    return item;\n  }\n\n  selectVictoryLines(name) {\n    var reformattedName = this.relabelAndFormatSeries(name)\n\n    var marker = null;\n    if (this.state.seriesMap[name].data.length === 1){\n      marker = <VictoryScatter\n          size={4}\n          key={\"line-\" + reformattedName + this.props.key}\n          name={reformattedName}\n          style={{\n            data: {\n              fill: this.state.seriesMap[name].color\n            },\n          }}\n        />\n    }\n    else {\n        marker = <VictoryLine\n          interpolation={this.props.interpolation}\n          key={\"line-\" + reformattedName + this.props.key}\n          name={reformattedName}\n          style={{\n            labels: {fill: this.state.seriesMap[name].color},\n            data: {\n              stroke: this.state.seriesMap[name].color,\n              strokeWidth: 2,\n            },\n            parent: { border: \"1px solid #ccc\" },\n          }}\n        />\n    }\n\n    return (\n      <VictoryGroup\n        key={this.props.key}\n        data={(this.state.hiddenSeries.has(reformattedName)) ? [] : this.state.seriesMap[name].data}\n        x=\"x\"\n        y={(datum) => this.yTransformation(datum.y)}\n      >\n        {marker}\n      </VictoryGroup>\n    );\n  }\n\n  render() {\n    return (\n        <VictoryChart\n          style={{ parent: { maxWidth: \"700px\"}}}\n          title={this.props.title}\n          domainPadding={10}\n          padding={{ left: 70, right: 50, bottom: 80, top: 50 }}\n          events={this.state.legendEvents}\n          height={315}\n          width={600}\n          scale={{x: 'time'}}\n          theme={VictoryTheme.material}\n          containerComponent={\n           <this.VictoryVoronoiContainer\n             zoomDimension={'x'}\n             responsive={true}\n             voronoiBlacklist={['parent']}\n             labels={this.createToolTip}\n             labelComponent={\n               <VictoryTooltip\n                 cornerRadius={0}\n                 flyoutStyle={{\n                   fill: \"white\",\n                   stroke: \"#90a4ae\",\n                   strokeWidth: 1.5,\n                 }}\n               />\n             }\n\n           />\n          }\n        >\n          <VictoryLabel\n            text={this.props.title}\n            x={300}\n            y={30}\n            textAnchor=\"middle\"\n            style={{\n              fontSize: 16,\n              fontFamily: \"inherit\",\n            }}\n          />\n          <VictoryAxis\n            style={{\n              tickLabels: {\n                fontSize: 14,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n            offsetY={80}\n            orientation=\"bottom\"\n          />\n          <VictoryAxis\n            crossAxis={false}\n            dependentAxis\n            domain={this.props.allowZoom ? null : this.props.yAxisDomain}\n            tickFormat={(t) => `${t.toFixed(this.props.fixedDecimals)}`}\n            label={this.props.yAxisLabel}\n            axisLabelComponent={\n              <VictoryLabel\n                dy={-41}\n                style={{\n                  fontSize: 15,\n                  padding: 10,\n                  fontFamily: \"inherit\",\n                }}\n              />\n            }\n            style={{\n              tickLabels: {\n                fontSize: 14,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n          />\n          <VictoryLegend\n            x={65}\n            y={270}\n            symbolSpacer={6}\n            itemsPerRow={4}\n            name=\"legend\"\n            borderPadding={{ right: 8 }}\n            orientation=\"horizontal\"\n            cursor=\"pointer\"\n            gutter={15}\n            rowGutter={5}\n            style={{\n              labels: { fontSize: 13 },\n              data: { stroke: \"#485157\", strokeWidth: 0.5, size: 6.5 },\n            }}\n            data={this.state.names.map(this.selectLegendData)}\n          />\n          {Object.keys(this.state.seriesMap).map(this.selectVictoryLines)}\n        </VictoryChart>\n    );\n  }\n}\n\nexport default Chart;\n","\nfunction parseINIString(data){\n    var regex = {\n        section: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\n        param: /^\\s*([^=]+?)\\s*=\\s*(.*?)\\s*$/,\n        comment: /^\\s*;.*$/\n    };\n    var value = {};\n    var lines = data.split(/[\\r\\n]+/);\n    var section = null;\n    lines.forEach(function(line){\n        if(regex.comment.test(line)){\n            return;\n        }else if(regex.param.test(line)){\n            var match = line.match(regex.param);\n            if(section){\n                value[section][match[1]] = match[2];\n            }else{\n                value[match[1]] = match[2];\n            }\n        }else if(regex.section.test(line)){\n            var match = line.match(regex.section);\n            value[match[1]] = {};\n            section = match[1];\n        }else if(line.length === 0 && section){\n            section = null;\n        };\n    });\n    return value;\n}\n\n\nexport function getConfig(setCallback) {\n  fetch(\"/api/configs/config.ini\")\n    .then((response) => {\n        if (response.ok) {\n          return response.text();\n        } else {\n          throw new Error('Something went wrong');\n        }\n      })\n    .then((config) => {\n      setCallback(parseINIString(config));\n    })\n    .catch((error) => {})\n}\n\nexport function getRelabelMap(setCallback, experiment=\"current\") {\n  fetch(`/api/unit_labels/${experiment}`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setCallback(data)\n  });\n}\n\n\n\nexport function runPioreactorJob(unit, job, args = [], options = {}, callback) {\n    fetch(`/api/run/${unit}/${job}`, {\n      method: \"PATCH\",\n      body: JSON.stringify({ args: args, options: options }),\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n    }).then(response => {\n      if (callback && typeof callback === 'function') {\n        callback(response);\n      }\n    });\n}\n","import React from \"react\";\n\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport LogTable from \"./components/LogTable\";\nimport ExperimentSummary from \"./components/ExperimentSummary\";\nimport Chart from \"./components/Chart\";\nimport MediaCard from \"./components/MediaCard\";\nimport PioreactorIcon from './components/PioreactorIcon';\nimport { Link } from 'react-router-dom';\nimport {getConfig, getRelabelMap} from \"./utilities\"\nimport Card from \"@mui/material/Card\";\nimport ListAltOutlinedIcon from '@mui/icons-material/ListAltOutlined';\n\nfunction Overview(props) {\n\n  const [experimentMetadata, setExperimentMetadata] = React.useState({})\n  const [relabelMap, setRelabelMap] = React.useState({})\n  const [config, setConfig] = React.useState({})\n  const [charts, setCharts] = React.useState({})\n\n  React.useEffect(() => {\n    document.title = props.title;\n\n    function getLatestExperiment() {\n        fetch(\"/api/experiments/latest\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperimentMetadata(data)\n        });\n      }\n\n    function getCharts() {\n        fetch(\"/api/contrib/charts\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setCharts(data.reduce((map, obj) => (map[obj.chart_key] = obj, map), {}))\n        });\n      }\n\n\n    getLatestExperiment()\n    getCharts()\n    getRelabelMap(setRelabelMap)\n    getConfig(setConfig)\n  }, [props.title])\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2} justifyContent=\"space-between\">\n\n        <Grid item xs={12} md={12}>\n          <ExperimentSummary experimentMetadata={experimentMetadata}/>\n        </Grid>\n\n\n        <Grid item xs={12} md={7} container spacing={2} justifyContent=\"flex-start\" style={{height: \"100%\"}}>\n          {Object.entries(charts)\n            .filter(([chart_key, _]) => config['ui.overview.charts'] && (config['ui.overview.charts'][chart_key] === \"1\"))\n            .map(([chart_key, chart]) =>\n              <React.Fragment key={`grid-chart-${chart_key}`}>\n                <Grid item xs={12} >\n                  <Card style={{ maxHeight: \"100%\"}}>\n                    <Chart\n                      key={`chart-${chart_key}`}\n                      config={config}\n                      dataSource={chart.data_source}\n                      title={chart.title}\n                      topic={chart.mqtt_topic}\n                      payloadKey={chart.payload_key}\n                      yAxisLabel={chart.y_axis_label}\n                      experiment={experimentMetadata.experiment}\n                      deltaHours={experimentMetadata.delta_hours}\n                      downSample={chart.down_sample}\n                      interpolation={chart.interpolation || \"stepAfter\"}\n                      yAxisDomain={chart.y_axis_domain ? chart.y_axis_domain : null}\n                      lookback={chart.lookback ? eval(chart.lookback) : 10000}\n                      fixedDecimals={chart.fixed_decimals}\n                      relabelMap={relabelMap}\n                      yTransformation={eval(chart.y_transformation || \"(y) => y\")}\n                      dataSourceColumn={chart.data_source_column}\n                      isODReading={chart_key === \"raw_optical_density\"}\n                      isLiveChart={true}\n                    />\n                  </Card>\n                </Grid>\n              </React.Fragment>\n\n        )}\n        </Grid>\n\n        <Grid item xs={12} md={5} container spacing={1} justifyContent=\"flex-end\" style={{height: \"100%\"}}>\n\n\n          {( config['ui.overview.cards'] && (config['ui.overview.cards']['dosings'] === \"1\")) &&\n            <Grid item xs={12} >\n              <MediaCard experiment={experimentMetadata.experiment} config={config} relabelMap={relabelMap}/>\n              <Button to=\"/pioreactors\" component={Link} color=\"primary\" style={{textTransform: \"none\", verticalAlign: \"middle\", margin: \"0px 3px\"}}>\n                <PioreactorIcon style={{ fontSize: 17, margin: \"0px 3px\"}} color=\"primary\"/> See all Pioreactor details\n              </Button>\n            </Grid>\n          }\n\n\n          {( config['ui.overview.cards'] && (config['ui.overview.cards']['event_logs'] === \"1\")) &&\n            <Grid item xs={12}>\n              <LogTable experiment={experimentMetadata.experiment} config={config} relabelMap={relabelMap}/>\n              <Button to={`/export-data?experiment=${experimentMetadata.experiment}&logs=1`} component={Link} color=\"primary\" style={{textTransform: \"none\", verticalAlign: \"middle\", margin: \"0px 3px\"}}>\n                <ListAltOutlinedIcon style={{ fontSize: 17, margin: \"0px 3px\"}} color=\"primary\"/> Export all logs\n              </Button>\n            </Grid>\n          }\n\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  );\n}\nexport default Overview;\n","import React from 'react'\n\nimport clsx from 'clsx';\nimport {Client} from 'paho-mqtt';\nimport moment from 'moment';\n\n\nimport {withStyles} from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"6px 6px 6px 10px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n  errorLog: {\n    backgroundColor: \"#ff7961\"\n  },\n  warningLog: {\n    backgroundColor: \"#FFEA8A\"\n  },\n  noticeLog: {\n    backgroundColor: \"#addcaf\"\n  },\n});\n\nconst levelMappingToOrdinal = {\n  NOTSET: 0,\n  DEBUG: 1,\n  INFO: 2,\n  NOTICE: 2.5,\n  WARNING: 3,\n  ERROR: 4,\n  CRITICAL: 5\n}\n\n\nclass LogTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {listOfLogs: []};\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getData() {\n    await fetch(\"/api/logs/recent?\" + new URLSearchParams({\n        min_level: this.props.config.logging.ui_log_level\n      }))\n      .then(response => {\n        return response.json();\n      })\n      .then(logs => {\n        this.setState({listOfLogs: logs.map((log, index) => {\n          return {...log, key: index};\n          })\n        })\n      }).catch((e) => {\n        console.log(e)\n      });\n  }\n\n  componentDidMount() {\n    this.getData()\n    if (this.props.config.remote && this.props.config.remote.ws_url) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_LogTable\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_LogTable\" + Math.floor(Math.random()*10000)\n      );\n    }\n    this.client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, timeout: 180, 'onSuccess': this.onConnect, reconnect: true});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getData()\n     }\n  }\n\n  onConnect() {\n    this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"logs\", \"+\"].join(\"/\"))\n    this.client.subscribe([\"pioreactor\", \"+\", \"$experiment\",         \"logs\", \"+\"].join(\"/\"))\n  }\n\n  onMessageArrived(message) {\n    if (this.state.listOfLogs.length > 50){\n      this.state.listOfLogs.pop()\n    }\n    const unit = message.topic.split(\"/\")[1]\n    const payload = JSON.parse(message.payloadString)\n\n    if (levelMappingToOrdinal[payload.level.toUpperCase()] < levelMappingToOrdinal[this.props.config.logging.ui_log_level.toUpperCase()]){\n      return\n    }\n\n    this.setState({\n      listOfLogs: [\n      {\n        timestamp: moment.utc().format('YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]'),\n        pioreactor_unit: unit,\n        message: String(payload.message),\n        task: payload.task, is_error: (payload.level === \"ERROR\"),\n        is_warning: (payload.level === \"WARNING\"),\n        is_notice: (payload.level === \"NOTICE\"),\n        key: Math.random()\n      }\n    , ...this.state.listOfLogs]\n    });\n  }\n\n  relabelUnit(unit) {\n    return (this.props.relabelMap && this.props.relabelMap[unit]) ? `${this.props.relabelMap[unit]} / ${unit}` : unit\n  }\n\n  render(){\n    const { classes } = this.props;\n    return (\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" component=\"h2\">\n            <Box fontWeight=\"fontWeightRegular\">\n              Recent event logs\n            </Box>\n          </Typography>\n          <TableContainer style={{ height: \"660px\", width: \"100%\", overflowY: \"scroll\"}}>\n            <Table stickyHeader size=\"small\" aria-label=\"log table\">\n               <TableHead>\n                <TableRow>\n                  <TableCell className={clsx(classes.headerCell)}>Time</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Pioreactor</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Source</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Message</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {this.state.listOfLogs.map(log => (\n                  <TableRow key={log.key}>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.noticeLog]: log.is_notice, [classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}>\n                      <span title={moment.utc(log.timestamp, 'YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]').local().format('YYYY-MM-DD HH:mm:ss.SS')}>{moment.utc(log.timestamp, 'YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]').local().format('HH:mm:ss')} </span>\n                    </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.noticeLog]: log.is_notice, [classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}> {this.relabelUnit(log.pioreactor_unit)}</TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.noticeLog]: log.is_notice, [classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}>{log.task.replace(/_/g, ' ')}</TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.noticeLog]: log.is_notice, [classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}>{log.message}</TableCell>\n                  </TableRow>\n                  ))\n                }\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n    );}\n}\n\n\n\nexport default withStyles(useStyles)(LogTable);\n","import React from 'react'\nimport moment from \"moment\";\nimport Card from '@mui/material/Card';\nimport {makeStyles} from '@mui/styles';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Box from '@mui/material/Box';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport InputLabel from '@mui/material/InputLabel';\nimport Divider from '@mui/material/Divider';\nimport Button from '@mui/material/Button';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport TimelapseIcon from '@mui/icons-material/Timelapse';\nimport GetAppIcon from '@mui/icons-material/GetApp';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport AddIcon from '@mui/icons-material/Add';\nimport { useConfirm } from 'material-ui-confirm';\nimport { Link } from 'react-router-dom';\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"}\n}));\n\n\n\nclass EditableDescription extends React.Component {\n  constructor(props) {\n    super(props)\n    this.contentEditable = React.createRef();\n    this.state = {\n      desc: \"\",\n      recentChange: false,\n      savingLoopActive: false\n    };\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.description !== prevProps.description) {\n      this.setState({desc: this.props.description})\n    }\n  }\n\n  saveToDatabaseOrSkip = () => {\n    if (this.state.recentChange) {\n      this.setState({recentChange: false})\n      setTimeout(this.saveToDatabaseOrSkip, 150)\n    } else {\n      fetch(`/api/experiments/${this.props.experiment}`, {\n          method: \"PATCH\",\n          body: JSON.stringify({description: this.state.desc}),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          if (res.status !== 200){\n            console.log(\"Didn't save successfully.\")\n          }\n        })\n        this.setState({savingLoopActive: false})\n      }\n  }\n\n  onFocus = evt => {\n    evt.target.style.height = evt.target.scrollHeight + 'px'\n  }\n\n  handleChange = evt => {\n    evt.target.style.height = evt.target.scrollHeight + 'px'\n    this.setState({desc: evt.target.value});\n    this.setState({recentChange: true})\n    if (this.state.savingLoopActive){\n      return\n    }\n    else {\n      this.setState({savingLoopActive: true})\n      setTimeout(this.saveToDatabaseOrSkip, 150)\n    }\n  };\n\n\n  render = () => {\n    return (\n      <div style={{padding: \"0px 5px 0px 5px\"}}>\n        <InputLabel htmlFor=\"description-box\">Description</InputLabel>\n        <OutlinedInput\n          placeholder={\"Provide a description of your experiment.\"}\n          id=\"description-box\"\n          multiline\n          fullWidth={true}\n          onChange={this.handleChange}\n          value={this.state.desc}\n          style={{padding: \"10px 5px 10px 5px\",  fontSize: \"14px\", fontFamily: \"Roboto\", width: \"100%\", overflow: \"hidden\"}}\n        />\n      </div>\n    )\n  };\n};\n\n\nconst ButtonNewExperiment = () => {\n  const classes = useStyles();\n  const confirm = useConfirm();\n\n  const handleClick = () => {\n    confirm({\n      description: 'Starting a new experiment will stop data collection for the current experiment. Do you wish to proceed?',\n      title: \"Start a new experiment?\",\n      confirmationText: \"Confirm\",\n      confirmationButtonProps: {color: \"primary\", to: \"/start-new-experiment\", component: Link},\n      cancellationButtonProps: {color: \"secondary\"},\n    })\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\"}} color=\"primary\" onClick={handleClick}>\n        <AddIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> New experiment\n      </Button>\n    </React.Fragment>\n  );\n}\n\nconst ButtonEndExperiment = () =>{\n  const classes = useStyles();\n  const confirm = useConfirm();\n\n  const handleClick = () => {\n    confirm({\n      description: 'This will halt all activities (stirring, dosing, optical density reading, etc.) in all Pioreactor units. You can manually start them again later. Do you wish to end the experiment?',\n      title: \"End experiment?\",\n      confirmationText: \"Confirm\",\n      confirmationButtonProps: {color: \"primary\"},\n      cancellationButtonProps: {color: \"secondary\"},\n\n      }).then(() =>\n        fetch(\"/api/stop_all\", {method: \"POST\"})\n    )\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\"}} color=\"primary\" onClick={handleClick}>\n        <ClearIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> End experiment\n      </Button>\n    </React.Fragment>\n  );\n}\n\n\nfunction ExperimentSummary(props){\n  const classes = useStyles();\n  const experiment = props.experimentMetadata.experiment || \"\"\n  const startedAt = props.experimentMetadata.created_at || \"\"\n  const desc = props.experimentMetadata.description || \"\"\n  const deltaHours = props.experimentMetadata.delta_hours || 0\n\n  return(\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">{experiment}</Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <ButtonNewExperiment/>\n            <ButtonEndExperiment/>\n            <Button to={`/export-data?experiment=${experiment}`} component={Link} style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <GetAppIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Export experiment data\n            </Button>\n          </div>\n        </div>\n\n        <Divider/>\n        <div style={{margin: \"10px 2px 10px 2px\", display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"}}>\n          <Typography variant=\"subtitle2\" style={{flexGrow: 1}}>\n            <div style={{display:\"inline\"}}>\n              <Box fontWeight=\"fontWeightBold\" style={{display:\"inline-block\"}}>\n                <CalendarTodayIcon style={{ fontSize: 12, verticalAlign: \"-1px\" }}/> Experiment started:\n              </Box>\n              <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"1%\", display:\"inline-block\"}}>\n                {(startedAt !== \"\") &&\n                <span title={moment(startedAt).format(\"YYYY-MM-DD HH:mm:ss\")}>{moment(startedAt).format(\"dddd, MMMM D, h:mm a\")}</span>\n                }\n              </Box>\n            </div>\n\n            <div style={{display:\"inline\"}}>\n              <Box fontWeight=\"fontWeightBold\" style={{display:\"inline-block\"}}>\n                <TimelapseIcon style={{ fontSize: 12, verticalAlign: \"-1px\"  }}/>Time elapsed:\n              </Box>\n              <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"1%\", display:\"inline-block\"}}>\n               {deltaHours}h\n              </Box>\n            </div>\n\n          </Typography>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditableDescription experiment={experiment} description={desc} />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n  )\n}\n\n\nexport default ExperimentSummary;\n","import React from 'react'\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport {Client} from 'paho-mqtt';\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport {withStyles} from '@mui/styles';\n\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\n\nimport PioreactorIcon from \"./PioreactorIcon\"\n\n\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n});\n\n\n\nclass MediaCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        mediaThroughputPerUnit: {},\n        altMediaThroughputPerUnit: {},\n        mediaThroughput: 0,\n        altMediaThroughput: 0,\n        rates: {all: {mediaRate: 0, altMediaRate: 0}},\n        activeUnits: []\n      };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getRecentRates() {\n\n     await fetch(\"/api/media_rates/current\")\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      this.setState(prevState => ({...prevState, rates: data}))\n    });\n    return\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getRecentRates()\n     }\n  }\n\n  componentDidMount() {\n    if (this.props.config.remote && this.props.config.remote.ws_url) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_MediaCard\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_MediaCard\" + Math.floor(Math.random()*10000)\n      );\n    }\n\n    this.client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, timeout: 180, 'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n    this.setState({activeUnits: Object.entries(this.props.config['cluster.inventory']).filter((v) => v[1] === \"1\").map((v) => v[0])})\n    this.getRecentRates()\n  }\n\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"dosing_automation\", \"alt_media_throughput\"].join(\"/\"))\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"dosing_automation\", \"media_throughput\"].join(\"/\"))\n  }\n\n  addOrUpdate(hash, object, value) {\n      if (Object.hasOwnProperty(hash)){\n        object[hash] = value + object[hash]\n      }\n      else{\n        object[hash] = value\n      }\n      return object\n  }\n\n  onMessageArrived(message) {\n    const topic = message.destinationName\n    const topicParts = topic.split(\"/\")\n    const payload = parseFloat(message.payloadString)\n    const unit = topicParts[1]\n    const objectRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughputPerUnit\"  : \"mediaThroughputPerUnit\"\n    const totalRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughput\"  : \"mediaThroughput\"\n\n    this.setState({\n      [objectRef]: this.addOrUpdate(unit, this.state[objectRef], payload)\n    });\n\n    var total = Object.values(this.state[objectRef]).reduce((a, b) => a + b, 0)\n\n    this.setState({\n      [totalRef]: total\n    })\n  }\n\n  relabelUnit(unit) {\n    return (this.props.relabelMap && this.props.relabelMap[unit]) ? `${this.props.relabelMap[unit]} / ${unit}` : unit\n  }\n\n  render(){\n    return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h2\">\n          <Box fontWeight=\"fontWeightRegular\">\n            Dosing\n          </Box>\n        </Typography>\n       <TableContainer style={{ width: \"100%\"}}>\n          <Table size=\"small\" aria-label=\"media throughput\">\n            <TableHead>\n              <TableRow>\n                <TableCell style={{padding: \"6px 0px\"}}></TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Media</TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Alt. Media</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow key=\"all\">\n                <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                  All Pioreactors\n                </TableCell>\n                <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{this.state.mediaThroughput.toFixed(1)}mL (~{this.state.rates.all.mediaRate.toFixed(1)}mL/h)</TableCell>\n                <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{this.state.altMediaThroughput.toFixed(1)}mL (~{this.state.rates.all.altMediaRate.toFixed(1)}mL/h)</TableCell>\n              </TableRow>\n\n              {this.state.activeUnits.map((unit) => (\n                <TableRow key={unit}>\n                  <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                      <PioreactorIcon style={{ fontSize: 14, verticalAlign: \"middle\" }} color=\"inherit\"/>{this.relabelUnit(unit)}\n                  </TableCell>\n                  <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{(this.state.mediaThroughputPerUnit[unit] || 0).toFixed(1)}mL (~{this.state.rates[unit] ? this.state.rates[unit].mediaRate.toFixed(1) : \"0.0\"}mL/h)</TableCell>\n                  <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{(this.state.altMediaThroughputPerUnit[unit] || 0).toFixed(1)}mL (~{this.state.rates[unit] ? this.state.rates[unit].altMediaRate.toFixed(1): \"0.0\"}mL/h)</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </CardContent>\n    </Card>\n  )}\n}\n\nexport default  withStyles(useStyles)(MediaCard);\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport Chart from \"./components/Chart\";\nimport { makeStyles } from '@mui/styles';\nimport Select from '@mui/material/Select';\nimport {Typography} from '@mui/material';\nimport Box from '@mui/material/Box';\nimport MenuItem from '@mui/material/MenuItem';\nimport Checkbox from '@mui/material/Checkbox';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {getConfig, getRelabelMap} from \"./utilities\"\nimport GetAppIcon from '@mui/icons-material/GetApp';\nimport { Link } from 'react-router-dom';\n\n// TODO:\n// figure out how to display lots of data from long-running experiments without breaking the thing,\n//\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(2),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"},\n  textIcon: {\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n  const [experiments, setExperiments] = React.useState([])\n  const selectedExperient = experiments.find(o => o.experiment === props.experimentSelection);\n\n  React.useEffect(() => {\n    async function getData() {\n       await fetch(\"/api/experiments\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setExperiments(prevState => [ ...data, ...prevState])\n        props.handleExperimentSelectionChange(data[0].experiment)\n      });\n    }\n    getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleExperimentSelectionChange(e.target.value)\n  }\n\n\n  return (\n    <div style={{maxWidth: \"450px\", margin: \"10px\"}}>\n      <FormControl fullWidth component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Experiment</FormLabel>\n        <Select\n          labelId=\"expSelect\"\n          variant=\"standard\"\n          value={props.experimentSelection}\n          onChange={handleExperimentSelectionChange}\n        >\n          {experiments.map((v) => {\n            return <MenuItem key={v.experiment} value={v.experiment}>{v.experiment +  (v.created_at ? ` (${moment(v.created_at).format(\"MMMM D, YYYY\")})` : \"\")}</MenuItem>\n            }\n          )}\n        </Select>\n      </FormControl>\n      <Box sx={{ p: 2, pt: 0 }}>\n        <Typography sx={{ fontSize: 16 }} color=\"text.secondary\" gutterBottom>\n          Experiment started\n        </Typography>\n        <Typography variant=\"body2\" style={{whiteSpace: \"pre-line\"}} gutterBottom>\n          {moment(selectedExperient?.created_at).format(\"MMMM D, YYYY, h:mm a\")}\n        </Typography>\n        <Typography sx={{ fontSize: 16, pt: 1}} color=\"text.secondary\" gutterBottom>\n          Description\n        </Typography>\n        <Typography variant=\"body2\" style={{whiteSpace: \"pre-line\"}}>\n          {selectedExperient?.description}\n        </Typography>\n      </Box>\n    </div>\n  )\n}\n\n\nfunction ChartSelection(props) {\n  const classes = useStyles();\n\n  const [charts, setCharts] = React.useState({})\n\n  React.useEffect(() => {\n    async function getCharts() {\n        await fetch(\"/api/contrib/charts\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setCharts(data.reduce((map, obj) => (map[obj.chart_key] = obj, map), {}))\n        });\n      }\n    getCharts()\n  }, [])\n\n  const handleChange = (e) => {\n      props.handleChartSelectionChange(charts[e.target.name], e.target.checked)\n    };\n\n  return (\n    <div style={{maxWidth: \"450px\", margin: \"10px\"}}>\n      <FormControl fullWidth component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Charts</FormLabel>\n        <FormGroup>\n          {Object.entries(charts)\n            .filter(([chart_key, _]) => props.config['ui.overview.charts'] && (props.config['ui.overview.charts'][chart_key] === \"1\"))\n            .map(([chart_key, chart]) =>\n            <FormControlLabel\n              key={chart_key}\n              control={\n                <Checkbox checked={chart_key in props.chartSelection} onChange={handleChange} name={chart_key} size=\"small\"/>\n              }\n              label={chart.title}/>\n            )}\n        </FormGroup>\n      </FormControl>\n    </div>\n  )\n}\n\n\n\nfunction ExperimentsContainer(props) {\n  const classes = useStyles();\n\n  const [experimentSelection, setExperimentSelection] = React.useState(\"\")\n  const [chartSelection, setChartSelection] = React.useState({})\n  const [config, setConfig] = React.useState({})\n  const [relabelMap, setRelabelMap] = React.useState({})\n\n\n  React.useEffect(() => {\n    document.title = props.title;\n    getConfig(setConfig)\n\n  }, [props.title]);\n\n  function handleExperimentSelectionChange(experimentName) {\n    setExperimentSelection(experimentName)\n    getRelabelMap(setRelabelMap, experimentName)\n  };\n\n  function handleChartSelectionChange(chart_obj, is_checked) {\n    if (is_checked){\n      setChartSelection({ ...chartSelection, [chart_obj.chart_key]: chart_obj })\n    } else {\n      const { [chart_obj.chart_key]: tmp, ...rest } = chartSelection;\n      setChartSelection(rest)\n    }\n  };\n\n\n  function objectToQueryString(obj) {\n    const chartKeyToDataKey = {\n      implied_growth_rate : \"growth_rates\",\n      raw_optical_density : \"od_readings\",\n      temperature : \"temperature_readings\",\n      normalized_optical_density : \"od_readings_filtered\",\n      fraction_of_volume_that_is_alternative_media : \"alt_media_fraction\",\n    }\n\n    let queryString = \"\";\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key) && chartKeyToDataKey.hasOwnProperty(key)) {\n        queryString += `&${chartKeyToDataKey[key]}=1`;\n      }\n    }\n    return queryString;\n  }\n\n\n  const additionalQueryString = objectToQueryString(chartSelection)\n\n  return (\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Past Experiments\n            </Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <Button to={`/export-data?experiment=${experimentSelection}&experiments=1${additionalQueryString}`} component={Link} style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <GetAppIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Export experiment data\n            </Button>\n          </div>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <Grid container spacing={2} justifyContent=\"space-between\">\n            <Grid item xs={6}>\n              <ExperimentSelection\n                experimentSelection={experimentSelection}\n                handleExperimentSelectionChange={handleExperimentSelectionChange}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <ChartSelection\n                chartSelection={chartSelection}\n                handleChartSelectionChange={handleChartSelectionChange}\n                config={config}\n              />\n            </Grid>\n            <Grid item xs={12} md={12} container spacing={2} justifyContent=\"flex-start\" style={{height: \"100%\"}}>\n              {Object.entries(chartSelection).sort()\n                .map(([chart_key, chart]) =>\n                  <React.Fragment key={`grid-chart-${chart_key}`}>\n                    <Grid item xs={6}>\n                      <Chart\n                        key={`chart-${chart_key}`}\n                        config={config}\n                        dataSource={chart.data_source}\n                        title={chart.title}\n                        topic={chart.mqtt_topic}\n                        payloadKey={chart.payload_key}\n                        yAxisLabel={chart.y_axis_label}\n                        experiment={experimentSelection}\n                        deltaHours={10}\n                        downSample={true}\n                        interpolation={chart.interpolation || \"stepAfter\"}\n                        yAxisDomain={chart.y_axis_domain ? chart.y_axis_domain : null}\n                        lookback={10000}\n                        fixedDecimals={chart.fixed_decimals}\n                        yTransformation={eval(chart.y_transformation || \"(y) => y\")}\n                        dataSourceColumn={chart.data_source_column}\n                        relabelMap={relabelMap}\n                        isODReading={chart_key === \"raw_optical_density\"}\n                        allowZoom={true}\n                        isLiveChart={false}\n                      />\n                    </Grid>\n                  </React.Fragment>\n\n            )}\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n  );\n}\n\nfunction Experiments(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title]);\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <ExperimentsContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Experiments;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport Alert from '@mui/material/Alert';\nimport AlertTitle from '@mui/material/AlertTitle';\nimport {getConfig, getRelabelMap} from \"../utilities\"\n\nimport Snackbar from '@mui/material/Snackbar';\n\nfunction TactileButtonNotification(props) {\n  const [unit, setUnit] = React.useState(\"\")\n  const [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  const [open, setOpen] = React.useState(false)\n  const [relabelMap, setRelabelMap] = React.useState({})\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n    getRelabelMap(setRelabelMap)\n    getConfig(setConfig)\n  }, [])\n\n  React.useEffect(() => {\n    if (!config['cluster.topology']){\n      return\n    }\n\n    const onMessageArrived = (msg) => {\n      if (msg.payloadString === \"True\"){\n        var unit = msg.topic.split(\"/\")[1]\n        setUnit(unit)\n        try {\n          setRenamedUnit(relabelMap[unit])\n        }\n        catch {}\n        setOpen(true)\n      }\n      else {\n        setOpen(false)\n      }\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"$experiment\",\n        \"monitor\",\n        \"button_down\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client\n    if (config.remote && config.remote.ws_url) {\n      client = new Client(\n        `ws://${config.remote.ws_url}/`,\n        \"webui_TactileButtonNotification\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      client = new Client(\n        `${config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_TactileButtonNotification\" + Math.floor(Math.random()*10000)\n      );\n    }\n    client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, onSuccess: onSuccess, timeout: 180, reconnect: true});\n    client.onMessageArrived = onMessageArrived;\n\n  },[config, relabelMap])\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={null}\n      onClose={() => {}}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      key={\"button-tactile-snackbar\"}\n      transitionDuration={{enter: 10}}\n    >\n    <Alert severity=\"info\" variant=\"filled\" icon={false}>\n      <AlertTitle style={{fontSize: 30}}>{unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      Holding <b>{unit}</b>'s button down\n    </Alert>\n    </Snackbar>\n)}\n\nexport default TactileButtonNotification;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport Alert from '@mui/material/Alert';\nimport AlertTitle from '@mui/material/AlertTitle';\nimport {getConfig, getRelabelMap} from \"../utilities\"\n\nimport Snackbar from '@mui/material/Snackbar';\n\nfunction ErrorSnackbar(props) {\n  const [open, setOpen] = React.useState(false)\n  const [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  const [unit, setUnit] = React.useState(\"\")\n  const [msg, setMsg] = React.useState(\"\")\n  const [level, setLevel] = React.useState(\"error\")\n  const [task, setTask] = React.useState(\"\")\n  const [relabelMap, setRelabelMap] = React.useState({})\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n    getRelabelMap(setRelabelMap)\n    getConfig(setConfig)\n  }, [])\n\n  React.useEffect(() => {\n    if (!config['cluster.topology']){\n      return\n    }\n\n    const onFailure = () => {\n      setMsg(`Failed to connect to MQTT. Is configuration for leader_address correct? Currently set to ${config['cluster.topology']['leader_address']}.`)\n      setTask(\"PioreactorUI\")\n      setLevel(\"ERROR\")\n      setUnit(config['cluster.topology']['leader_hostname'])\n      setOpen(true)\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"+\",\n        \"logs\",\n        \"+\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client\n    if (config.remote && config.remote.ws_url) {\n      client = new Client(\n        `ws://${config.remote.ws_url}/`,\n        \"webui_ErrorSnackbarNotification\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      client = new Client(\n        `${config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_ErrorSnackbarNotification\" + Math.floor(Math.random()*10000)\n      );\n    }\n    client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, timeout: 10, onSuccess: onSuccess, onFailure: onFailure});\n    client.onMessageArrived = onMessageArrived;\n\n  },[config])\n\n  const onMessageArrived = (message) => {\n      const payload = JSON.parse(message.payloadString)\n\n      if ((payload.level === \"ERROR\" || payload.level === \"WARNING\" || payload.level === \"NOTICE\") && (!message.topic.endsWith(\"/ui\"))){\n        const unit = message.topic.split(\"/\")[1]\n        try {\n          setRenamedUnit(relabelMap[unit])\n        }\n        catch {}\n        setMsg(payload.message)\n        setTask(payload.task)\n        setLevel(payload.level === \"NOTICE\" ? \"SUCCESS\" : payload.level)\n        setUnit(unit)\n        setOpen(true)\n      }\n    }\n\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n\n  return (\n    <Snackbar\n      open={open}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}\n      key=\"error-snackbar\"\n      autoHideDuration={14000}\n      style={{maxWidth: \"500px\"}}\n      onClose={handleClose}\n    >\n    <Alert variant=\"standard\" severity={level.toLowerCase()} onClose={handleClose}>\n      <AlertTitle style={{fontSize: 15}}>{task} encountered a {level.toLowerCase()} in {unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      <span style={{whiteSpace: 'pre-wrap'}}>{msg}</span>\n    </Alert>\n    </Snackbar>\n)}\n\nexport default ErrorSnackbar;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from '@mui/material/Grid';\nimport clsx from 'clsx';\nimport { makeStyles } from '@mui/styles';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport MenuItem from '@mui/material/MenuItem';\nimport {Typography} from '@mui/material';\nimport Select from '@mui/material/Select';\nimport Box from '@mui/material/Box';\nimport LoadingButton from \"@mui/lab/LoadingButton\";\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport { useSearchParams } from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  datasetItem: {\n    padding: \"10px\"\n  },\n  recommended: {\n    backgroundColor: \"rgba(83, 49, 202, 0.08)\",\n  },\n  datasetDescription: {\n    marginLeft: \"30px\",\n    fontSize: 14\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"},\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n}));\n\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n\n  const [experiments, setExperiments] = React.useState([{experiment: \"<All experiments>\"}])\n\n  React.useEffect(() => {\n    async function getData() {\n       await fetch(\"/api/experiments\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setExperiments(prevState => [ ...data, ...prevState])\n        if (props.experimentSelection === \"\") {\n          props.handleChange(data[0].experiment)\n        }\n        else if (data.filter(e => e.experiment === props.experimentSelection).length === 0) {\n          props.handleChange(data[0].experiment)\n        }\n      });\n    }\n    getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleChange(e.target.value)\n  }\n  return (\n    <div style={{maxWidth: \"450px\", margin: \"10px\"}}>\n      <FormControl fullWidth component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Experiment</FormLabel>\n        <Select\n          labelId=\"expSelect\"\n          variant=\"standard\"\n          value={props.experimentSelection}\n          onChange={handleExperimentSelectionChange}\n        >\n          {experiments.map((v) => {\n            return <MenuItem value={v.experiment}>{v.experiment +  (v.created_at ? ` (started ${moment(v.created_at).format(\"MMMM D, YYYY\")})` : \"\")}</MenuItem>\n            }\n          )}\n        </Select>\n      </FormControl>\n    </div>\n  )\n}\n\n\n\nconst CheckboxesGroup = (props) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root} style={{margin: \"10px\"}}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Available datasets</FormLabel>\n        <FormGroup>\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n              control={<Checkbox checked={props.isChecked.pioreactor_unit_activity_data} onChange={props.handleChange} name=\"pioreactor_unit_activity_data\" />}\n              label=\"Pioreactor unit activity data (recommended)\"\n            />\n            <Typography className={classes.datasetDescription} gutterBottom>\n              This dataset contains most of your experiment data, including the time series of OD metrics, temperature, stirring rates, LED updates, and dosings.\n            </Typography>\n          </div>\n\n\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.logs} onChange={props.handleChange} name=\"logs\" />}\n            label=\"Pioreactor logs\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes the append-only collection of logs from all Pioreactors. A subset of the these logs are displayed in the Log Table in the Experiment Overview.\n              These are the logs that should be provided to get assistance when troubleshooting, but choose \"&lt;All experiments&gt;\" above.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n              control={<Checkbox checked={props.isChecked.growth_rates} onChange={props.handleChange} name=\"growth_rates\" />}\n              label=\"Implied growth rate\"\n            />\n            <Typography className={classes.datasetDescription} gutterBottom>\n             This dataset includes a time series of the calculated (implied) growth rate. This data matches what's presented in the \"Implied growth rate\" chart in the Experiment Overview.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n              control={<Checkbox checked={props.isChecked.od_readings} onChange={props.handleChange} name=\"od_readings\" />}\n              label=\"Optical density\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a time series of readings provided by the sensors (transformed via a calibration curve, if available), the inputs for growth calculations and normalized optical densities. This data matches what's presented in the \"Optical density\" chart in the Experiment Overview.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_filtered} onChange={props.handleChange} name=\"od_readings_filtered\" />}\n            label=\"Normalized optical density\"\n          />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a time series of normalized optical densities. This data matches what's presented in the \"Normalized optical density\" chart in the Experiment Overview.\n            </Typography>\n          </div>\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.temperature_readings} onChange={props.handleChange} name=\"temperature_readings\" />}\n            label=\"Temperature readings\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a time series of temperature readings from the Pioreactors. This data matches what's presented in the \"Temperature of vials\" chart in the Experiment Overview.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.experiments} onChange={props.handleChange} name=\"experiments\" />}\n            label=\"Experiment metadata\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes your experiment description and metadata.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.alt_media_fractions} onChange={props.handleChange} name=\"alt_media_fractions\" />}\n            label=\"Alternative media fraction\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a time series of how much alternative media is in each Pioreactor. This data matches what's presented in the \"Fraction of volume that is alternative media\" chart in the Experiment Overview.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n              <FormControlLabel\n              control={<Checkbox checked={props.isChecked.pioreactor_unit_activity_data_rollup} onChange={props.handleChange} name=\"pioreactor_unit_activity_data_rollup\" />}\n              label=\"Pioreactor unit activity data roll-up\"\n            />\n            <Typography className={classes.datasetDescription} gutterBottom>\n              This dataset is a rolled-up version of Pioreactor unit activity data (above) aggregated to the minute level. This is useful for reducing the size of the exported dataset.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_events} onChange={props.handleChange} name=\"dosing_events\" />}\n            label=\"Dosing event log\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              In this dataset, you'll find a detailed log table of all dosing events, including the volume exchanged, and the source of who or what triggered the event.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.led_change_events} onChange={props.handleChange} name=\"led_change_events\" />}\n            label=\"LED event log\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              In this dataset, you'll find a log table of all LED events, including the channel, intensity, and the source of who or what triggered the event.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_automation_settings} onChange={props.handleChange} name=\"dosing_automation_settings\" />}\n            label=\"Dosing automation changelog\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              Anytime an automation is updated (new automation, new setting, etc.), a new row is recorded. You can reconstruct all the dosing automation states\n              from this dataset.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.led_automation_settings} onChange={props.handleChange} name=\"led_automation_settings\" />}\n            label=\"LED automation changelog\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              Whenever a LED automation is updated (new automation, new setting, etc.), a new row is recorded. You can reconstruct all the LED automation states\n              from this dataset.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.temperature_automation_settings} onChange={props.handleChange} name=\"temperature_automation_settings\" />}\n            label=\"Temperature automation changelog\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              Whenever a temperature automation is updated (new automation, new setting, etc.), a new row is recorded. You can reconstruct all the temperature automation states\n              from this dataset.\n            </Typography>\n          </div>\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_automation_events} onChange={props.handleChange} name=\"dosing_automation_events\" />}\n            label=\"Dosing automation events\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a log of automation events created by dosing automations.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.led_automation_events} onChange={props.handleChange} name=\"led_automation_events\" />}\n            label=\"LED automation events\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a log of automation events created by LED automations.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.temperature_automation_events} onChange={props.handleChange} name=\"temperature_automation_events\" />}\n            label=\"Temperature automation events\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a log of automation events created by temperature automations.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.kalman_filter_outputs} onChange={props.handleChange} name=\"kalman_filter_outputs\" />}\n            label=\"Kalman filter outputs\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset includes a time series of the internal Kalman filter. The Kalman filter produces the normalized optical densities, growth rates, an acceleration term, and variances (and covariances) between the estimates.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.stirring_rates} onChange={props.handleChange} name=\"stirring_rates\" />}\n            label=\"Stirring rates\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dowload includes the measured RPM of the onboard stirring.\n            </Typography>\n          </div>\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.pioreactor_unit_labels} onChange={props.handleChange} name=\"pioreactor_unit_labels\" />}\n            label=\"Pioreactor unit labels\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              In this dataset, you'll find the labels assigned to a Pioreactor during an experiment.\n            </Typography>\n          </div>\n\n\n          <div className={clsx(classes.datasetItem)}>\n            <FormControlLabel\n            control={<Checkbox checked={props.isChecked.pwm_dcs} onChange={props.handleChange} name=\"pwm_dcs\" />}\n            label=\"PWM duty cycles\"\n            />\n            <Typography  className={classes.datasetDescription} gutterBottom>\n              This dataset contains a time series of the PWMs duty cycle percentages. Useful for debugging PWM use.\n            </Typography>\n          </div>\n\n        </FormGroup>\n      </FormControl>\n    </div>\n)}\n\n\nfunction ExportDataContainer() {\n  const [queryParams, setQueryParams] = useSearchParams();\n  const classes = useStyles();\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [isError, setIsError] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n\n\n  const [state, setState] = React.useState({\n    experimentSelection: queryParams.get(\"experiment\") || \"\",\n    datasetCheckbox: {\n      pioreactor_unit_activity_data: false || queryParams.get(\"pioreactor_unit_activity_data\") === \"1\",\n      growth_rates: false || queryParams.get(\"growth_rates\") === \"1\",\n      dosing_events: false || queryParams.get(\"dosing_events\") === \"1\",\n      led_change_events: false || queryParams.get(\"led_change_events\") === \"1\",\n      experiments: false || queryParams.get(\"experiments\") === \"1\",\n      od_readings: false || queryParams.get(\"od_readings\") === \"1\",\n      od_readings_filtered: false || queryParams.get(\"od_readings_filtered\") === \"1\",\n      logs: false || queryParams.get(\"logs\") === \"1\",\n      alt_media_fractions: false || queryParams.get(\"alt_media_fractions\") === \"1\",\n      dosing_automation_settings: false || queryParams.get(\"dosing_automation_settings\") === \"1\",\n      led_automation_settings: false || queryParams.get(\"led_automation_settings\") === \"1\",\n      temperature_automation_settings: false || queryParams.get(\"temperature_automation_settings\") === \"1\",\n      kalman_filter_outputs: false || queryParams.get(\"kalman_filter_outputs\") === \"1\",\n      stirring_rates: false || queryParams.get(\"stirring_rates\") === \"1\",\n      temperature_readings: false || queryParams.get(\"temperature_readings\") === \"1\",\n      pioreactor_unit_labels: false || queryParams.get(\"pioreactor_unit_labels\") === \"1\",\n      led_automation_events: false || queryParams.get(\"led_automation_events\") === \"1\",\n      dosing_automation_events: false || queryParams.get(\"dosing_automation_events\") === \"1\",\n      temperature_automation_events: false || queryParams.get(\"temperature_automation_events\") === \"1\",\n      pwm_dcs: false || queryParams.get(\"pwm_dcs\") === \"1\",\n      pioreactor_unit_activity_data_rollup: false || queryParams.get(\"pioreactor_unit_activity_data_rollup\") === \"1\",\n    }\n  });\n\n  const count = () => Object.values(state.datasetCheckbox).reduce((acc, checked) => acc + (checked === true ? 1 : 0), 0);\n\n  const onSubmit =  (event) => {\n    event.preventDefault()\n\n    if (!Object.values(state['datasetCheckbox']).some((e) => e)) {\n      setIsError(true)\n      setErrorMsg(\"At least one dataset must be selected.\")\n      return\n    }\n\n    setIsRunning(true)\n    setErrorMsg(\"\")\n    fetch('/api/export_datasets',{\n        method: \"POST\",\n        body: JSON.stringify(state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json())\n      .then(res => {\n      var link = document.createElement(\"a\");\n      const filename = res['filename'].replace(/%/g, \"%25\")\n      link.setAttribute('export', filename);\n      link.href = \"/static/exports/\" + filename;\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      setIsRunning(false)\n    }).catch(e => {\n      setIsRunning(false)\n      setIsError(true)\n      setErrorMsg(\"Server error occurred. Check UI logs.\")\n    });\n  }\n\n  const handleCheckboxChange = (event) => {\n    setState(prevState => ({\n      ...prevState,\n      datasetCheckbox: {...state.datasetCheckbox, [event.target.name]: event.target.checked }\n    }));\n  };\n\n  function handleExperimentSelectionChange(experimentName) {\n    setState(prevState => ({\n      ...prevState,\n      experimentSelection: experimentName\n    }));\n  };\n\n  const errorFeedbackOrDefault = isError ? <Box color=\"error.main\">{errorMsg}</Box>: \"\"\n  return (\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Export Experiment Data\n            </Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <LoadingButton\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                loading={isRunning}\n                loadingPosition=\"end\"\n                onClick={onSubmit}\n                endIcon={<FileDownloadIcon />}\n                disabled={count() === 0}\n              >\n                Export { count() > 0 ?  count() : \"\"}\n            </LoadingButton>\n          </div>\n        </div>\n      </div>\n      <Card className={classes.root}>\n\n        <CardContent className={classes.cardContent}>\n          <p style={{marginLeft: 10}}>{errorFeedbackOrDefault}</p>\n\n          <form>\n            <Grid container spacing={0}>\n              <Grid item xs={12} md={12}>\n                <ExperimentSelection\n                  experimentSelection={state.experimentSelection}\n                  handleChange={handleExperimentSelectionChange}\n                />\n              </Grid>\n              <Grid item xs={12} md={12}>\n                <CheckboxesGroup\n                isChecked={state.datasetCheckbox}\n                handleChange={handleCheckboxChange}\n                />\n              </Grid>\n\n              <Grid item xs={0}/>\n              <Grid item xs={12}>\n                <p style={{textAlign: \"center\", marginTop: \"30px\"}}>Learn more about <a href=\"https://docs.pioreactor.com/user-guide/export-data\" target=\"_blank\" rel=\"noopener noreferrer\">data exporting</a>.</p>\n              </Grid>\n            </Grid>\n          </form>\n        </CardContent>\n      </Card>\n  </React.Fragment>\n  )\n}\n\n\nfunction ExportData(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title]);\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <ExportDataContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default ExportData;\n\n","import React, {useEffect } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\nimport TextField from \"@mui/material/TextField\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"18ch\",\n  }\n}));\n\n\n\nfunction AutomationForm(props){\n  const classes = useStyles();\n  const defaults = Object.assign({}, ...props.fields.map(field => ({[field.key]: field.default})))\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [props.fields])\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n  var listOfTextField = props.fields.map(field =>\n        <TextField\n          size=\"small\"\n          autoComplete={\"off\"}\n          id={field.key}\n          key={field.key + props.name}\n          label={field.label}\n          defaultValue={field.default}\n          disabled={field.disabled}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">{field.unit}</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          onKeyPress={(e) => {e.key === 'Enter' && e.preventDefault();}}\n          className={classes.textFieldCompact}\n        />\n  )\n\n  return (\n    <div>\n        <p> {props.description} </p>\n        {listOfTextField}\n    </div>\n)}\n\n\nexport default AutomationForm;","import React, { useState, useEffect } from \"react\";\n\nimport { Client, Message } from \"paho-mqtt\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport FormLabel from '@mui/material/FormLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport {runPioreactorJob} from \"../utilities\"\n\nimport { Link } from 'react-router-dom';\n\nimport PioreactorIcon from \"./PioreactorIcon\"\nimport AutomationForm from \"./AutomationForm\"\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    marginTop: theme.spacing(2)\n  },\n  unitTitle: {\n    fontSize: 17,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n}));\n\n\nconst defaultAutomations = {\n  temperature: \"thermostat\",\n  dosing: \"chemostat\",\n  led: \"light_dark_cycle\"\n}\n\n\nfunction ChangeAutomationsDialog(props) {\n  const classes = useStyles();\n  const automationType = props.automationType\n  const automationTypeForDisplay = (automationType === \"led\") ? \"LED\" : automationType\n  const [automationName, setAutomationName] = useState(defaultAutomations[automationType])\n  const [algoSettings, setAlgoSettings] = useState({\n    skip_first_run: 0 //TODO: this should be not included if !props.no_skip_first_run\n  })\n  const [client, setClient] = useState(null)\n  const [automations, setAutomations] = useState({})\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n\n\n  useEffect(() => {\n    function fetchAutomations() {\n      fetch(\"/api/contrib/automations/\" + automationType)\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((listOfAuto) => {\n          setAutomations(Object.assign({}, ...listOfAuto.map(auto => ({ [auto.automation_name]: auto}))))\n        })\n        .catch((error) => {})\n    }\n    fetchAutomations();\n  }, [automationType])\n\n\n  useEffect(() => {\n    // MQTT - client ids should be unique\n    if (!props.config['cluster.topology']){\n      return\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_ButtonChangeDialog\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      client = new Client(\n        `${props.config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_ButtonChangeDialog\" + Math.floor(Math.random()*10000)\n      );\n    }\n\n    client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, });\n    setClient(client)\n  },[props.config])\n\n\n  const handleClose = () => {\n    props.onFinished();\n  };\n\n  const handleSkipFirstRunChange = (e) => {\n    setAlgoSettings({...algoSettings, skip_first_run: e.target.checked ? 1 : 0})\n  }\n\n  const handleAlgoSelectionChange = (e) => {\n    setAutomationName(e.target.value)\n    setAlgoSettings({\n        ...( !props.no_skip_first_run && {skip_first_run: algoSettings.skip_first_run})\n    })\n  }\n\n  const updateFromChild = (setting) => {\n    setAlgoSettings(prevState => ({...prevState, ...setting}))\n  }\n\n  const startJob = (event) => {\n    event.preventDefault()\n    runPioreactorJob(props.unit, `${automationType}_control`, [], {\"automation_name\": automationName, ...algoSettings})\n    setOpenSnackbar(true);\n    handleClose()\n  }\n\n  const changeAutomation = (event) => {\n    event.preventDefault()\n    var message = new Message(JSON.stringify({\"automation_name\": automationName, \"type\": automationType, \"args\": algoSettings}),);\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      `${automationType}_control`,\n      \"automation\",\n      \"set\",\n    ].join(\"/\");\n    message.qos = 2;\n    try{\n      client.publish(message);\n      setOpenSnackbar(true);\n    }\n    catch (e){\n      console.log(e)\n    }\n    handleClose();\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return (\n    <React.Fragment>\n    <Dialog open={props.open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" PaperProps={{style: {height: \"100%\"}}}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/>\n            {(props.unit === \"$broadcast\")\n              ? <b>All active Pioreactors</b>\n              :((props.title || props.label)\n                  ? ` ${props.label} / ${props.unit}`\n                  : `${props.unit}`\n              )\n            }\n        </Typography>\n        <Typography className={classes.unitTitleDialog}>\n          Select {automationTypeForDisplay} automation\n        </Typography>\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" component=\"span\" gutterBottom>\n          <span style={{textTransform: \"capitalize\"}}>{automationTypeForDisplay}</span> automations control the {automationTypeForDisplay} in the Pioreactor's vial. Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href={\"https://docs.pioreactor.com/user-guide/\" + automationTypeForDisplay + \"-automations\"}>{automationTypeForDisplay} automations</a>.\n        </Typography>\n\n        <form>\n          <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Automation</FormLabel>\n            <Select\n              variant=\"standard\"\n              value={automationName}\n              onChange={handleAlgoSelectionChange}\n              style={{maxWidth: \"270px\"}}\n            >\n              {Object.keys(automations).map((key) => <MenuItem id={key} value={key} key={\"change-io\" + key}>{automations[key].display_name}</MenuItem>)}\n\n            </Select>\n            {Object.keys(automations).length > 0 && <AutomationForm fields={automations[automationName].fields} description={automations[automationName].description} updateParent={updateFromChild} name={automationName}/>}\n\n            {!props.no_skip_first_run ?\n              <div>\n                <FormControlLabel\n                  control={<Checkbox checked={Boolean(algoSettings.skip_first_run)}\n                                      color=\"primary\"\n                                      onChange={handleSkipFirstRunChange}\n                                      size=\"small\"/>\n                          }\n                  label=\"Skip first run\"\n                  style={{marginRight: \"3px\"}}\n                />\n                <IconButton component={Link} target=\"_blank\" rel=\"noopener noreferrer\" to={{pathname: \"https://docs.pioreactor.com/user-guide/intro-to-automations#skip-first-run\"}} >\n                  <HelpOutlineIcon style={{ fontSize: 17, verticalAlign: \"middle\", marginLeft: \"0px\" }}/>\n                </IconButton>\n              </div>\n            : <React.Fragment/> }\n\n          </FormControl>\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={props.isJobRunning ? changeAutomation :  startJob}\n        >\n          Start\n        </Button>\n        <Button\n          color=\"secondary\"\n          onClick={handleClose}\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={`Starting ${automationTypeForDisplay} automation ${automations[automationName]?.display_name}.`}\n      autoHideDuration={7000}\n      key={\"snackbar-change-\" + automationType}\n    />\n    </React.Fragment>\n  );}\n\n\nexport default ChangeAutomationsDialog;\n","import React, {useState} from 'react'\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { makeStyles } from \"@mui/styles\";\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport {runPioreactorJob} from \"../utilities\"\n\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n    width: \"140px\",\n  },\n  actionForm: {\n    padding: \"10px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"remove_waste\": \"Removing waste\",\n  \"add_media\": \"Adding media\",\n  \"add_alt_media\": \"Adding alt. media\",\n\n}\n\nexport default function ActionPumpForm(props) {\n  const EMPTYSTATE = \"\";\n  const classes = useStyles();\n  const [mL, setML] = useState(EMPTYSTATE);\n  const [duration, setDuration] = useState(EMPTYSTATE);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n  const [snackbarMsg, setSnackbarMsg] = useState(\"\");\n  const [textfieldError, setTextfieldError] = useState(false);\n  const [clicked, setClicked] = useState(false)\n  const [dosingMethod, setDosingMethod] = useState(\"volume\")\n\n  const [formErrorDuration, setFormErrorDuration] = useState(false)\n  const [formErrorML, setFormErrorML] = useState(false)\n\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if ((dosingMethod === \"continuously\") || (dosingMethod === 'volume' && mL !== EMPTYSTATE) || (dosingMethod === 'duration' && duration !== EMPTYSTATE)) {\n      setClicked(true)\n\n      var params = {}\n      var msg = \"\"\n      if (dosingMethod === 'volume'){\n        params = { ml: parseFloat(mL), source_of_event: \"UI\"};\n        msg = actionToAct[props.action] + (\" until \" + mL + \"mL is reached.\")\n      } else if (dosingMethod === 'duration') {\n        params = { duration: parseFloat(duration), source_of_event: \"UI\"}\n        msg = actionToAct[props.action] + (\" for \" +  duration + \" seconds.\")\n      } else {\n        params = {continuously: true, source_of_event: \"UI\"}\n        msg = actionToAct[props.action] + \" continuously\"\n      }\n\n      runPioreactorJob(props.unit, props.action, [], params)()\n      setSnackbarMsg(msg)\n      setOpenSnackbar(true);\n      setTimeout(() => setClicked(false), 2500)\n    }\n    else {\n      setTextfieldError(true)\n    }\n\n  }\n\n  function stopPump(e) {\n    fetch(`/api/stop/${props.unit}/${props.action}`, {method: \"PATCH\"})\n    .catch((error) => {\n      setSnackbarMsg(\"🛑 Failed to stop - please try again!\")\n      setOpenSnackbar(true)\n    });\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  function handleMLChange(e) {\n    const re = /^[0-9.\\b]+$/;\n    setTextfieldError(false)\n\n    setML(e.target.value);\n\n    if (e.target.value === EMPTYSTATE || re.test(e.target.value)) {\n      setFormErrorML(false)\n    }\n    else {\n      setFormErrorML(true)\n    }\n  }\n\n  function handleRadioChange(e) {\n    setDosingMethod(e.target.value);\n  }\n\n  function handleDurationChange(e) {\n    const re = /^[0-9.\\b]+$/;\n    setTextfieldError(false)\n\n    setDuration(e.target.value);\n\n    if (e.target.value === EMPTYSTATE || re.test(e.target.value)) {\n      setFormErrorDuration(false)\n    }\n    else {\n      setFormErrorDuration(true)\n    }\n  }\n  return (\n    <div id={props.action} className={classes.actionForm}>\n      <FormControl>\n        <RadioGroup\n          aria-labelledby=\"how to dose\"\n          name=\"how-to-dose-media\"\n          value={dosingMethod}\n          onChange={handleRadioChange}\n        >\n          <div style={{marginBottom: \"10px\", maxWidth: \"260px\", display: \"flex\", justifyContent: \"space-between\"}}>\n            <FormControlLabel value=\"volume\" control={<Radio />} label=\"Volume\" />\n            <TextField\n              name=\"mL\"\n              autoComplete={\"off\"}\n              error={formErrorML || textfieldError}\n              value={mL}\n              size=\"small\"\n              id={props.action + \"_mL\"}\n              variant=\"outlined\"\n              onChange={handleMLChange}\n              disabled={dosingMethod !== 'volume'}\n              className={classes.actionTextField}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n              }}\n            />\n          </div>\n          <div style={{marginBottom: \"10px\", maxWidth: \"260px\", display: \"flex\", justifyContent: \"space-between\"}}>\n            <FormControlLabel value=\"duration\" control={<Radio />} label=\"Duration\" />\n            <TextField\n              name=\"duration\"\n              autoComplete={\"off\"}\n              value={duration}\n              error={formErrorDuration || textfieldError}\n              size=\"small\"\n              id={props.action + \"_duration\"}\n              variant=\"outlined\"\n              disabled={dosingMethod !== 'duration'}\n              onChange={handleDurationChange}\n              className={classes.actionTextField}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">s</InputAdornment>,\n              }}\n            />\n          </div>\n          <FormControlLabel value=\"continuously\" control={<Radio />} label=\"Run continuously\" />\n        </RadioGroup>\n      </FormControl>\n\n\n      <div style={{display: \"flex\", marginTop: '5px'}}>\n        <LoadingButton\n          loading={clicked && (props?.job?.state === \"disconnected\")}\n          disabled={(formErrorML && dosingMethod === 'volume') || (formErrorDuration && dosingMethod === 'duration') || (props?.job?.state === \"ready\")}\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"small\"\n          color=\"primary\"\n          onClick={onSubmit}\n          style={{marginRight: '3px'}}\n        >\n          Start\n        </LoadingButton>\n        <Button\n          size=\"small\"\n          color=\"secondary\"\n          disabled={(props?.job?.state !== \"ready\")}\n          onClick={stopPump}\n        >\n          Stop\n        </Button>\n      </div>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={snackbarMsg}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit + props.action}\n      />\n    </div>\n  );\n}","import React, {useState} from 'react'\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { makeStyles } from \"@mui/styles\";\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport {runPioreactorJob} from \"../utilities\"\n\nimport moment from 'moment';\n\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n    width: \"140px\",\n  },\n  actionForm: {\n    padding: \"10px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"remove_waste\": \"removing waste\",\n  \"add_media\": \"adding media\",\n  \"add_alt_media\": \"adding alt. media\",\n\n}\n\nexport default function ActionPumpForm(props) {\n  const EMPTYSTATE = \"\";\n  const classes = useStyles();\n  const [mL, setML] = useState(EMPTYSTATE);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n  const [snackbarMsg, setSnackbarMsg] = useState(\"\");\n  const [textfieldError, setTextfieldError] = useState(false);\n  const [manualAction, setManualAction] = useState(\"add_media\")\n\n  const [formErrorML, setFormErrorML] = useState(false)\n\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (mL > 0) {\n\n      var msg = `Recorded ${actionToAct[manualAction]} of ${mL} mL at ${moment().format('h:mm:ss a')}.`\n      var params = { ml: parseFloat(mL), source_of_event: \"manually\", manually: true};\n      runPioreactorJob(props.unit, manualAction, [], params)\n      setSnackbarMsg(msg)\n      setOpenSnackbar(true);\n      setML(EMPTYSTATE)\n    }\n    else {\n      setTextfieldError(true)\n    }\n\n  }\n\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  function handleMLChange(e) {\n    const re = /^[0-9.\\b]+$/;\n    setTextfieldError(false)\n\n    setML(e.target.value);\n\n    if (e.target.value === EMPTYSTATE || re.test(e.target.value)) {\n      setFormErrorML(false)\n    }\n    else {\n      setFormErrorML(true)\n    }\n  }\n\n  function handleRadioChange(e) {\n    setManualAction(e.target.value);\n    setML(EMPTYSTATE)\n  }\n\n  return (\n    <div id={props.action} className={classes.actionForm}>\n      <FormControl>\n        <RadioGroup\n          aria-labelledby=\"what action\"\n          name=\"what action\"\n          value={manualAction}\n          onChange={handleRadioChange}\n        >\n          <div style={{marginBottom: \"10px\", maxWidth: \"460px\", display: \"flex\", justifyContent: \"space-between\"}}>\n            <FormControlLabel value=\"add_media\" control={<Radio />} label=\"Add media\" />\n            <TextField\n              name=\"mL\"\n              autoComplete={\"off\"}\n              error={formErrorML || textfieldError}\n              value={manualAction === 'add_media' ? mL : EMPTYSTATE}\n              size=\"small\"\n              variant=\"outlined\"\n              onChange={handleMLChange}\n              disabled={manualAction !== 'add_media'}\n              className={classes.actionTextField}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n              }}\n            />\n          </div>\n          <div style={{marginBottom: \"10px\", maxWidth: \"460px\", display: \"flex\", justifyContent: \"space-between\"}}>\n            <FormControlLabel value=\"add_alt_media\" control={<Radio />} label=\"Add alt-media\" />\n            <TextField\n              name=\"mL\"\n              autoComplete={\"off\"}\n              error={formErrorML || textfieldError}\n              value={manualAction === 'add_alt_media' ? mL : EMPTYSTATE}\n              size=\"small\"\n              variant=\"outlined\"\n              onChange={handleMLChange}\n              disabled={manualAction !== 'add_alt_media'}\n              className={classes.actionTextField}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n              }}\n            />\n          </div>\n          <div style={{marginBottom: \"10px\", maxWidth: \"460px\", display: \"flex\", justifyContent: \"space-between\"}}>\n            <FormControlLabel value=\"remove_waste\" control={<Radio />} label=\"Remove waste\" />\n            <TextField\n              name=\"mL\"\n              autoComplete={\"off\"}\n              error={formErrorML || textfieldError}\n              value={manualAction === 'remove_waste' ? mL : EMPTYSTATE}\n              size=\"small\"\n              variant=\"outlined\"\n              onChange={handleMLChange}\n              disabled={manualAction !== 'remove_waste'}\n              className={classes.actionTextField}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">mL</InputAdornment>,\n              }}\n            />\n          </div>\n        </RadioGroup>\n      </FormControl>\n\n\n      <div style={{display: \"flex\", marginTop: '5px'}}>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"small\"\n          color=\"primary\"\n          onClick={onSubmit}\n          disabled={formErrorML}//(mL === EMPTYSTATE) || formErrorML}\n          style={{marginRight: '3px'}}\n        >\n          Adjust\n        </Button>\n      </div>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={snackbarMsg}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit}\n      />\n    </div>\n  );\n}","import React, {useState} from 'react'\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { makeStyles } from \"@mui/styles\";\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport FormControl from '@mui/material/FormControl';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport {runPioreactorJob} from \"../utilities\"\n\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n    width: \"140px\",\n  },\n  actionForm: {\n    padding: \"10px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"circulate_media\": \"Circulating media\",\n  \"circulate_alt_media\": \"Circulating alt. media\",\n\n}\n\nexport default function ActionCirculatingForm(props) {\n  const EMPTYSTATE = \"\";\n  const classes = useStyles();\n  const [duration, setDuration] = useState(EMPTYSTATE);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n  const [snackbarMsg, setSnackbarMsg] = useState(\"\");\n  const [textfieldError, setTextfieldError] = useState(false);\n  const [clicked, setClicked] = useState(false)\n\n  const [formErrorDuration, setFormErrorDuration] = useState(false)\n\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (duration !== EMPTYSTATE) {\n      setClicked(true)\n\n      var params = { duration: parseFloat(duration), source_of_event: \"UI\"}\n      var msg = actionToAct[props.action] + (\" for \" +  duration + \" seconds.\")\n\n      runPioreactorJob(props.unit, props.action, [], params)\n      setSnackbarMsg(msg)\n      setOpenSnackbar(true);\n      setTimeout(() => setClicked(false), 2500)\n    }\n    else {\n      setTextfieldError(true)\n    }\n\n  }\n\n  function stopPump(e) {\n    fetch(`/api/stop/${props.unit}/${props.action}`, {method: \"PATCH\"})\n    .catch((error) => {\n      setSnackbarMsg(\"🛑 Failed to stop - please try again!\")\n      setOpenSnackbar(true)\n    });\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n\n  function handleDurationChange(e) {\n    const re = /^[0-9.\\b]+$/;\n    setTextfieldError(false)\n\n    setDuration(e.target.value);\n\n    if (e.target.value === EMPTYSTATE || re.test(e.target.value)) {\n      setFormErrorDuration(false)\n    }\n    else {\n      setFormErrorDuration(true)\n    }\n  }\n  return (\n    <div id={props.action} className={classes.actionForm}>\n      <FormControl>\n        <div style={{marginBottom: \"10px\", maxWidth: \"260px\", display: \"flex\", justifyContent: \"space-between\"}}>\n          <TextField\n            name=\"duration\"\n            autoComplete={\"off\"}\n            value={duration}\n            error={formErrorDuration || textfieldError}\n            size=\"small\"\n            id={props.action + \"_duration\"}\n            variant=\"outlined\"\n            disabled={false}\n            onChange={handleDurationChange}\n            className={classes.actionTextField}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">s</InputAdornment>,\n            }}\n          />\n        </div>\n      </FormControl>\n\n\n      <br />\n      <div style={{display: \"flex\"}}>\n        <LoadingButton\n          loading={clicked && (props?.job?.state === \"disconnected\")}\n          disabled={formErrorDuration || (props?.job?.state === \"ready\")}\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"small\"\n          color=\"primary\"\n          onClick={onSubmit}\n          style={{marginRight: '3px'}}\n        >\n          Start\n        </LoadingButton>\n        <Button\n          size=\"small\"\n          color=\"secondary\"\n          disabled={(props?.job?.state !== \"ready\")}\n          onClick={stopPump}\n        >\n          Stop\n        </Button>\n      </div>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={snackbarMsg}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit + props.action}\n      />\n    </div>\n  );\n}","import React, {useState} from 'react'\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { makeStyles } from \"@mui/styles\";\nimport InputAdornment from '@mui/material/InputAdornment';\nimport {runPioreactorJob} from \"../utilities\"\n\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 0px 0px 0px\",\n    width: \"150px\",\n  },\n  actionForm: {\n    padding: \"10px 0px 0px 0px\",\n  }\n});\n\n\n\nexport default function ActionLEDForm(props) {\n  const EMPTYSTATE = \"\";\n  const re = /^[0-9.\\b]+$/;\n  const classes = useStyles();\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n  const [intensity, setIntensity] = useState(EMPTYSTATE);\n  const [errorForm, setErrorForm] = useState(false);\n\n  const validInput = (intensity) => {\n    if (intensity !== EMPTYSTATE && re.test(intensity)){\n      if (parseFloat(intensity) >= 0 && parseFloat(intensity) <= 100){\n        return true\n      }\n    }\n    return false\n  }\n\n  function onSubmit(e) {\n    if (validInput(intensity)) {\n      setErrorForm(false)\n      setOpenSnackbar(true);\n\n      const params = {[props.channel]: parseFloat(intensity), source_of_event: \"UI\"}\n      runPioreactorJob(props.unit, \"led_intensity\", [], params)()\n    } else if (intensity === EMPTYSTATE) {\n      setErrorForm(false)\n    } else {\n      setErrorForm(true)\n    }\n  }\n\n\n  function onChange(e) {\n    const proposedIntensity = e.target.value\n    setIntensity(proposedIntensity);\n    if (validInput(proposedIntensity)) {\n      setErrorForm(false)\n    } else if (proposedIntensity === EMPTYSTATE) {\n      setErrorForm(false)\n    } else {\n      setErrorForm(true)\n    }\n  }\n\n  const handleSnackbarClose = (e, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpenSnackbar(false);\n  };\n\n\n  const onKeyPress = (e) => {\n      if ((e.key === \"Enter\") && (e.target.value)) {\n        e.preventDefault()\n        onSubmit()\n    }\n  }\n\n  return (\n    <form id={props.action} className={classes.actionForm}>\n      <div style={{display: \"flex\"}}>\n        <TextField\n          size=\"small\"\n          error={errorForm}\n          name=\"intensity\"\n          autoComplete=\"off\"\n          value={intensity}\n          id={props.channel + \"_intensity_edit\"}\n          label=\"new intensity\"\n          variant=\"outlined\"\n          onChange={onChange}\n          onKeyPress={onKeyPress}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n          }}\n          className={classes.actionTextField}\n        />\n        <Button\n          size=\"small\"\n          color=\"primary\"\n          onClick={onSubmit}\n          disabled={!validInput(intensity)}\n          style={{marginLeft: \"7px\"}}\n        >\n          Update\n        </Button>\n      </div>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={`Updating channel ${props.channel} to ${intensity}%.`}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit + props.channel}\n      />\n    </form>\n  );\n}","import React from 'react'\n\nimport clsx from 'clsx';\n\nexport default  function UnderlineSpan(props){\n  const title = props.title\n\n  return (\n    <span className={clsx({underlineSpan: title ? true : false})} title={title}>\n      {props.children}\n    </span>\n )\n}\n","import clsx from 'clsx';\nimport { Client, Message } from \"paho-mqtt\";\nimport moment from 'moment';\n\nimport React, {useState, useEffect} from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport { useMediaQuery } from \"@mui/material\";\n\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport Box from '@mui/material/Box';\nimport Divider from '@mui/material/Divider';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Snackbar from '@mui/material/Snackbar';\nimport TextField from '@mui/material/TextField';\nimport Tooltip from '@mui/material/Tooltip';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Button from \"@mui/material/Button\";\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport AddIcon from '@mui/icons-material/Add';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport CloseIcon from '@mui/icons-material/Close';\nimport CheckIcon from '@mui/icons-material/Check';\nimport FlareIcon from '@mui/icons-material/Flare';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport TuneIcon from '@mui/icons-material/Tune';\nimport CheckBoxOutlinedIcon from '@mui/icons-material/CheckBoxOutlined';\nimport IndeterminateCheckBoxIcon from '@mui/icons-material/IndeterminateCheckBox';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport List from '@mui/material/List';\nimport IconButton from '@mui/material/IconButton';\nimport ListItem from '@mui/material/ListItem';\nimport ListSubheader from '@mui/material/ListSubheader';\nimport IndeterminateCheckBoxOutlinedIcon from '@mui/icons-material/IndeterminateCheckBoxOutlined';\nimport Switch from '@mui/material/Switch';\nimport { useConfirm } from 'material-ui-confirm';\nimport {getConfig, getRelabelMap, runPioreactorJob} from \"./utilities\"\nimport Alert from '@mui/material/Alert';\n\n\nimport ChangeAutomationsDialog from \"./components/ChangeAutomationsDialog\"\nimport ActionDosingForm from \"./components/ActionDosingForm\"\nimport ActionManualDosingForm from \"./components/ActionManualDosingForm\"\nimport ActionCirculatingForm from \"./components/ActionCirculatingForm\"\nimport ActionLEDForm from \"./components/ActionLEDForm\"\nimport PioreactorIcon from \"./components/PioreactorIcon\"\nimport UnderlineSpan from \"./components/UnderlineSpan\";\n\nconst readyGreen = \"#4caf50\"\nconst disconnectedGrey = \"grey\"\nconst lostRed = \"#DE3618\"\n\nconst useStyles = makeStyles((theme) => ({\n  lostRed: {\n    color: lostRed\n  },\n  readyGreen: {\n    color: readyGreen\n  },\n  textIcon: {\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  pioreactorCard: {\n    marginTop: \"0px\",\n    marginBottom: \"20px\",\n  },\n  cardContent: {\n    padding: \"10px 20px 20px 20px\"\n  },\n  code: {\n    backgroundColor: \"rgba(0, 0, 0, 0.07)\",\n    padding: \"1px 4px\"\n  },\n  unitTitle: {\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n    fontWeight: 500,\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n  disabledText: {\n    color: \"rgba(0, 0, 0, 0.38)\",\n  },\n  textbox:{\n    width: \"130px\",\n    marginTop: \"10px\"\n  },\n  textboxLabel:{\n    width: \"100px\",\n    marginTop: \"10px\",\n    marginRight: \"5px\"\n  },\n  footnote: {\n    marginBottom: 0,\n    fontSize: 12,\n  },\n  textField: {\n    marginTop: \"15px\",\n    maxWidth: \"180px\",\n  },\n  textFieldWide: {\n    marginTop: \"15px\",\n    maxWidth: \"220px\",\n  },\n  textFieldCompact: {\n    marginTop: \"15px\",\n    width: \"120px\",\n  },\n  slider: {\n    width: \"70%\",\n    margin: \"40px auto 0px auto\",\n  },\n  divider: {\n    marginTop: 15,\n    marginBottom: 10,\n  },\n  jobButton: {\n    paddingRight: \"15px\",\n    paddingLeft: \"15px\"\n  },\n  unitSettingsSubtext:{\n    fontSize: \"11px\",\n    wordBreak: \"break-word\"\n  },\n  unitSettingsSubtextEmpty:{\n    minHeight: \"15px\"\n  },\n  ledBlock:{\n    width: \"55px\",\n    display: \"inline-block\"\n  },\n  rowOfUnitSettingDisplay:{\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"flex-start\",\n    alignItems: \"stretch\",\n    alignContent: \"stretch\",\n  },\n  testingListItemIcon: {\n    minWidth: \"30px\"\n  },\n  testingListItem : {\n    paddingTop: \"0px\",\n    paddingBottom: \"0px\",\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  cardHeaderSettings:{\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    [theme.breakpoints.down('md')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  cardHeaderButtons: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    [theme.breakpoints.down('md')]: {\n      justifyContent: \"space-between\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"},\n  patientButton: {width: \"70px\", marginTop: \"5px\", height: \"31px\", marginRight: '3px'},\n}));\n\nfunction PythonBoolToJS(pythonBoolAsString){\n  if (pythonBoolAsString === \"True\"){\n    return true\n  } else if (pythonBoolAsString === \"False\"){\n    return false\n  }\n  else {\n    return null\n  }\n}\n\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      key={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n          <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\nfunction UnitSettingDisplaySubtext(props){\n  const classes = useStyles();\n\n  if (props.subtext){\n    return <div className={classes.unitSettingsSubtext}><code>{props.subtext}</code></div>\n  }\n  else{\n    return <div className={classes.unitSettingsSubtextEmpty}></div>\n  };\n}\n\n\nfunction UnitSettingDisplay(props) {\n  const classes = useStyles();\n  const stateDisplay = {\n    \"init\":          {display: \"Starting\", color: readyGreen},\n    \"ready\":         {display: \"On\", color: readyGreen},\n    \"sleeping\":      {display: \"Paused\", color: disconnectedGrey},\n    \"disconnected\":  {display: \"Off\", color: disconnectedGrey},\n    \"lost\":          {display: \"Lost\", color: lostRed},\n    \"NA\":            {display: \"Not available\", color: disconnectedGrey},\n  }\n  const value = props.value === null ?  \"\"  : props.value\n\n  function prettyPrint(x){\n    if (x >= 10){\n      return x.toFixed(0)\n    }\n    else if (x===0){\n      return \"0\"\n    }\n    else if (x < 1){\n      return `<1`\n    } else {\n      return (x).toFixed(1).replace(/[.,]0$/, \"\");\n    }\n  }\n\n  function formatForDisplay(value){\n    if (typeof value === \"string\"){\n      return value\n    } else if (typeof value === \"boolean\"){\n      return value ? \"On\" : \"Off\"\n    }\n    else {\n      return +value.toFixed(props.precision)\n    }\n  }\n\n  if (props.isStateSetting) {\n    if (!props.isUnitActive) {\n      return <div className={clsx({[classes.disabledText]: !props.isUnitActive})}> {stateDisplay[value].display} </div>;\n    } else {\n      var displaySettings = stateDisplay[value]\n      return (\n        <React.Fragment>\n          <div style={{ color: displaySettings.color, fontWeight: 500}}>\n            {displaySettings.display}\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n    )}\n  } else if (props.isLEDIntensity) {\n    if (!props.isUnitActive || value === \"—\" || value === \"\") {\n      return <div style={{ color: disconnectedGrey, fontSize: \"13px\"}}> {props.default} </div>;\n    } else {\n      const ledIntensities = JSON.parse(value)\n        // the | {} is here to protect against the UI loading from a broken config.\n      const LEDMap = props.config['leds']\n      const renamedA = (LEDMap['A']) ? (LEDMap['A'].replace(\"_\", \" \")) : null\n      const renamedB = (LEDMap['B']) ? (LEDMap['B'].replace(\"_\", \" \")) : null\n      const renamedC = (LEDMap['C']) ? (LEDMap['C'].replace(\"_\", \" \")) : null\n      const renamedD = (LEDMap['D']) ? (LEDMap['D'].replace(\"_\", \" \")) : null\n\n      return(\n        <React.Fragment>\n          <div style={{fontSize: \"13px\"}}>\n            <div>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedA ? renamedA : null}>A</UnderlineSpan>: {prettyPrint(ledIntensities[\"A\"])}%\n              </span>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedB ? renamedB : null}>B</UnderlineSpan>: {prettyPrint(ledIntensities[\"B\"])}%\n              </span>\n            </div>\n            <div>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedC ? renamedC : null}>C</UnderlineSpan>: {prettyPrint(ledIntensities[\"C\"])}%\n              </span>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedD ? renamedD : null}>D</UnderlineSpan>: {prettyPrint(ledIntensities[\"D\"])}%\n              </span>\n            </div>\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      )\n    }\n  } else if (props.isPWMDc) {\n    if (!props.isUnitActive || value === \"—\" || value === \"\") {\n      return <div style={{ color: disconnectedGrey, fontSize: \"13px\"}}> {props.default} </div>;\n    } else {\n      const pwmDcs = JSON.parse(value)\n      const PWM_TO_PIN = {1: \"17\",  2: \"13\", 3: \"16\",  4: \"12\"}\n\n      const PWMMap = props.config['PWM']\n      const renamed1 = (PWMMap[1]) ? (PWMMap[1].replace(\"_\", \" \")) : null\n      const renamed2 = (PWMMap[2]) ? (PWMMap[2].replace(\"_\", \" \")) : null\n      const renamed3 = (PWMMap[3]) ? (PWMMap[3].replace(\"_\", \" \")) : null\n      const renamed4 = (PWMMap[4]) ? (PWMMap[4].replace(\"_\", \" \")) : null\n\n\n      return(\n        <React.Fragment>\n          <div style={{fontSize: \"13px\"}}>\n            <div>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamed1 ? renamed1 : null}>1</UnderlineSpan>: {prettyPrint(pwmDcs[PWM_TO_PIN[1]] || 0)}%\n              </span>\n              <span className={classes.ledBlock}>\n               <UnderlineSpan title={renamed2 ? renamed2 : null}>2</UnderlineSpan>: {prettyPrint(pwmDcs[PWM_TO_PIN[2]] || 0)}%\n              </span>\n            </div>\n            <div>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamed3 ? renamed3 : null}>3</UnderlineSpan>: {prettyPrint(pwmDcs[PWM_TO_PIN[3]] || 0)}%\n              </span>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamed4 ? renamed4 : null}>4</UnderlineSpan>: {prettyPrint(pwmDcs[PWM_TO_PIN[4]] || 0)}%\n              </span>\n            </div>\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      )\n    }\n  } else {\n    if (!props.isUnitActive || value === \"—\" || value === \"\") {\n      return (\n        <React.Fragment>\n          <div style={{ color: disconnectedGrey, fontSize: \"13px\"}}> {props.default} </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      );\n    } else {\n      return (\n        <React.Fragment>\n          <div style={{ fontSize: \"13px\"}}>\n            {formatForDisplay(value) + \" \" +\n              (props.measurementUnit ? props.measurementUnit : \"\")}\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      );\n    }\n  }\n}\n\n\n\nfunction ButtonStopProcess() {\n  const classes = useStyles();\n  const confirm = useConfirm();\n\n  const handleClick = () => {\n    confirm({\n      description: 'This will immediately halt all activities (stirring, dosing, etc.) in all Pioreactor units. You can manually start them again later. Do you wish to continue?',\n      title: \"Stop all activities?\",\n      confirmationText: \"Confirm\",\n      confirmationButtonProps: {color: \"primary\"},\n      cancellationButtonProps: {color: \"secondary\"},\n\n      }).then(() =>\n        fetch(\"/api/stop_all\", {method: \"POST\"})\n    )\n  };\n\n  return (\n    <Button style={{textTransform: 'none', float: \"right\" }} color=\"secondary\" onClick={handleClick}>\n      <ClearIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Stop all activity\n    </Button>\n  );\n}\n\n\nfunction AddNewPioreactor(props){\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [name, setName] = React.useState(\"\");\n\n  const [isError, setIsError] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n\n  const [isSuccess, setIsSuccess] = React.useState(false)\n  const [successMsg, setSuccessMsg] = React.useState(\"\")\n\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [expectedPathMsg, setExpectedPathMsg] = React.useState(\"\")\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleNameChange = evt => {\n    setName(evt.target.value)\n  }\n\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n    if (!name) {\n      setIsError(true)\n      setErrorMsg(\"Provide the hostname for the new Pioreactor worker\")\n      return\n    }\n    setIsError(false)\n    setIsSuccess(false)\n    setIsRunning(true)\n    setExpectedPathMsg(\"Setting up new Pioreactor...\")\n    fetch('/api/setup_worker_pioreactor', {\n        method: \"POST\",\n        body: JSON.stringify({newPioreactorName: name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    })\n    .then(response => {\n        setIsRunning(false)\n        setExpectedPathMsg(\"\")\n        if(!response.ok){\n          setIsError(true)\n          response.json().then(data => setErrorMsg(`Unable to complete installation. The following error occurred: ${data.msg}`))\n        } else {\n          setIsSuccess(true)\n          setSuccessMsg(`Success! Rebooting ${name} now. Refresh to see ${name} in your cluster.`)\n        }\n    })\n  }\n\n  return (\n    <React.Fragment>\n    <Button onClick={handleClickOpen} style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n      <AddIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Add new Pioreactor\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        Add a Pioreactor worker to your current cluster\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n      <p>Follow the instructions at <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://docs.pioreactor.com/user-guide/software-set-up#adding-additional-workers-to-your-cluster\">set up your new Pioreactor's Raspberry Pi</a>.</p>\n\n      <p>After\n\n      <ol>\n       <li> image installation is complete and,</li>\n       <li> the new Pioreactor worker is powered on, </li>\n      </ol>\n\n      provide the hostname you used when installing the Pioreactor image onto the Raspberry Pi.\n      Your existing Pioreactor will automatically connect the new Pioreactor to the cluster. When finished, the new Pioreactor will show up on this page (after a refresh).</p>\n      <div>\n        <TextField\n          size=\"small\"\n          id=\"new-pioreactor-name\"\n          label=\"Hostname\"\n          variant=\"outlined\"\n          className={classes.textField}\n          onChange={handleNameChange}\n          value={name}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <PioreactorIcon style={{fontSize: \"1.1em\"}}/>\n              </InputAdornment>\n            ),\n            endAdornment: <InputAdornment position=\"end\">.local</InputAdornment>,\n          }\n        }\n        />\n      </div>\n\n      <div style={{minHeight: \"60px\", alignItems: \"center\", display: \"flex\"}}>\n        {isError   ? <p><CloseIcon className={clsx(classes.textIcon, classes.lostRed)}/>{errorMsg}</p>           : <React.Fragment/>}\n        {isRunning ? <p>{expectedPathMsg}</p>                                                                    : <React.Fragment/>}\n        {isSuccess ? <p><CheckIcon className={clsx(classes.textIcon, classes.readyGreen)}/>{successMsg}</p>      : <React.Fragment/>}\n      </div>\n\n      <LoadingButton\n        variant=\"contained\"\n        color=\"primary\"\n        style={{marginTop: \"10px\"}}\n        onClick={onSubmit}\n        type=\"submit\"\n        loading={isRunning}\n        endIcon={<AddIcon />}\n      >\n        Add Pioreactor\n      </LoadingButton>\n\n      </DialogContent>\n    </Dialog>\n    </React.Fragment>\n  );}\n\n\n\nfunction PioreactorHeader(props) {\n  const classes = useStyles()\n  return (\n    <div>\n      <div className={classes.headerMenu}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Pioreactors\n          </Box>\n        </Typography>\n        <div className={classes.headerButtons}>\n          <ButtonStopProcess/>\n          <AddNewPioreactor config={props.config}/>\n          <SettingsActionsDialogAll config={props.config} experiment={props.experiment}/>\n        </div>\n      </div>\n      <Divider/>\n    </div>\n  )\n}\n\n\n\nfunction PatientButton(props) {\n  const classes = useStyles()\n  const [buttonText, setButtonText] = useState(props.buttonText)\n\n  useEffect(\n    () => {\n      setButtonText(props.buttonText)\n    }\n  , [props.buttonText])\n\n  const onClick = () => {\n      setButtonText(<CircularProgress color=\"inherit\" size={21}/>)\n      props.onClick()\n      setTimeout(() => setButtonText(props.buttonText), 30000)\n  }\n\n  return (\n    <Button\n      disableElevation\n      className={classes.patientButton}\n      color={props.color}\n      variant={props.variant}\n      disabled={props.disabled}\n      size=\"small\"\n      onClick={onClick}\n    >\n      {buttonText}\n    </Button>\n  )\n}\n\n\nfunction CalibrateDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [tabValue, setTabValue] = React.useState(0);\n\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false)\n    setTimeout(()=> setTabValue(0), 200) // we put a timeout here so the switching tabs doesn't occur during the close transition.\n  };\n\n\n  function createUserButtonsBasedOnState(jobState, job){\n\n    switch (jobState){\n      case \"disconnected\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={() => runPioreactorJob(props.unit, job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"ready\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                buttonText=\"Running\"\n                disabled={true}\n               />\n              </div>)\n      default:\n        return(<div></div>)\n    }\n   }\n\n  const blankODButton = createUserButtonsBasedOnState(props.odBlankJobState, \"od_blank\")\n  const stirringCalibrationButton = createUserButtonsBasedOnState(props.stirringCalibrationState, \"stirring_calibration\")\n\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\" }} color=\"primary\" disabled={props.disabled} onClick={handleClickOpen}>\n        <TuneIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> Calibrate\n      </Button>\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle>\n          <Typography className={classes.suptitle}>\n            <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {(props.label) ? `${props.label} / ${props.unit}` : `${props.unit}`}\n          </Typography>\n          <Tabs\n            value={tabValue}\n            onChange={handleTabChange}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            >\n            <Tab label=\"Blanks\"/>\n            <Tab label=\"Stirring\"/>\n            <Tab label=\"Dosing\" />\n            <Tab label=\"OD600\"  />\n          </Tabs>\n          <IconButton\n            aria-label=\"close\"\n            onClick={handleClose}\n            sx={{\n              position: 'absolute',\n              right: 8,\n              top: 8,\n              color: (theme) => theme.palette.grey[500],\n            }}\n            size=\"large\">\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <TabPanel value={tabValue} index={0}>\n            <Typography  gutterBottom>\n             Record optical densities of blank (optional)\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              For more accurate growth rate and biomass inferences, the Pioreactor can subtract out the\n              media's un-inoculated optical density <i>per experiment</i>. Read more about <a href=\"https://docs.pioreactor.com/user-guide/od-normal-growth-rate#blanking\">using blanks</a>.\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" style={{margin: \"20px 0px\"}}>\n              Recorded optical densities of blank vial: <code>{props.odBlankReading ? Object.entries(JSON.parse(props.odBlankReading)).map( ([k, v]) => `${k}:${v.toFixed(5)}` ).join(\", \") : \"—\"}</code>\n            </Typography>\n\n            <div style={{display: \"flex\"}}>\n              {blankODButton}\n              <div><Button size=\"small\" className={classes.patientButton} color=\"secondary\" disabled={props.odBlankReading === null} onClick={() => runPioreactorJob(props.unit, \"od_blank\", ['delete']) }> Clear </Button></div>\n            </div>\n            <Divider className={classes.divider} />\n\n          </TabPanel>\n          <TabPanel value={tabValue} index={1}>\n            <Typography  gutterBottom>\n             Stirring calibration (optional)\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              You can improve the responsiveness of stirring RPM changes by running this calibration. This calibration is\n              optional, and stirring RPM changes can still occur without running this calibration. Only needs to be performed once - results are saved to disk.\n            </Typography>\n\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Add a vial, with a stirbar and ~15ml of liquid, to the Pioreactor, then hit Start below. This calibration will take less than five minutes.\n            </Typography>\n\n            {stirringCalibrationButton}\n\n            <Divider className={classes.divider} />\n\n          </TabPanel>\n          <TabPanel value={tabValue} index={2}>\n            <Typography  gutterBottom>\n             Dosing calibration for pumps\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            To use a peristatlic pump with your Pioreactor, you'll need to calibrate it to accuractly dose specific volumes.\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            See instructions <a href=\"https://docs.pioreactor.com/user-guide/hardware-calibrations#pump-calibration\">here</a>.\n            </Typography>\n            <Divider className={classes.divider} />\n\n          </TabPanel>\n\n          <TabPanel value={tabValue} index={3}>\n            <Typography  gutterBottom>\n             OD600 Calibration (optional)\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            By performing the following calibration, you can relate Pioreactor's internal OD readings (measured in volts) to an offline OD600 value. The UI and datasets will be measured in your OD600 values instead of voltages.\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            See instructions <a href=\"https://docs.pioreactor.com/user-guide/calibrate-od600\">here</a>.\n            </Typography>\n            <Divider className={classes.divider} />\n          </TabPanel>\n        </DialogContent>\n      </Dialog>\n  </React.Fragment>\n  );\n}\n\n\n\nfunction SelfTestDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n\n  function displayIcon(key, state){\n    if (props.selfTestTests == null){\n      return <IndeterminateCheckBoxIcon />\n    }\n    else if (props.selfTestTests.publishedSettings[key].value === true){\n      return <CheckIcon className={classes.readyGreen}/>\n    }\n    else if (props.selfTestTests.publishedSettings[key].value === false){\n      return <CloseIcon className={classes.lostRed}/>\n    }\n    else if (state === \"ready\") {\n      return <CircularProgress size={20} />\n    }\n    else {\n      return <IndeterminateCheckBoxIcon />\n    }\n  }\n\n\n  function createUserButtonsBasedOnState(jobState, job){\n\n    switch (jobState){\n      case \"disconnected\":\n       return (<div key={\"disconnected_\" + job}>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={() => runPioreactorJob(props.unit, job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"ready\":\n       return (<div key={\"ready_\" + job}>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                disabled={true}\n                buttonText=\"Running\"\n               />\n              </div>)\n      default:\n        return(<div></div>)\n    }\n  }\n\n  function colorOfIcon(){\n    return props.disabled ? \"disabled\" : \"primary\"\n  }\n\n  function Icon(){\n    if (props.selfTestTests == null){\n      return <IndeterminateCheckBoxOutlinedIcon color={colorOfIcon()} fontSize=\"15\" classes={{root: classes.textIcon}}/>\n    }\n    else {\n      return props.selfTestTests.publishedSettings[\"all_tests_passed\"].value ? <CheckBoxOutlinedIcon color={colorOfIcon()} fontSize=\"15\" classes={{root: classes.textIcon}}/> : <IndeterminateCheckBoxOutlinedIcon color={colorOfIcon()} fontSize=\"15\" classes={{root: classes.textIcon}}/>\n    }\n  }\n\n  const selfTestButton = createUserButtonsBasedOnState(props.selfTestState, \"self_test\")\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\" }} color=\"primary\" disabled={props.disabled} onClick={handleClickOpen}>\n        {Icon()} Self test\n      </Button>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>\n          <Typography className={classes.suptitle} gutterBottom>\n            <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {props.label ? `${props.label} / ${props.unit}` : `${props.unit}`}\n          </Typography>\n           Self test\n          <IconButton\n            aria-label=\"close\"\n            onClick={handleClose}\n            sx={{\n              position: 'absolute',\n              right: 8,\n              top: 8,\n              color: (theme) => theme.palette.grey[500],\n            }}\n            size=\"large\">\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Perform a check of the heating & temperature sensor, LEDs & photodiodes, and stirring.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Add a closed vial with water and stirbar into the Pioreactor.\n          </Typography>\n\n            {selfTestButton}\n            <Divider className={classes.divider} />\n\n            <List component=\"nav\"\n              subheader={\n                <ListSubheader style={{lineHeight: \"20px\"}} component=\"div\" disableSticky={true} disableGutters={true}>\n                  LEDs & photodiodes\n                </ListSubheader>\n              }\n            >\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_pioreactor_HAT_present\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Pioreactor HAT is detected\" />\n              </ListItem>\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_all_positive_correlations_between_pds_and_leds\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Photodiodes are responsive to IR LED\" secondary={\n                    props.selfTestTests ?\n                      JSON.parse(props.selfTestTests.publishedSettings[\"correlations_between_pds_and_leds\"].value).map(led_pd => `${led_pd[0]} ⇝ ${led_pd[1]}`).join(\",  \") :\n                      \"\"\n                    }/>\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_ambient_light_interference\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"No ambient IR light detected\" />\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_REF_is_lower_than_0_dot_256_volts\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Reference photodiode is correct magnitude\" />\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_REF_is_in_correct_position\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Reference photodiode is in correct position\" />\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_PD_is_near_0_volts_for_blank\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Photodiode measures near nil signal for aturbid water\" />\n              </ListItem>\n\n            </List>\n\n            <List component=\"nav\"\n              subheader={\n                <ListSubheader style={{lineHeight: \"20px\"}} component=\"div\" disableSticky={true} disableGutters={true}>\n                  Heating & temperature\n                </ListSubheader>\n              }\n            >\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_detect_heating_pcb\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Heating PCB is detected\" />\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_positive_correlation_between_temperature_and_heating\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Heating is responsive\" />\n              </ListItem>\n            </List>\n\n\n            <List component=\"nav\"\n              subheader={\n                <ListSubheader style={{lineHeight: \"20px\"}} component=\"div\" disableSticky={true} disableGutters={true}>\n                  Stirring\n                </ListSubheader>\n              }\n            >\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_positive_correlation_between_rpm_and_stirring\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Stirring RPM is responsive\" />\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_aux_power_is_not_too_high\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"AUX power supply is appropriate value\" />\n              </ListItem>\n\n\n            </List>\n\n          <Divider className={classes.divider} />\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Learn more about self tests and <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://docs.pioreactor.com/user-guide/running-self-test#explanation-of-each-test\">what to do if a test fails.</a>\n          </Typography>\n        </DialogContent>\n      </Dialog>\n  </React.Fragment>\n  );\n}\n\n\n\n\n\n\nfunction SettingsActionsDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\n  const [tabValue, setTabValue] = React.useState(0);\n  const [rebooting, setRebooting] = React.useState(false);\n  const [openChangeDosingDialog, setOpenChangeDosingDialog] = React.useState(false);\n  const [openChangeLEDDialog, setOpenChangeLEDDialog] = React.useState(false);\n  const [openChangeTemperatureDialog, setOpenChangeTemperatureDialog] = React.useState(false);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n\n  function setPioreactorJobState(job, state) {\n    return function() {\n      setPioreactorJobAttr(`${job}/$state`, state)\n    };\n  }\n\n\n  function rebootRaspberryPi(){\n    return function() {\n      setRebooting(true)\n      fetch(\"/api/reboot/\" + props.unit, {method: \"POST\"})\n    }\n  }\n\n  function stopPioreactorJob(job){\n    return function() {\n      setPioreactorJobAttr(`${job}/$state`, \"disconnected\")\n      //fetch(\"/api/stop/\" + job + \"/\" + props.unit, {method: \"PATCH\"}).then(res => {})\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      props.client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      props.client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n\n  function updateRenameUnit(_, value) {\n      const relabeledTo = value\n      setSnackbarMessage(`Updating to ${relabeledTo}`)\n      setSnackbarOpen(true)\n      fetch('/api/unit_labels/current',{\n          method: \"PUT\",\n          body: JSON.stringify({label: relabeledTo, unit: props.unit}),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          if (res.ok) {\n            props.setLabel(relabeledTo)\n          }\n        })\n    }\n\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTimeout(()=> setTabValue(0), 200) // we put a timeout here so the switching tabs doesn't occur during the close transition.\n  };\n\n  const handleSnackbarClose = (e, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setSnackbarOpen(false)\n  }\n\n  function createUserButtonsBasedOnState(jobState, job){\n    switch (jobState){\n      case \"lost\":\n        return (<div key={\"patient_buttons_lost\" + job}>\n                  <PatientButton\n                    color=\"primary\"\n                    variant=\"contained\"\n                    onClick={() => runPioreactorJob(props.unit, job)}\n                    buttonText=\"Start\"\n                  />\n        </div>)\n      case \"disconnected\":\n       return (<div key={\"patient_buttons_disconnected\" + job}>\n                 <PatientButton\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => runPioreactorJob(props.unit, job)}\n                  buttonText=\"Start\"\n                 />\n                <PatientButton\n                  color=\"secondary\"\n                  disabled={true}\n                  buttonText=\"Stop\"\n                />\n              </div>)\n      case \"init\":\n        return (\n          <div key={\"patient_buttons_init\" + job}>\n            <PatientButton\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={()=>(false)}\n              buttonText=<CircularProgress color=\"inherit\" size={22}/>\n              disabled={true}\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={stopPioreactorJob(job)}\n              buttonText=\"Stop\"\n            />\n          </div>\n        )\n      case \"ready\":\n        return (\n          <div key={\"patient_buttons_ready\" + job}>\n            <PatientButton\n              color=\"secondary\"\n              variant=\"contained\"\n              onClick={setPioreactorJobState(job, \"sleeping\")}\n              buttonText=\"Pause\"\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={stopPioreactorJob(job)}\n              buttonText=\"Stop\"\n            />\n          </div>\n          )\n      case \"sleeping\":\n        return (\n          <div key={\"patient_buttons_sleeping\" + job}>\n            <PatientButton\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={setPioreactorJobState(job, \"ready\")}\n              buttonText=\"Resume\"\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={stopPioreactorJob(job)}\n              buttonText=\"Stop\"\n            />\n          </div>\n          )\n      default:\n        return(<div key={\"patient_buttons_empty\" + job}></div>)\n    }\n   }\n  const LEDMap = props.config['leds']\n  const buttons = Object.fromEntries(Object.entries(props.jobs).map( ([job_key, job], i) => [job_key, createUserButtonsBasedOnState(job.state, job_key)]))\n  const versionInfo = JSON.parse(props.jobs.monitor.publishedSettings.versions.value || \"{}\")\n  const voltageInfo = JSON.parse(props.jobs.monitor.publishedSettings.voltage_on_pwm_rail.value || \"{}\")\n  const ipInfo = props.jobs.monitor.publishedSettings.ipv4.value\n\n  const stateDisplay = {\n    \"init\":          {display: \"Starting\", color: readyGreen},\n    \"ready\":         {display: \"On\", color: readyGreen},\n    \"sleeping\":      {display: \"Paused\", color: disconnectedGrey},\n    \"disconnected\":  {display: \"Off\", color: disconnectedGrey},\n    \"lost\":          {display: \"Lost\", color: lostRed},\n    \"NA\":            {display: \"Not available\", color: disconnectedGrey},\n  }\n\n  const isLargeScreen = useMediaQuery(theme => theme.breakpoints.down('xl'));\n  var dosingControlJob = props.jobs.dosing_control\n  var dosingControlJobRunning = [\"ready\", \"sleeping\", \"init\"].includes(dosingControlJob?.state)\n\n  var ledControlJob = props.jobs.led_control\n  var ledControlJobRunning = [\"ready\", \"sleeping\", \"init\"].includes(ledControlJob?.state)\n\n  var temperatureControlJob = props.jobs.temperature_control\n  var temperatureControlJobRunning = [\"ready\", \"sleeping\", \"init\"].includes(temperatureControlJob?.state)\n\n\n\n  return (\n    <div>\n    <Button style={{textTransform: 'none', float: \"right\" }} disabled={props.disabled} onClick={handleClickOpen} color=\"primary\">\n      <SettingsIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> Manage\n    </Button>\n    <Dialog maxWidth={isLargeScreen ? \"sm\" : \"md\"} fullWidth={true} open={open} onClose={handleClose} PaperProps={{\n      sx: {\n        height: \"calc(100% - 64px)\"\n      }\n    }}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/>\n          <span> {props.label ? `${props.label} / ${props.unit}` : `${props.unit}`} </span>\n        </Typography>\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      <Tabs\n        value={tabValue}\n        onChange={handleTabChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        variant=\"scrollable\"\n        scrollButtons\n        allowScrollButtonsMobile\n        >\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"LEDs\"/>\n        <Tab label=\"System\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={0}>\n          {/* Unit Specific Activites */}\n          {Object.entries(props.jobs)\n            .filter(([job_key, job]) => job.metadata.display)\n            .filter(([job_key, job]) => !['dosing_control', 'led_control', 'temperature_control'].includes(job_key))\n            .map(([job_key, job]) =>\n            <div key={job_key}>\n              <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n                <Typography display=\"block\">\n                  {job.metadata.display_name}\n                </Typography>\n                <Typography display=\"block\" gutterBottom>\n                  <span style={{color: stateDisplay[job.state].color}}>{stateDisplay[job.state].display}</span>\n                </Typography>\n              </div>\n              <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n                {job.metadata.source !== \"app\" ? `Installed by ${job.metadata.source || \"unknown\"}` : \"\"}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: job.metadata.description}}/>\n              </Typography>\n\n              {buttons[job_key]}\n\n              <Divider className={classes.divider} />\n            </div>\n          )}\n\n\n          {/* Unit Specific Automations */}\n          {temperatureControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Temperature automation\n              </Typography>\n              <Typography display=\"block\" gutterBottom>\n                <span style={{color:stateDisplay[temperatureControlJob.state].color}}>{stateDisplay[temperatureControlJob.state].display}</span>\n              </Typography>\n            </div>\n            <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n            </Typography>\n            <div key={temperatureControlJob.metadata.key}>\n              {(temperatureControlJob.state === \"ready\") || (temperatureControlJob.state === \"sleeping\") || (temperatureControlJob.state === \"init\")\n              ?<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                Currently running temperature automation <code className={classes.code}>{temperatureControlJob.publishedSettings.automation_name.value}</code>.\n                Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user-guide/temperature-automations\">temperature automations</a>.\n                </Typography>\n                {buttons[temperatureControlJob.metadata.key]}\n               </React.Fragment>\n              :<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                  <div dangerouslySetInnerHTML={{__html: temperatureControlJob.metadata.description}}/>\n                </Typography>\n\n                <Button\n                  className={classes.patientButton}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => setOpenChangeTemperatureDialog(true)}\n                >\n                  Start\n                </Button>\n                <Button\n                  className={classes.patientButton}\n                  size=\"small\"\n                  color=\"primary\"\n                  disabled={true}\n                >\n                  Stop\n                </Button>\n\n               </React.Fragment>\n              }\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeTemperatureDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n              disabled={!temperatureControlJobRunning}\n            >\n              Change temperature automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              open={openChangeTemperatureDialog}\n              onFinished={() => setOpenChangeTemperatureDialog(false)}\n              unit={props.unit}\n              label={props.label}\n              config={props.config}\n              experiment={props.experiment}\n              isJobRunning={temperatureControlJobRunning}\n              automationType=\"temperature\"\n              no_skip_first_run={true}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n          {dosingControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Dosing automation\n              </Typography>\n              <Typography display=\"block\" gutterBottom>\n                <span style={{color:stateDisplay[dosingControlJob.state].color}}>{stateDisplay[dosingControlJob.state].display}</span>\n              </Typography>\n            </div>\n            <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n            </Typography>\n            <div key={dosingControlJob.metadata.key}>\n              {(dosingControlJob.state === \"ready\") || (dosingControlJob.state === \"sleeping\") || (temperatureControlJob.state === \"init\")\n              ?<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                Currently running dosing automation <code>{dosingControlJob.publishedSettings.automation_name.value}</code>.\n                Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user-guide/dosing-automations\">dosing automations</a>.\n                </Typography>\n                {buttons[dosingControlJob.metadata.key]}\n               </React.Fragment>\n              :<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                  <div dangerouslySetInnerHTML={{__html: dosingControlJob.metadata.description}}/>\n                </Typography>\n\n                <Button\n                  className={classes.patientButton}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => setOpenChangeDosingDialog(true)}\n                >\n                  Start\n                </Button>\n                <Button\n                  className={classes.patientButton}\n                  size=\"small\"\n                  color=\"primary\"\n                  disabled={true}\n                >\n                  Stop\n                </Button>\n               </React.Fragment>\n              }\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeDosingDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n              disabled={!dosingControlJobRunning}\n            >\n              Change dosing automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              automationType=\"dosing\"\n              open={openChangeDosingDialog}\n              onFinished={() => setOpenChangeDosingDialog(false)}\n              unit={props.unit}\n              label={props.label}\n              config={props.config}\n              experiment={props.experiment}\n              isJobRunning={dosingControlJobRunning}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n          {ledControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                LED automation\n              </Typography>\n              <Typography display=\"block\" gutterBottom>\n                <span style={{color:stateDisplay[ledControlJob.state].color}}>{stateDisplay[ledControlJob.state].display}</span>\n              </Typography>\n            </div>\n            <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n            </Typography>\n            <div key={ledControlJob.metadata.key}>\n              {(ledControlJob.state === \"ready\") || (ledControlJob.state === \"sleeping\") || (temperatureControlJob.state === \"init\")\n              ?<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                Currently running LED automation <code>{ledControlJob.publishedSettings.automation_name.value}</code>.\n                Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user-guide/led-automations\">LED automations</a>.\n                </Typography>\n                {buttons[ledControlJob.metadata.key]}\n               </React.Fragment>\n              :<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                  <div dangerouslySetInnerHTML={{__html: ledControlJob.metadata.description}}/>\n                </Typography>\n\n                <Button\n                  className={classes.patientButton}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => setOpenChangeLEDDialog(true)}\n                >\n                  Start\n                </Button>\n                <Button\n                  className={classes.patientButton}\n                  size=\"small\"\n                  color=\"primary\"\n                  disabled={true}\n                >\n                  Stop\n                </Button>\n               </React.Fragment>\n              }\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeLEDDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n              disabled={!ledControlJobRunning}\n            >\n              Change LED automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              automationType=\"led\"\n              open={openChangeLEDDialog}\n              onFinished={() => setOpenChangeLEDDialog(false)}\n              unit={props.unit}\n              config={props.config}\n              label={props.label}\n              experiment={props.experiment}\n              isJobRunning={ledControlJobRunning}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n        </TabPanel>\n\n\n        <TabPanel value={tabValue} index={1}>\n          <Typography  gutterBottom>\n            Assign label to Pioreactor\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Assign a temporary label to this Pioreactor for this experiment. The new label will display in graph legends, and throughout the interface.\n          </Typography>\n          <SettingTextField\n            value={props.label}\n            onUpdate={updateRenameUnit}\n            setSnackbarMessage={setSnackbarMessage}\n            setSnackbarOpen={setSnackbarOpen}\n            id={'relabeller' + props.unit}\n            disabled={false}\n          />\n          <Divider className={classes.divider} />\n\n          {Object.values(props.jobs)\n            .filter(job => job.metadata.display)\n            .map(job => [job.state, job.metadata.key, job.publishedSettings])\n            .map(([state, job_key, settings], index) => (\n              Object.entries(settings)\n                .filter(([setting_key, setting],_) => setting.display)\n                .map(([setting_key, setting],_) =>\n                        <React.Fragment key={setting_key}>\n                          <Typography gutterBottom>\n                            {setting.label}\n                          </Typography>\n\n                          <Typography variant=\"body2\" component=\"p\">\n                            {setting.description}\n                          </Typography>\n\n                          {(setting.type === \"boolean\") && (\n                            <SettingSwitchField\n                              onUpdate={setPioreactorJobAttr}\n                              setSnackbarMessage={setSnackbarMessage}\n                              setSnackbarOpen={setSnackbarOpen}\n                              value={setting.value}\n                              units={setting.unit}\n                              id={`${job_key.replace(\"_control\", \"_automation\")}/${setting_key}`}\n                              disabled={state === \"disconnected\"}\n                            />\n                          )}\n\n                          {(setting.type !== \"boolean\") && (\n                              <SettingTextField\n                                onUpdate={setPioreactorJobAttr}\n                                setSnackbarMessage={setSnackbarMessage}\n                                setSnackbarOpen={setSnackbarOpen}\n                                value={setting.value}\n                                units={setting.unit}\n                                id={`${job_key.replace(\"_control\", \"_automation\")}/${setting_key}`}\n                                disabled={state === \"disconnected\"}\n                              />\n                          )}\n\n                          <Divider className={classes.divider} />\n                        </React.Fragment>\n          )))}\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Cycle Media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Safely cycle media in and out of your Pioreactor for a set duration (seconds) by running the media and waste pump simultaneously.\n          </Typography>\n\n          <ActionCirculatingForm action=\"circulate_media\" unit={props.unit} job={props.jobs.circulate_media} />\n\n          <Divider classes={{root: classes.divider}} />\n\n          <Typography  gutterBottom>\n            Cycle alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Safely cycle alternative media in and out of your Pioreactor for a set duration (seconds) by running the alt-media and waste pump simultaneously.\n          </Typography>\n\n          <ActionCirculatingForm action=\"circulate_alt_media\" unit={props.unit} job={props.jobs.circulate_alt_media} />\n\n          <Divider classes={{root: classes.divider}} />\n\n          <Alert severity=\"warning\" style={{marginBottom: '10px', marginTop: '10px'}}>It's easy to overflow your vial. Make sure you don't add too much media.</Alert>\n\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Run the media pump for a set duration (s), moving a set volume (mL), or continuously add until stopped.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Specify how you’d like to add media:\n          </Typography>\n          <ActionDosingForm action=\"add_media\" unit={props.unit} job={props.jobs.add_media} />\n          <Divider classes={{root: classes.divider}} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Run the waste pump for a set duration (s), moving a set volume (mL), or continuously remove until stopped.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Specify how you’d like to remove waste:\n          </Typography>\n          <ActionDosingForm action=\"remove_waste\" unit={props.unit} job={props.jobs.remove_waste} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Run the alt-media pump for a set duration (s), moving a set volume (mL), or continuously add until stopped.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Specify how you’d like to add alt-media:\n          </Typography>\n          <ActionDosingForm action=\"add_alt_media\" unit={props.unit} job={props.jobs.add_alt_media} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Manual adjustments\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Record adjustments before manually adding or removing from the vial. This is recorded in the database and will ensure accurate metrics.\n          </Typography>\n          <ActionManualDosingForm unit={props.unit}/>\n\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={3}>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['A']) ? (LEDMap['A'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel A\" }\n          </Typography>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['A']) ? \"Channel A\" : \"\"}\n          </Typography>\n          <ActionLEDForm channel=\"A\" unit={props.unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['B']) ? (LEDMap['B'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel B\" }\n          </Typography>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['B']) ? \"Channel B\" : \"\"}\n          </Typography>\n          <ActionLEDForm channel=\"B\" unit={props.unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['C']) ? (LEDMap['C'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel C\" }\n          </Typography>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['C']) ? \"Channel C\" : \"\"}\n          </Typography>\n\n          <ActionLEDForm channel=\"C\" unit={props.unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['D']) ? (LEDMap['D'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel D\" }\n          </Typography>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['D']) ? \"Channel D\" : \"\"}\n          </Typography>\n          <ActionLEDForm channel=\"D\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n        <TabPanel value={tabValue} index={4}>\n\n          <Typography  gutterBottom>\n            Addresses and hostname\n          </Typography>\n\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              Learn about how to <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user-guide/accessing-raspberry-pi\">access the Pioreactor's Raspberry Pi</a>.\n            </Typography>\n\n            <Typography variant=\"body2\" component=\"p\">\n              IPv4: <code className={classes.code}>{ipInfo}</code>\n            </Typography>\n\n            <Typography variant=\"body2\" component=\"p\">\n              Hostname: <code className={classes.code}>{props.unit}.local</code>\n            </Typography>\n\n          <Divider className={classes.divider} />\n\n          <Typography  gutterBottom>\n            Version information\n          </Typography>\n\n            <Typography variant=\"body2\" component=\"p\">\n              HAT version: {versionInfo.hat}\n            </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n              HAT serial number: <code className={classes.code}>{versionInfo.hat_serial}</code>\n            </Typography>\n\n\n          <Divider className={classes.divider} />\n\n          <Typography  gutterBottom>\n            Voltage on PWM rail\n          </Typography>\n\n            <Typography variant=\"body2\" component=\"p\">\n              Voltage: {voltageInfo.voltage}V\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\">\n              Last updated at: {moment.utc(voltageInfo.timestamp || \"\", 'YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]').local().format('MMMM Do, h:mm a') }\n            </Typography>\n\n          <Divider className={classes.divider} />\n\n          <Typography  gutterBottom>\n            Reboot\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Reboot the Raspberry Pi operating system. This will stop all jobs, and the Pioreactor will be inaccessible for a few minutes.\n          </Typography>\n\n          <LoadingButton\n            loadingIndicator=\"Rebooting\"\n            loading={rebooting}\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"small\"\n            style={{marginTop: \"15px\"}}\n            onClick={rebootRaspberryPi()}\n          >\n            Reboot RPi\n          </LoadingButton>\n\n          <Divider className={classes.divider} />\n\n\n\n        </TabPanel>\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      resumeHideDuration={2000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </div>\n  );\n}\n\n\nfunction SettingsActionsDialogAll({config, experiment}) {\n\n  const classes = useStyles();\n  const unit = \"$broadcast\"\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\n  const [tabValue, setTabValue] = React.useState(0);\n  const [jobs, setJobs] = React.useState({});\n  const [openChangeTemperatureDialog, setOpenChangeTemperatureDialog] = React.useState(false);\n  const [openChangeDosingDialog, setOpenChangeDosingDialog] = React.useState(false);\n  const [openChangeLEDDialog, setOpenChangeLEDDialog] = React.useState(false);\n\n  useEffect(() => {\n    function fetchContribBackgroundJobs() {\n      fetch(\"/api/contrib/jobs\")\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((listOfJobs) => {\n          var jobs_ = {}\n          for (const job of listOfJobs){\n            var metaData_ = {publishedSettings: {}, metadata: {display_name: job.display_name, display: job.display, description: job.description, key: job.job_name, source:job.source}}\n            for(var i = 0; i < job[\"published_settings\"].length; ++i){\n              var field = job[\"published_settings\"][i]\n              metaData_.publishedSettings[field.key] = {value: field.default || null, label: field.label, type: field.type, unit: field.unit || null, display: field.display, description: field.description}\n            }\n            jobs_[job.job_name] = metaData_\n          }\n          setJobs((prev) => ({...prev, ...jobs_}))\n        })\n        .catch((error) => {})\n    }\n    fetchContribBackgroundJobs();\n  }, [])\n\n\n  useEffect(() => {\n    if (!config['cluster.topology']){\n      return\n    }\n\n    var client\n    if (config.remote && config.remote.ws_url) {\n      client = new Client(\n        `ws://${config.remote.ws_url}/`,\n        \"webui_SettingsActionsDialogAll\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      client = new Client(\n        `${config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_SettingsActionsDialogAll\" + Math.floor(Math.random()*10000)\n      );\n    }\n    client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, reconnect: true});\n    setClient(client)\n  },[config])\n\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        unit,\n        experiment,\n        job.metadata.key,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 750)\n      }\n      finally {\n        const verbs = {\n          \"sleeping\":  \"Pausing\",\n          \"disconnected\":  \"Stopping\",\n          \"ready\":  \"Resuming\",\n        }\n        setSnackbarMessage(`${verbs[state]} ${job.metadata.display_name.toLowerCase()} on all active Pioreactors`)\n        setSnackbarOpen(true)\n      }\n    };\n  }\n\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      unit,\n      experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n      setSnackbarOpen(true)\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTimeout(()=> setTabValue(0), 200) // we put a timeout here so the switching tabs doesn't occur during the close transition.\n\n  };\n\n  const handleSnackbarClose = (e, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(job){\n\n    const handleRunPioreactorJobResponse = (response) => {\n      if (response.ok) {\n        setSnackbarMessage(`Starting ${job.metadata.display_name.toLowerCase()} on all active Pioreactors`)\n        setSnackbarOpen(true)\n        return;\n      }\n    };\n\n    if (job.metadata.key === \"temperature_control\"){\n      var startAction = () => setOpenChangeTemperatureDialog(true)\n    }\n    else if (job.metadata.key === \"dosing_control\"){\n      startAction = () => setOpenChangeDosingDialog(true)\n    }\n    else if (job.metadata.key === \"led_control\"){\n      startAction = () => setOpenChangeLEDDialog(true)\n    }\n    else {\n      startAction = () => runPioreactorJob(unit, job.metadata.key, [], {}, handleRunPioreactorJobResponse)\n    }\n\n\n    return (<div key={job.metadata.key}>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={startAction}\n        >\n          Start\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"sleeping\")}\n        >\n          Pause\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"ready\")}\n        >\n          Resume\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"secondary\"\n          onClick={setPioreactorJobState(job, \"disconnected\")}\n        >\n          Stop\n        </Button>\n      </div>\n  )}\n\n\n  const buttons = Object.fromEntries(Object.entries(jobs).map( ([job_key, job], i) => [job_key, createUserButtonsBasedOnState(job)]))\n  const isLargeScreen = useMediaQuery(theme => theme.breakpoints.down('xl'));\n  var dosingControlJob = jobs.dosing_control\n  var ledControlJob = jobs.led_control\n  var temperatureControlJob = jobs.temperature_control\n\n  return (\n    <React.Fragment>\n    <Button style={{textTransform: 'none', float: \"right\" }} onClick={handleClickOpen} color=\"primary\">\n      <SettingsIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Manage all Pioreactors\n    </Button>\n    <Dialog  maxWidth={isLargeScreen ? \"sm\" : \"md\"} fullWidth={true}  open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\"  PaperProps={{\n      sx: {\n        height: \"calc(100% - 64px)\"\n      }\n    }}>\n      <DialogTitle style={{backgroundImage: \"linear-gradient(to bottom left, rgba(83, 49, 202, 0.4), rgba(0,0,0,0))\"}}>\n        <Typography className={classes.suptitle}>\n          <b>All active Pioreactors</b>\n        </Typography>\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[600],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      <Tabs\n        value={tabValue}\n        onChange={handleTabChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        variant=\"scrollable\"\n        scrollButtons\n        allowScrollButtonsMobile\n      >\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"LEDs\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n\n        <TabPanel value={tabValue} index={0}>\n          {Object.entries(jobs)\n            .filter(([job_key, job]) => job.metadata.display)\n            .filter(([job_key, job]) => !['dosing_control', 'led_control', 'temperature_control'].includes(job_key))\n            .map(([job_key, job]) =>\n            <div key={job_key}>\n              <Typography gutterBottom>\n                {job.metadata.display_name}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: job.metadata.description}}/>\n              </Typography>\n\n              {buttons[job_key]}\n\n              <Divider classes={{root: classes.divider}} />\n            </div>\n          )}\n\n\n          {temperatureControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Temperature automation\n              </Typography>\n            </div>\n            <div>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: temperatureControlJob.metadata.description}}/>\n              </Typography>\n\n              {buttons['temperature_control']}\n            </div>\n\n            <ChangeAutomationsDialog\n              open={openChangeTemperatureDialog}\n              onFinished={() => setOpenChangeTemperatureDialog(false)}\n              unit={unit}\n              config={config}\n              experiment={experiment}\n              isJobRunning={false}\n              automationType=\"temperature\"\n              no_skip_first_run={true}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n\n          {dosingControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Dosing automation\n              </Typography>\n            </div>\n            <div>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: dosingControlJob.metadata.description}}/>\n              </Typography>\n\n              {buttons['dosing_control']}\n            </div>\n\n            <ChangeAutomationsDialog\n              automationType=\"dosing\"\n              open={openChangeDosingDialog}\n              onFinished={() => setOpenChangeDosingDialog(false)}\n              unit={unit}\n              config={config}\n              experiment={experiment}\n              isJobRunning={false}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n          {ledControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                LED automation\n              </Typography>\n            </div>\n            <div>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: ledControlJob.metadata.description}}/>\n              </Typography>\n\n              {buttons['led_control']}\n            </div>\n\n            <ChangeAutomationsDialog\n              automationType=\"led\"\n              open={openChangeLEDDialog}\n              onFinished={() => setOpenChangeLEDDialog(false)}\n              unit={unit}\n              config={config}\n              experiment={experiment}\n              isJobRunning={false}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={1}>\n          {Object.values(jobs)\n            .filter(job => job.metadata.display)\n            .map(job => [job.state, job.metadata.key, job.publishedSettings])\n            .map(([state, job_key, settings], index) => (\n              Object.entries(settings)\n                .filter(([setting_key, setting],_) => setting.display)\n                .map(([setting_key, setting],_) =>\n              <React.Fragment key={job_key + setting_key}>\n                <Typography  gutterBottom>\n                  {setting.label}\n                </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                  {setting.description}\n                </Typography>\n\n                  {(setting.type === \"boolean\") && (\n                    <SettingSwitchField\n                      onUpdate={setPioreactorJobAttr}\n                      setSnackbarMessage={setSnackbarMessage}\n                      setSnackbarOpen={setSnackbarOpen}\n                      value={setting.value}\n                      units={setting.unit}\n                      id={`${job_key.replace(\"_control\", \"_automation\")}/${setting_key}`}\n                      disabled={false}\n                    />\n                  )}\n\n                  {(setting.type !== \"boolean\") && (\n                  <SettingTextField\n                    onUpdate={setPioreactorJobAttr}\n                    setSnackbarMessage={setSnackbarMessage}\n                    setSnackbarOpen={setSnackbarOpen}\n                    value={setting.value}\n                    units={setting.unit}\n                    id={`${job_key.replace(\"_control\", \"_automation\")}/${setting_key}`}\n                    disabled={false}\n                  />\n                  )}\n                <Divider classes={{root: classes.divider}} />\n              </React.Fragment>\n\n          )))}\n\n        </TabPanel>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Cycle Media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Safely cycle media in and out of your Pioreactor for a set duration (seconds).\n          </Typography>\n\n          <ActionCirculatingForm action=\"circulate_media\" unit={unit} />\n\n          <Divider classes={{root: classes.divider}} />\n\n          <Typography  gutterBottom>\n            Cycle alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Safely cycle alternative media in and out of your Pioreactor for a set duration (seconds).\n          </Typography>\n\n          <ActionCirculatingForm action=\"circulate_alt_media\" unit={unit} />\n\n          <Divider classes={{root: classes.divider}} />\n\n          <Alert severity=\"warning\" style={{marginBottom: '10px', marginTop: '10px'}}>It's easy to overflow your vial. Make sure you don't add too much media.</Alert>\n\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Run the media pumps for a set duration (seconds), moving a set volume (mL), or continuously add until stopped.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Specify how you’d like to add media:\n          </Typography>\n          <ActionDosingForm action=\"add_media\" unit={unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Run the waste pumps for a set duration (seconds), moving a set volume (mL), or continuously add until stopped.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Specify how you’d like to remove media:\n          </Typography>\n          <ActionDosingForm action=\"remove_waste\" unit={unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Run the alternative media pumps for a set duration (seconds), moving a set\n            volume (mL), or continuously add until stopped.\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Specify how you’d like to add alt-media:\n          </Typography>\n          <ActionDosingForm action=\"add_alt_media\" unit={unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Manual adjustments\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Record adjustments before manually adding or removing from the vial. This is recorded in the database and will ensure accurate metrics.\n          </Typography>\n          <ActionManualDosingForm unit={unit}/>\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={3}>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel A\n          </Typography>\n          <ActionLEDForm channel=\"A\" unit={unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel B\n          </Typography>\n          <ActionLEDForm channel=\"B\" unit={unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel C\n          </Typography>\n          <ActionLEDForm channel=\"C\" unit={unit} />\n\n          <Divider className={classes.divider} />\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel D\n          </Typography>\n          <ActionLEDForm channel=\"D\" unit={unit} />\n\n          <Divider className={classes.divider} />\n        </TabPanel>\n\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      resumeHideDuration={2000}\n      key={\"snackbar\" + unit + \"settings\"}\n    />\n    </React.Fragment>\n  );\n}\n\n\nfunction SettingTextField(props){\n    const classes = useStyles();\n\n    const [value, setValue] = React.useState(props.value || \"\")\n    const [activeSubmit, setActiveSumbit] = React.useState(false)\n\n    useEffect(() => {\n      if (props.value !== value) {\n        setValue(props.value || \"\");\n      }\n    }, [props.value]);\n\n\n    const onChange = (e) => {\n      setActiveSumbit(true)\n      setValue(e.target.value)\n    }\n\n    const onKeyPress = (e) => {\n        if ((e.key === \"Enter\") && (e.target.value)) {\n          onSubmit()\n      }\n    }\n\n    const onSubmit = () => {\n        props.onUpdate(props.id, value);\n        if (value !== \"\") {\n          props.setSnackbarMessage(`Updating to ${value}${(!props.units) ? \"\" : (\" \"+props.units)}.`)\n        } else {\n          props.setSnackbarMessage(\"Updating.\")\n        }\n        props.setSnackbarOpen(true)\n        setActiveSumbit(false)\n    }\n\n    return (\n     <div style={{display: \"flex\"}}>\n        <TextField\n          size=\"small\"\n          autoComplete=\"off\"\n          disabled={props.disabled}\n          id={props.id}\n          value={value}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">{props.units}</InputAdornment>,\n            autoComplete: 'new-password',\n          }}\n          variant=\"outlined\"\n          onChange={onChange}\n          onKeyPress={onKeyPress}\n          className={classes.textFieldCompact}\n        />\n        <Button\n          size=\"small\"\n          color=\"primary\"\n          disabled={!activeSubmit}\n          onClick={onSubmit}\n          style={{marginTop: \"15px\", marginLeft: \"7px\", display: (props.disabled ? \"None\" : \"\") }}\n        >\n          Update\n        </Button>\n     </div>\n    )\n}\n\n\n\nfunction SettingSwitchField(props){\n    const [value, setValue] = React.useState(PythonBoolToJS(props.value) || false)\n\n    useEffect(() => {\n      if (props.value !== value) {\n        setValue(PythonBoolToJS(props.value) || false);\n      }\n    }, [props.value]);\n\n    const onChange = (e) => {\n      setValue(e.target.checked)\n      props.onUpdate(props.id,  e.target.checked ? 1 : 0);\n      const v = e.target.checked ? \"on\" : \"off\"\n      props.setSnackbarMessage(`Updating to ${v}.`)\n      props.setSnackbarOpen(true)\n    }\n\n    return (\n      <Switch\n        checked={value}\n        disabled={props.disabled}\n        onChange={onChange}\n        id={props.id}\n      />\n    )\n}\n\n\n\nfunction ActiveUnits(props){\n  const [relabelMap, setRelabelMap] = React.useState({})\n\n  React.useEffect(() => {\n    getRelabelMap(setRelabelMap)\n  }, [])\n\n  const cards = props.units.map(unit =>\n      <PioreactorCard isUnitActive={true} key={unit} unit={unit} config={props.config} experiment={props.experiment} label={relabelMap[unit]}/>\n  )\n  var emptyState = (\n    <div style={{textAlign: \"center\", marginBottom: '50px', marginTop: \"50px\"}}>\n      <Typography component='div' variant='body2'>\n        <Box fontWeight=\"fontWeightRegular\">\n          No active Pioreactors. Do you need to update `cluster.inventory` section in the <a href=\"/config\">configuration</a>?\n        </Box>\n        <Box fontWeight=\"fontWeightRegular\">\n          Or, <a href=\"https://docs.pioreactor.com/user-guide/create-cluster\">read our documentation</a> about managing inventory.\n        </Box>\n      </Typography>\n    </div>\n  )\n\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"10px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Active Pioreactors\n        </Box>\n      </Typography>\n      <div >\n\n      </div>\n    </div>\n\n    {(props.units.length === 0) && (props.experiment) ? emptyState : cards }\n\n  </React.Fragment>\n)}\n\n\nfunction FlashLEDButton(props){\n  const classes = useStyles();\n\n  const [flashing, setFlashing] = useState(false)\n\n\n  const onClick = () => {\n    setFlashing(true)\n    const sendMessage = () => {\n      var message = new Message(\"1\");\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        \"$experiment\",\n        \"monitor\",\n        \"flicker_led_response_okay\",\n      ].join(\"/\");\n      message.qos = 0;\n      try{\n        props.client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 1000)\n      }\n    }\n\n    sendMessage()\n    setTimeout(() => {setFlashing(false)}, 3600 ) // .9 * 4\n  }\n\n  return (\n    <Button style={{textTransform: 'none', float: \"right\"}} className={clsx({blinkled: flashing})} disabled={props.disabled} onClick={onClick} color=\"primary\">\n      <FlareIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> <span > Identify </span>\n    </Button>\n)}\n\n\n\nfunction PioreactorCard(props){\n  const classes = useStyles();\n  const unit = props.unit\n  const isUnitActive = props.isUnitActive\n  const experiment = props.experiment\n  const config = props.config\n  const [jobFetchComplete, setJobFetchComplete] = useState(false)\n  const [label, setLabel] = useState(\"\")\n  const [client, setClient] = useState(null)\n  const [jobs, setJobs] = useState({\n    monitor: {\n      state : \"disconnected\",\n      metadata: {display: false},\n      publishedSettings: {\n        versions: {\n            value: null, label: null, type: \"json\", unit: null, display: false, description: null\n        },\n        voltage_on_pwm_rail: {\n            value: null, label: null, type: \"json\", unit: null, display: false, description: null\n        },\n        ipv4: {\n            value: null, label: null, type: \"string\", unit: null, display: false, description: null\n        },\n      },\n    },\n  })\n\n  useEffect(() => {\n    setLabel(props.label)\n  }, [props.label])\n\n\n  useEffect(() => {\n    function fetchContribBackgroundJobs() {\n      fetch(\"/api/contrib/jobs\")\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((listOfJobs) => {\n          var jobs_ = {}\n          for (const job of listOfJobs){\n            var metaData_ = {state: \"disconnected\", publishedSettings: {}, metadata: {display_name: job.display_name, subtext: job.subtext, display: job.display, description: job.description, key: job.job_name, source: job.source, is_testing: job.is_testing}}\n            for(var i = 0; i < job[\"published_settings\"].length; ++i){\n              var field = job[\"published_settings\"][i]\n              metaData_.publishedSettings[field.key] = {value: field.default || null, label: field.label, type: field.type, unit: field.unit || null, display: field.display, description: field.description}\n            }\n            jobs_[job.job_name] = metaData_\n          }\n          setJobs((prev) => ({...prev, ...jobs_}))\n          setJobFetchComplete(true)\n        })\n        .catch((error) => {})\n    }\n    fetchContribBackgroundJobs();\n  }, [])\n\n  const parseToType = (payloadString, typeOfSetting) => {\n    if (typeOfSetting === \"numeric\"){\n      return [null, \"\"].includes(payloadString) ? payloadString : parseFloat(payloadString)\n    }\n    else if (typeOfSetting === \"boolean\"){\n      if ([null, \"\"].includes(payloadString)){\n        return null\n      }\n      return ([\"1\", \"true\", \"True\", 1].includes(payloadString))\n    }\n    return payloadString\n  }\n\n  useEffect(() => {\n    const onConnect = () => {\n      client.subscribe([\"pioreactor\", unit, \"$experiment\", \"monitor\", \"$state\"].join(\"/\"));\n      for (const job of Object.keys(jobs)) {\n\n        // for some jobs (self_test), we use a different experiment name to not clutter datasets,\n        const experimentName = jobs[job].metadata.is_testing ? \"_testing_\" + experiment : experiment\n\n        client.subscribe([\"pioreactor\", unit, experimentName, job, \"$state\"].join(\"/\"));\n        for (const setting of Object.keys(jobs[job].publishedSettings)){\n            var topic = [\n              \"pioreactor\",\n              unit,\n              (job === \"monitor\" ? \"$experiment\" : experimentName),\n              (setting === \"automation_name\") ? job : job.replace(\"_control\", \"_automation\"), // this is for, ex, automation_name\n              setting\n            ].join(\"/\")\n            client.subscribe(topic);\n        }\n      }\n    }\n\n    const onMessageArrived = (message) => {\n      var [job, setting] = message.topic.split('/').slice(-2)\n      if (setting === \"$state\"){\n        var payload = message.payloadString\n        setJobs((prev) => ({...prev, [job]: {...prev[job], state: payload}}))\n      } else if (job.endsWith(\"_automation\")) {\n        // needed because settings are attached to _automations, not _control\n        job = job.replace(\"_automation\", \"_control\")\n        var payload = parseToType(message.payloadString, jobs[job].publishedSettings[setting].type)\n        setJobs((prev) => ({...prev, [job]: {...prev[job], publishedSettings:\n            {...prev[job].publishedSettings,\n              [setting]:\n                {...prev[job].publishedSettings[setting], value: payload }}}}))\n      } else {\n        var payload = parseToType(message.payloadString, jobs[job].publishedSettings[setting].type)\n        setJobs(prev => {\n          const updatedJob = { ...prev[job] };\n          const updatedSetting = { ...updatedJob.publishedSettings[setting], value: payload };\n\n          updatedJob.publishedSettings = { ...updatedJob.publishedSettings, [setting]: updatedSetting };\n\n          return { ...prev, [job]: updatedJob };\n        });\n      }\n    }\n\n    if (!props.config['cluster.topology']){\n      return\n    }\n\n    if (!isUnitActive){\n      return\n    }\n\n    if (!jobFetchComplete){\n      return\n    }\n\n    if (!experiment){\n      return\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_PioreactorCard\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      client = new Client(\n        `${props.config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_PioreactorCard\" + Math.floor(Math.random()*10000)\n      );\n    }\n    client.onMessageArrived = onMessageArrived\n    client.connect({userName: 'pioreactor', password: 'raspberry', keepAliveInterval: 60 * 15, onSuccess: onConnect, reconnect: true});\n    setClient(client)\n  },[config, experiment, jobFetchComplete, isUnitActive])\n\n  const getInicatorLabel = (state, isActive) => {\n    if ((state === \"disconnected\") && isActive) {\n      return \"Offline\"\n    }\n    else if ((state === \"disconnected\") && !isActive){\n      return \"Offline, change inventory status in config.ini\"\n    }\n    else if (state === \"lost\"){\n      return \"Lost, something went wrong. Try manually power-cycling the unit.\"\n    }\n    else {\n      return \"Online and ready\"\n    }\n  }\n\n  const getIndicatorDotColor = (state) => {\n    if (state === \"disconnected\") {\n      return disconnectedGrey\n    }\n    else if (state === \"lost\"){\n      return lostRed\n    }\n    else {\n      return readyGreen\n    }\n  }\n\n  const indicatorDotColor = getIndicatorDotColor(jobs.monitor.state)\n  const indicatorDotShadow = 0\n  const indicatorLabel = getInicatorLabel(jobs.monitor.state, isUnitActive)\n\n  return (\n    <Card className={classes.pioreactorCard} id={unit}>\n      <CardContent className={classes.cardContent}>\n        <div className={\"fixme\"}>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(label) ? unit : \"\"}\n          </Typography>\n          <div className={classes.cardHeaderSettings}>\n            <div style={{display: \"flex\", justifyContent: \"left\"}}>\n              <Typography className={clsx(classes.unitTitle, {[classes.disabledText]: !isUnitActive})} gutterBottom>\n                <PioreactorIcon color={isUnitActive ? \"inherit\" : \"disabled\"} style={{verticalAlign: \"middle\", marginRight: \"3px\"}} sx={{ display: {xs: 'none', sm: 'none', md: 'inline' } }}/>\n                {(label ) ? label : unit }\n              </Typography>\n              <Tooltip title={indicatorLabel} placement=\"right\">\n                <div>\n                  <div aria-label={indicatorLabel} className=\"indicator-dot\" style={{boxShadow: `0 0 ${indicatorDotShadow}px ${indicatorDotColor}, inset 0 0 12px  ${indicatorDotColor}`}}/>\n                </div>\n              </Tooltip>\n            </div>\n            <div className={classes.cardHeaderButtons}>\n              <div>\n                <SelfTestDialog\n                  client={client}\n                  disabled={!isUnitActive}\n                  unit={unit}\n                  label={label}\n                  selfTestState={jobs['self_test'] ? jobs['self_test'].state : null}\n                  selfTestTests={jobs['self_test'] ? jobs['self_test'] : null}\n                />\n              </div>\n              <div>\n                <FlashLEDButton client={client} disabled={!isUnitActive} config={props.config} unit={unit}/>\n              </div>\n              <div>\n                <CalibrateDialog\n                  client={client}\n                  odBlankReading={jobs['od_blank'] ? jobs['od_blank'].publishedSettings.means.value : null}\n                  odBlankJobState={jobs['od_blank'] ? jobs['od_blank'].state : null}\n                  stirringCalibrationState={jobs['stirring_calibration'] ? jobs['stirring_calibration'].state : null}\n                  experiment={experiment}\n                  unit={unit}\n                  label={label}\n                  disabled={!isUnitActive}\n                />\n              </div>\n              <SettingsActionsDialog\n                config={props.config}\n                client={client}\n                unit={unit}\n                label={label}\n                disabled={!isUnitActive}\n                experiment={experiment}\n                jobs={jobs}\n                setLabel={setLabel}\n              />\n            </div>\n          </div>\n        </div>\n\n\n      <div style={{\n          display: \"flex\",\n          margin: \"15px 20px 20px 0px\",\n          flexDirection: \"row\",\n        }}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Activities:\n            </Box>\n          </Typography>\n        </div>\n        <div\n         className={classes.rowOfUnitSettingDisplay}\n        >\n          {Object.values(jobs)\n              .filter(job => job.metadata.display)\n              .map(job => (\n            <div className={classes.textbox} key={job.metadata.key}>\n              <Typography variant=\"body2\" style={{fontSize: \"0.84rem\"}} className={clsx({[classes.disabledText]: !isUnitActive})}>\n                {job.metadata.display_name}\n              </Typography>\n              <UnitSettingDisplay\n                value={job.state}\n                isUnitActive={isUnitActive}\n                default=\"disconnected\"\n                subtext={job.metadata.subtext ? job.publishedSettings[job.metadata.subtext].value : null}\n                isStateSetting\n              />\n            </div>\n         ))}\n\n        </div>\n      </div>\n\n      <Divider/>\n\n      <div style={{\n          display: \"flex\",\n          margin: \"15px 20px 20px 0px\",\n          flexDirection: \"row\",\n        }}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Settings:\n            </Box>\n          </Typography>\n        </div>\n        <div className={classes.rowOfUnitSettingDisplay}>\n          {Object.values(jobs)\n            //.filter(job => (job.state !== \"disconnected\") || (job.metadata.key === \"leds\"))\n            .map(job => [job.state, job.metadata.key, job.publishedSettings])\n            .map(([state, job_key, settings], index) => (\n              Object.entries(settings)\n                .filter(([setting_key, setting], _) => setting.display)\n                .map(([setting_key, setting], _) =>\n                  <div className={classes.textbox} key={job_key + setting_key}>\n                    <Typography variant=\"body2\" style={{fontSize: \"0.84rem\"}} className={clsx({[classes.disabledText]: !isUnitActive})}>\n                      {setting.label}\n                    </Typography>\n                    <UnitSettingDisplay\n                      value={setting.value}\n                      isUnitActive={isUnitActive}\n                      measurementUnit={setting.unit}\n                      precision={2}\n                      default=\"—\"\n                      isLEDIntensity={setting.label === \"LED intensity\"}\n                      isPWMDc={setting.label === \"PWM intensity\"}\n                      config={props.config}\n                    />\n                  </div>\n            )))}\n        </div>\n      </div>\n\n\n      </CardContent>\n    </Card>\n)}\n\n\nfunction InactiveUnits(props){\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"10px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Inactive Pioreactors\n        </Box>\n      </Typography>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={false} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n    </React.Fragment>\n)}\n\nfunction Pioreactors({title}) {\n  const [experimentMetadata, setExperimentMetadata] = React.useState({})\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n    document.title = title;\n\n    function getLatestExperiment() {\n        fetch(\"/api/experiments/latest\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperimentMetadata(data)\n        });\n      }\n\n    getConfig(setConfig)\n    getLatestExperiment()\n  }, [title])\n\n  const entries = (a) => Object.entries(a)\n  const activeUnits = config['cluster.inventory'] ? entries(config['cluster.inventory']).filter((v) => v[1] === \"1\").map((v) => v[0]) : []\n  const inactiveUnits = config['cluster.inventory'] ? entries(config['cluster.inventory']).filter((v) => v[1] === \"0\").map((v) => v[0]) : []\n\n  return (\n    <Grid container spacing={2} >\n      <Grid item md={12} xs={12}>\n        <PioreactorHeader config={config} experiment={experimentMetadata.experiment}/>\n        <ActiveUnits experiment={experimentMetadata.experiment} config={config} units={activeUnits} />\n        { (inactiveUnits.length > 0) &&\n        <InactiveUnits experiment={experimentMetadata.experiment} config={config} units={inactiveUnits}/>\n        }\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default Pioreactors;\n\n","import React from \"react\";\nimport Grid from '@mui/material/Grid';\nimport FlareIcon from '@mui/icons-material/Flare';\nimport { Client, Message } from \"paho-mqtt\";\nimport clsx from 'clsx';\nimport {useState, useEffect} from \"react\";\nimport { makeStyles } from '@mui/styles';\nimport Button from \"@mui/material/Button\";\nimport TextField from '@mui/material/TextField';\nimport Divider from '@mui/material/Divider';\nimport PioreactorIcon from \"./PioreactorIcon\"\nimport EditIcon from '@mui/icons-material/Edit';\nimport {getRelabelMap} from \"../utilities\"\nimport CheckIcon from '@mui/icons-material/Check';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    width: \"100%\"\n\n  },\n}));\n\nfunction FlashLEDButton(props){\n  const classes = useStyles();\n\n  const [flashing, setFlashing] = useState(false)\n\n\n  const onClick = () => {\n    setFlashing(true)\n    const sendMessage = () => {\n      var message = new Message(\"1\");\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        \"$experiment\",\n        \"monitor\",\n        \"flicker_led_response_okay\",\n      ].join(\"/\");\n      message.qos = 0;\n      try{\n        props.client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 1000)\n      }\n    }\n\n    sendMessage()\n    setTimeout(() => {setFlashing(false)}, 3600 ) // .9 * 4\n  }\n\n  return (\n    <Button style={{textTransform: 'none', float: \"right\"}} className={clsx({blinkled: flashing})} disabled={props.disabled} onClick={onClick} color=\"primary\">\n      <FlareIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> <span > Identify </span>\n    </Button>\n)}\n\nfunction AssignLabels(props){\n  const classes = useStyles();\n  const [labels, setLabels] = useState({})\n  const [relabelMap, setRelabelMap] = useState({})\n  const [client, setClient] = useState(null)\n  const [confirmed, setConfirmed] = useState(false)\n  const activeUnits = props.config['cluster.inventory'] ? Object.entries(props.config['cluster.inventory']).filter((v) => v[1] === \"1\").map((v) => v[0]) : []\n\n\n  React.useEffect(() => {\n    getRelabelMap(setRelabelMap)\n  }, [])\n\n\n  useEffect(() => {\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_publishExpNameToMQTT\" + Math.floor(Math.random()*10000)\n      )}\n    else {\n      client = new Client(\n        `${props.config['cluster.topology']['leader_address']}`, 9001,\n        \"webui_publishExpNameToMQTT\" + Math.floor(Math.random()*10000)\n      );\n    }\n    client.connect();\n    setClient(client)\n  },[props.config])\n\n\n  const onSubmit = () => {\n    Object.entries(labels).map(unit_label => (\n      fetch('/api/unit_labels/current',{\n            method: \"PUT\",\n            body: JSON.stringify({label: unit_label[1], unit: unit_label[0]}),\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            }\n        })\n    ))\n    setConfirmed(true)\n  }\n\n  const onLabelChange = (unit) => (e) => setLabels({...labels, [unit]: e.target.value})\n  const count = Object.values(labels).reduce((accumulator, value) => accumulator + (value !== \"\"), 0)\n\n  return (\n    <div className={classes.root}>\n\n      <Grid container spacing={1}>\n\n        <Grid item xs={12}>\n          <p> Assign labels to Pioreactors in your cluster. These labels are temporary for this experiment, and will show up in charts, tables, and elsewhere in this interface.  </p>\n\n          <p>Labels can be changed later, too.</p>\n          <Divider style={{marginBottom: \"20px\"}}/>\n        </Grid>\n\n\n          {activeUnits.map((unit) => (\n              <React.Fragment key={unit}>\n              <Grid item lg={2} md={1}  xs={0}/>\n              <Grid item lg={8} md={10}  xs={12}>\n                <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent:\"space-between\"}}>\n                  <div style={{width: \"140px\"}}>\n                    <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.0em\"}}/>\n                    <span style={{lineHeight: \"40px\"}}>{unit}</span>\n                  </div>\n                  <div>\n                    <TextField size=\"small\" defaultValue={relabelMap[unit]} placeholder=\"(Optional)\" onChange={onLabelChange(unit)} style={{width: \"140px\", marginRight: \"10px\"}}/>\n                  </div>\n                  <div>\n                    <FlashLEDButton client={client} disable={false} config={props.config} unit={unit}/>\n                  </div>\n                </div>\n              </Grid>\n              <Grid item lg={2} md={1} xs={0}/>\n              </React.Fragment>\n            )\n            )}\n          <Grid item xs={12} lg={4}/>\n          <Grid item xs={12} lg={8}>\n            <div style={{display: \"flex\", justifyContent: \"flex-end\"}}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={onSubmit}\n                endIcon={confirmed ? <CheckIcon /> : <EditIcon /> }\n                disabled={(count === 0) || confirmed}\n              >\n                   {confirmed ? \"Assigned\" : (count > 0 ? `Assign ${count}` : \"Assign\")}\n               </Button>\n            </div>\n          </Grid>\n      </Grid>\n\n    </div>\n  );}\n\n\nexport default AssignLabels;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport FormGroup from '@mui/material/FormGroup';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Button from \"@mui/material/Button\";\nimport TextField from '@mui/material/TextField';\nimport Autocomplete, { createFilterOptions } from '@mui/material/Autocomplete';\nimport SaveIcon from '@mui/icons-material/Save';\n\n//import CleaningScript from \"./components/CleaningScript\"\nimport AssignLabels from \"./components/AssignLabels\"\n//import RunFromExperimentProfile from \"./components/RunFromExperimentProfile\"\n//import StartSensors from \"./components/StartSensors\"\n//import StartCalculations from \"./components/StartCalculations\"\nimport {getConfig} from \"./utilities\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  skipButton: {\n    marginRight: theme.spacing(1),\n    float: \"right\",\n  },\n  instructions: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    width: \"60%\"\n  },\n  textField:{\n    marginTop: theme.spacing(0),\n    marginBottom: theme.spacing(2),\n    width: \"100%\"\n\n  },\n  thinTextField:{\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"100%\"\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n}));\n\n\nconst filter = createFilterOptions();\n\nfunction FreeSoloCreateOption(props) {\n  const classes = useStyles();\n  const [value, setValue] = React.useState({key: props.value});\n  const options = props.options\n  const updateParentCallback = props.updateParentCallback\n\n  React.useEffect( () => {\n    setValue({key: props.value});\n  }, [props.value]);\n\n  return (\n    <Autocomplete\n      value={value}\n      className={classes.textField}\n      onChange={(event, newValue) => {\n        if (typeof newValue === 'string') {\n          setValue({\n            key: newValue,\n          });\n          updateParentCallback(newValue)\n\n        } else if (newValue && newValue.inputValue) {\n          // Create a new value from the user input\n          setValue({\n            key: newValue.inputValue,\n          });\n          updateParentCallback(newValue.inputValue)\n\n        } else {\n          setValue(newValue);\n          updateParentCallback(newValue?.key)\n        }\n      }}\n      filterOptions={(options, params) => {\n        const filtered = filter(options, params);\n\n        const { inputValue } = params;\n        // Suggest the creation of a new value\n        const isExisting = options.some((option) => inputValue === option.key);\n        if ((inputValue !== '') && !isExisting) {\n          filtered.push({\n            inputValue,\n            key: `Add \"${inputValue}\"`,\n          });\n        }\n        return filtered;\n      }}\n      selectOnFocus\n      clearOnBlur\n      handleHomeEndKeys\n      id=\"free-solo-with-text-addition\"\n      options={options}\n      getOptionLabel={(option) => {\n        // Value selected with enter, right from the input\n        if (typeof option === 'string') {\n          return option;\n        }\n        // Add \"xxx\" option created dynamically\n        if (option.inputValue) {\n          return option.inputValue;\n        }\n        if (option.key){\n          return option.key;\n        }\n        return \"\"\n      }}\n      renderOption={(props, option) => <li {...props}>{option.key}</li>}\n      sx={{ width: 300 }}\n      freeSolo\n      renderInput={(params) => (\n        <TextField {...params} label={props.label} />\n      )}\n    />\n  );\n}\n\n\n\nfunction ExperimentSummaryForm(props) {\n  const classes = useStyles();\n  const timestamp = moment.utc()\n  const [formError, setFormError] = React.useState(false);\n  const [helperText, setHelperText] = React.useState(\" \");\n  const [expName, setExpName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [organismUsed, setOrganismUsed] = React.useState(\"\");\n  const [mediaUsed, setMediaUsed] = React.useState(\"\");\n  const [historicalMediaUsed, setHistoricalMediaUsed] = React.useState([]);\n  const [historicalOrganismUsed, setHistoricalOrganismUsed] = React.useState([]);\n  const [historicalExperiments, setHistoricalExperiments] = React.useState({});\n\n  React.useEffect(() => {\n    function getHistoricalExperiments() {\n      fetch(\"/api/experiments\")\n        .then((response) => {\n          if (response.ok){\n            return response.json();\n          }\n        }).then(json => json.reduce((acc, {experiment}) => {\n              acc[experiment] = 1;\n              return acc;\n            }, {}))\n        .then(data => setHistoricalExperiments(data))\n    }\n\n\n    function populateDropDowns() {\n      fetch(\"/api/historical_media\")\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n          })\n        .then(json => setHistoricalMediaUsed(json))\n\n      fetch(\"/api/historical_organisms\")\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n          })\n        .then(json => setHistoricalOrganismUsed(json))\n    }\n    populateDropDowns();\n    getHistoricalExperiments();\n  }, [])\n\n\n  function populateFields(){\n    fetch(\"/api/experiments/latest\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setExpName(data.experiment)\n        setDescription(data.description)\n        setOrganismUsed(data.organism_used)\n        setMediaUsed(data.media_used)\n      });\n  }\n\n\n  function killExistingJobs(){\n     fetch('/api/stop_all', {method: \"POST\"})\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (expName === \"\"){\n      setFormError(true)\n      setHelperText(\"Can't be blank.\")\n      return\n    }\n    else if (expName.includes(\"#\") || expName.includes(\"+\") || expName.includes(\"/\")) {\n      setFormError(true)\n      setHelperText(\"Can't use #, / or + characters in experiment name.\")\n      return\n    }\n\n    fetch('/api/experiments',{\n        method: \"POST\",\n        body: JSON.stringify({experiment : expName.trim(), created_at: timestamp.toISOString(), description: description, mediaUsed: mediaUsed, organismUsed: organismUsed }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.ok){\n          setHelperText(\" \")\n          setFormError(false);\n          killExistingJobs()\n          props.handleNext()\n        }\n        else if (res.status === 409) {\n          setFormError(true);\n          setHelperText(\"Experiment name already used. Please choose another.\")\n        }\n        else {\n          setFormError(true);\n          setHelperText(\"Sever error. See UI logs.\")\n        }\n      }\n     )\n  }\n\n  const onExpNameChange = (e) => {\n    var experimentNameProposed = e.target.value\n    setExpName(experimentNameProposed)\n    // realtime validation\n    if (experimentNameProposed.trim() in historicalExperiments){\n      setFormError(true);\n      setHelperText(\"Experiment name already used. Please choose another.\")\n    }\n    else if (experimentNameProposed.includes(\"#\") || experimentNameProposed.includes(\"+\") || experimentNameProposed.includes(\"/\")) {\n      setFormError(true)\n      setHelperText(\"Can't use #, / or + characters in experiment name.\")\n    }\n    else {\n      setHelperText(\" \")\n      setFormError(false)\n    }\n  }\n\n\n  const onDescChange = (e) => {\n    setDescription(e.target.value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <FormGroup>\n        <Grid container spacing={1}>\n          <Grid item xs={12} md={8}>\n            <TextField\n              error={formError}\n              id=\"expName\"\n              label=\"Experiment name\"\n              value={expName}\n              required\n              className={classes.thinTextField}\n              onChange={onExpNameChange}\n              helperText={helperText}\n              />\n          </Grid>\n          <Grid item xs={12} md={6}>\n          </Grid>\n          <Grid item xs={12} md={12}>\n            <TextField\n              label=\"Description (optional)\"\n              rows={2}\n              placeholder=\"Add a description. This description can be changed later.\"\n              multiline\n              value={description}\n              className={classes.textField}\n              onChange={onDescChange}\n              fullWidth={true}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <FreeSoloCreateOption\n              options={historicalOrganismUsed}\n              label=\"Organism / strain (optional)\"\n              updateParentCallback={setOrganismUsed}\n              value={organismUsed}\n            />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <FreeSoloCreateOption\n              options={historicalMediaUsed}\n              label=\"Media (optional)\"\n              updateParentCallback={setMediaUsed}\n              value={mediaUsed}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={4}/>\n          <Grid item xs={12} md={8}>\n            <div style={{display: \"flex\", justifyContent: \"flex-end\"}}>\n              <Button style={{marginRight: \"10px\"}} size=\"small\" color=\"primary\" onClick={populateFields}>Populate with previous experiment</Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={onSubmit}\n                endIcon={<SaveIcon />}\n                disabled={(expName===\"\") || formError}\n              >\n                Save\n              </Button>\n            </div>\n          </Grid>\n        </Grid>\n      </FormGroup>\n    </div>\n  );\n}\n\n\n\n\n\nfunction StartNewExperimentContainer(props) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [skipped, setSkipped] = React.useState(new Set());\n\n\n\n\n  const getStepContent = (index) => {\n    return steps[index].content\n  }\n  const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1){\n      window.location.href = \"/overview\"; // change to location\n    } else {\n\n      let newSkipped = skipped;\n      if (isStepSkipped(activeStep)) {\n        newSkipped = new Set(newSkipped.values());\n        newSkipped.delete(activeStep);\n      }\n\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      setSkipped(newSkipped);\n      window.scrollTo({top: 0})\n    }\n  };\n\n\n  const steps = [\n    {title: 'Experiment summary', content: <ExperimentSummaryForm config={props.config} handleNext={handleNext}/>, optional: false},\n    //{title: 'Cleaning and preparation', content: <CleaningScript config={props.config}/>, optional: true},\n    //{title: 'Run from experiment profile', content: <RunFromExperimentProfile config={props.config} handleNext={handleNext} />,  optional: true},\n    {title: 'Assign labels', content:               <AssignLabels config={props.config} handleNext={handleNext} />,              optional: true},\n    //{title: 'Start sensors', content: <StartSensors config={props.config}/>, optional: false},\n    //{title: 'Start calculations', content: <StartCalculations config={props.config}/>, optional: false},\n  ];\n\n  return (\n    <Card className={classes.root}>\n      <CardContent className={classes.cardContent}>\n        <Typography variant=\"h5\" component=\"h1\">\n          Start a new experiment\n        </Typography>\n        <div>\n          <div>\n            <div className={classes.instructions}>{getStepContent(activeStep)}</div>\n            <div>\n            {(activeStep !== 0) && (\n              <div>\n                <Button color=\"inherit\" onClick={handleNext} sx={{ mr: 1 }} className={classes.skipButton}>\n                  Skip / Next\n                </Button>\n              </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\nfunction StartNewExperiment(props) {\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n    getConfig(setConfig)\n  }, [])\n\n  React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title])\n  return (\n      <Grid container spacing={2} >\n        <Grid item xs={12} md={12}>\n          <StartNewExperimentContainer config={config}/>\n        </Grid>\n      </Grid>\n  )\n}\n\nexport default StartNewExperiment;\n\n","import React from \"react\";\nimport { makeStyles } from '@mui/styles';\nimport Typography from '@mui/material/Typography';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\n\nconst useStyles = makeStyles((theme) => ({\n  cardContent: {\n    padding: \"10px\"\n  },\n  DisplayProfileCard: {\n    maxHeight: \"350px\",\n    overflow: \"auto\",\n    backgroundColor: \"rgb(248,248,248)\",\n    letterSpacing: \"0em\",\n    margin: \"10px auto 10px auto\",\n    position: \"relative\",\n    width: \"98%\",\n    border: \"1px solid #ccc\",\n    borderRadius: \"0px\",\n    boxShadow: \"none\"\n  },\n}));\n\n\nconst humanReadableDuration = (actionType, hoursElapsed) => {\n  if (hoursElapsed === 0){\n    return `${actionType} immediately`\n  }\n  else if (hoursElapsed < 1){\n    return `${actionType} after ${Math.round(hoursElapsed * 60 * 10) / 10} minutes`\n  }\n  else if (hoursElapsed === 1){\n    return `${actionType} after ${hoursElapsed} hour`\n  }\n  else {\n    return `${actionType} after ${hoursElapsed} hours`\n  }\n\n}\n\n\n\nconst DisplayProfile = ({ data }) => {\n  const classes = useStyles();\n  return (\n    <Card className={classes.DisplayProfileCard}>\n      <CardContent className={classes.cardContent}>\n        <Typography variant=\"h6\">\n          {data.experiment_profile_name}\n        </Typography>\n        <Typography sx={{ mb: 1.5 }} color=\"text.secondary\" gutterBottom>\n          Created by {data.metadata.author}\n        </Typography>\n        {data.metadata.description &&\n          <>\n            <Typography variant=\"body2\">\n                <b>Description:</b> {data.metadata.description}\n            </Typography>\n            <br/>\n          </>\n        }\n        {data.labels && Object.keys(data.labels).length > 0 && (\n          <>\n          <Typography variant=\"body2\">\n              <b>Labels:</b>\n          </Typography>\n          {Object.keys(data.labels).map(worker => (\n              <Typography key={worker} variant=\"body2\" style={{ marginLeft: '2em' }}>\n                  {worker} ⇝ {data.labels[worker]}\n              </Typography>\n          ))}\n          <br/>\n          </>\n        )}\n\n        {data.common &&\n         <>\n          <Typography variant=\"body2\">\n              <b>All Pioreactor(s) do:</b>\n          </Typography>\n          {data.common && Object.keys(data.common).map(job => (\n              <React.Fragment key={job}>\n                <Typography key={job} variant=\"body2\" style={{ marginLeft: '2em' }}>\n                    <b>Job</b>: {job}\n                </Typography>\n                {data.common[job].actions.sort((a, b) => a.hours_elapsed > b.hours_elapsed).map((action, index) => (\n                    <>\n                      <Typography key={`common-action-${index}`} variant=\"body2\" style={{ marginLeft: '4em' }}>\n                          <b>Action {index + 1}</b>: {humanReadableDuration(action.type, action.hours_elapsed)}\n                      </Typography>\n                        {Object.keys(action.options).map((option, index) => (\n                          <Typography key={`common-${option}-${action}-${index}`} variant=\"body2\" style={{ marginLeft: '8em' }}>\n                            {option}: {action.options[option]}\n                          </Typography>\n                        ))}\n                    </>\n                ))}\n              </React.Fragment>\n          ))}\n          <br/>\n          </>\n        }\n\n        {data.pioreactors && Object.keys(data.pioreactors).map(pioreactor => (\n            <React.Fragment key={pioreactor}>\n                <Typography key={pioreactor} variant=\"body2\">\n                    <b>{pioreactor} does:</b>\n                </Typography>\n                {Object.keys(data.pioreactors[pioreactor].jobs).map(job => (\n                    <React.Fragment key={`${pioreactor}-${job}`}>\n                      <Typography key={`${pioreactor}-${job}`}  variant=\"body2\" style={{ marginLeft: '2em' }}>\n                          <b>Job</b>: {job}\n                      </Typography>\n                      {data.pioreactors[pioreactor].jobs[job].actions.sort((a, b) => a.hours_elapsed > b.hours_elapsed).map((action, index) => (\n                          <>\n                            <Typography key={`${pioreactor}-action-${index}`} variant=\"body2\" style={{ marginLeft: '4em' }}>\n                                <b>Action {index + 1}</b>: {humanReadableDuration(action.type, action.hours_elapsed)}\n                            </Typography>\n                              {Object.keys(action.options).map( (option, index) => (\n                                <Typography key={`${pioreactor}-${option}-${action}-${index}`} variant=\"body2\" style={{ marginLeft: '8em' }}>\n                                  {option}: {action.options[option]}\n                                </Typography>\n                              ))}\n                          </>\n                      ))}\n                    </React.Fragment>\n                ))}\n              <br/>\n            </React.Fragment>\n        ))}\n      </CardContent>\n    </Card>\n  );\n};\n\n\n\nexport default DisplayProfile;\n\n","import React from \"react\";\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\n\nconst useStyles = makeStyles((theme) => ({\n  cardContent: {\n    padding: \"10px\",\n  },\n  DisplayProfileCard: {\n    maxHeight: \"350px\",\n    overflow: \"auto\",\n    backgroundColor: \"rgb(248,248,248)\",\n    letterSpacing: \"0em\",\n    margin: \"10px auto 10px auto\",\n    position: \"relative\",\n    width: \"98%\",\n    border: \"1px solid #ccc\",\n    borderRadius: \"0px\",\n    boxShadow: \"none\"\n  },\n}));\n\n\n\nconst DisplaySourceCode = ({ sourceCode }) => {\n  const classes = useStyles();\n  return (\n    <Card className={classes.DisplayProfileCard}>\n      <CardContent className={classes.cardContent}>\n        <pre style={{whiteSpace: \"pre-wrap\"}}>\n          {sourceCode}\n        </pre>\n      </CardContent>\n    </Card>\n  );\n};\n\n\nexport default DisplaySourceCode;\n\n","import React from \"react\";\n\nimport FormControl from '@mui/material/FormControl';\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { makeStyles } from '@mui/styles';\nimport Select from '@mui/material/Select';\nimport {Typography} from '@mui/material';\nimport Box from '@mui/material/Box';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {getConfig} from \"./utilities\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport DisplayProfile from \"./components/DisplayProfile\"\nimport DisplaySourceCode from \"./components/DisplaySourceCode\"\nimport CloseIcon from '@mui/icons-material/Close';\nimport CodeIcon from '@mui/icons-material/Code';\nimport {runPioreactorJob} from \"./utilities\"\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@mui/icons-material/Save';\nimport { CodeFlaskReact } from \"react-codeflask\"\nimport TextField from '@mui/material/TextField';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { Link } from 'react-router-dom';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport Snackbar from '@mui/material/Snackbar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(2),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"},\n  textIcon: {\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\nclass EditExperimentProfilesContent extends React.Component {\n  DEFAULT_CODE = `experiment_profile_name:\n\nmetadata:\n  description:\n  author:\n`\n  DEFAULT_FILENAME = \"\"\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: props.code || this.DEFAULT_CODE,\n      filename: props.filename || this.DEFAULT_FILENAME,\n      openSnackbar: false,\n      snackbarMsg: \"\",\n    }\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code})\n  }\n\n  onFilenameChange = (e) => {\n    this.setState({filename: e.target.value})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  saveCurrentCode() {\n    if (this.state.filename === \"\") {\n      this.setState({isError: true, errorMsg: \"Filename can't be blank\"})\n      return\n    }\n\n    this.setState({saving: true, isError: false})\n    fetch(\"/api/contrib/experiment_profiles\",{\n        method: \"POST\",\n        body: JSON.stringify({body :this.state.code, filename: this.state.filename + '.yaml'}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({saving: false})\n        this.setState({openSnackbar: true});\n        this.setState({snackbarMsg: `Experiment profile ${this.state.filename}.yaml saved.`});\n      } else {\n        res.json().then(parsedJson =>\n          this.setState({errorMsg: parsedJson['msg'], isError: true, saving: false})\n        )\n      }\n    })\n  }\n\n\n  render() {\n    return (\n      <>\n      <Grid container spacing={1}>\n        <Grid item xs={6}>\n          <div style={{width: \"100%\", margin: \"10px\", display: \"flex\", justifyContent:\"space-between\"}}>\n            <FormControl>\n            <TextField\n              label=\"Filename\"\n              onChange={this.onFilenameChange}\n              required\n              value={this.state.filename}\n              styles={{width: \"200px\"}}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">.yaml</InputAdornment>,\n              }\n            }\n\n            />\n            </FormControl>\n          </div>\n        </Grid>\n        <Grid item xs={3} />\n        <Grid container xs={3} direction=\"column\" alignItems=\"flex-end\">\n          <Grid item xs={12} />\n        </Grid>\n\n        <Grid item xs={12}>\n            <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"280px\", border: \"1px solid #ccc\"}}>\n              <CodeFlaskReact\n                code={this.state.code}\n                onChange={this.onTextChange}\n                editorRef={this.getCodeFlaskRef}\n                language={\"yaml\"}\n              />\n            </div>\n        </Grid>\n        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n          <div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              style={{marginLeft: \"20px\"}}\n              onClick={this.saveCurrentCode}\n              endIcon={ <SaveIcon /> }\n              disabled={false}\n            >\n              Save\n           </Button>\n           <p style={{marginLeft: \"20px\"}}>{this.state.isError ? <Box color=\"error.main\">{this.state.errorMsg}</Box>: \"\"}</p>\n          </div>\n        </div>\n      </Grid>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={this.state.openSnackbar}\n        onClose={this.handleSnackbarClose}\n        message={this.state.snackbarMsg}\n        autoHideDuration={4000}\n        key={\"create-profile-snackbar\"}\n      />\n      </>\n    );\n  }\n}\n\n\nfunction ProfilesContainer(props){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Create Experiment Profile\n            </Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <Button to={`/experiment-profiles`} component={Link} style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <ArrowBackIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Back\n            </Button>\n          </div>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditExperimentProfilesContent />\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}>Learn more about <a href=\"https://docs.pioreactor.com/user-guide/experiment-profiles-schema\" target=\"_blank\" rel=\"noopener noreferrer\">experiment profile schemas</a>.</p>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction CreateNewProfile(props) {\n\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title]);\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <ProfilesContainer />\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default CreateNewProfile;\n","import React from \"react\";\n\nimport FormControl from '@mui/material/FormControl';\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { makeStyles } from '@mui/styles';\nimport Select from '@mui/material/Select';\nimport {Typography} from '@mui/material';\nimport Box from '@mui/material/Box';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {getConfig} from \"./utilities\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport DisplayProfile from \"./components/DisplayProfile\"\nimport DisplaySourceCode from \"./components/DisplaySourceCode\"\nimport CloseIcon from '@mui/icons-material/Close';\nimport CodeIcon from '@mui/icons-material/Code';\nimport {runPioreactorJob} from \"./utilities\"\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@mui/icons-material/Save';\nimport { CodeFlaskReact } from \"react-codeflask\"\nimport TextField from '@mui/material/TextField';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { Link } from 'react-router-dom';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport Snackbar from '@mui/material/Snackbar';\nimport { useSearchParams } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(2),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"},\n  textIcon: {\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\nclass EditExperimentProfilesContent extends React.Component {\n  DEFAULT_CODE = `experiment_profile_name:\n\nmetadata:\n  description:\n  author:\n`\n  DEFAULT_FILENAME = \"\"\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: props.code || this.DEFAULT_CODE,\n      filename: props.filename || this.DEFAULT_FILENAME,\n      filenameEditable: props.filename !== null,\n      openSnackbar: false,\n      snackbarMsg: \"\",\n    }\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code})\n  }\n\n  onFilenameChange = (e) => {\n    this.setState({filename: e.target.value})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  componentDidUpdate(prevProps) {\n    if(prevProps.code !== this.props.code) {\n      this.setState({code: this.props.code});\n    }\n  }\n\n  saveCurrentCode() {\n    if (this.state.filename === \"\") {\n      this.setState({isError: true, errorMsg: \"Filename can't be blank\"})\n      return\n    }\n\n    this.setState({saving: true, isError: false})\n    fetch(\"/api/contrib/experiment_profiles\",{\n        method: \"POST\",\n        body: JSON.stringify({body :this.state.code, filename: this.state.filename + '.yaml'}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({saving: false})\n        this.setState({openSnackbar: true});\n        this.setState({snackbarMsg: `Experiment profile ${this.state.filename}.yaml saved.`});\n      } else {\n        res.json().then(parsedJson =>\n          this.setState({errorMsg: parsedJson['msg'], isError: true, saving: false})\n        )\n      }\n    })\n  }\n\n\n  render() {\n    return (\n      <>\n      <Grid container spacing={1}>\n        <Grid item xs={6}>\n          <div style={{width: \"100%\", margin: \"10px\", display: \"flex\", justifyContent:\"space-between\"}}>\n            <FormControl>\n            <TextField\n              label=\"Filename\"\n              onChange={this.onFilenameChange}\n              required\n              value={this.state.filename}\n              disabled={this.state.filenameEditable}\n              styles={{width: \"200px\"}}\n              InputProps={{\n                endAdornment: <InputAdornment position=\"end\">.yaml</InputAdornment>,\n              }\n            }\n\n            />\n            </FormControl>\n          </div>\n        </Grid>\n        <Grid item xs={3} />\n        <Grid container xs={3} direction=\"column\" alignItems=\"flex-end\">\n          <Grid item xs={12} />\n        </Grid>\n\n        <Grid item xs={12}>\n            <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"280px\", border: \"1px solid #ccc\"}}>\n              <CodeFlaskReact\n                code={this.state.code}\n                onChange={this.onTextChange}\n                editorRef={this.getCodeFlaskRef}\n                language={\"yaml\"}\n              />\n            </div>\n        </Grid>\n        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n          <div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              style={{marginLeft: \"20px\"}}\n              onClick={this.saveCurrentCode}\n              endIcon={ <SaveIcon /> }\n              disabled={false}\n            >\n              Save\n           </Button>\n           <p style={{marginLeft: \"20px\"}}>{this.state.isError ? <Box color=\"error.main\">{this.state.errorMsg}</Box>: \"\"}</p>\n          </div>\n        </div>\n      </Grid>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={this.state.openSnackbar}\n        onClose={this.handleSnackbarClose}\n        message={this.state.snackbarMsg}\n        autoHideDuration={4000}\n        key={\"edit-profile-snackbar\"}\n      />\n      </>\n    );\n  }\n}\n\n\nfunction ProfilesContainer(props){\n  const classes = useStyles();\n  const [queryParams, setQueryParams] = useSearchParams();\n  const [source, setSource] = React.useState('')\n  const filename = queryParams.get(\"profile\")\n\n  React.useEffect(() => {\n    fetch(`/api/contrib/experiment_profiles/${filename}`, {\n          method: \"GET\",\n      }).then(res => {\n        if (res.ok) {\n          return res.text();\n        }\n      }).then(text => {\n        setSource(text)\n      })\n  })\n\n  return(\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Edit Experiment Profile\n            </Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <Button to={`/experiment-profiles`} component={Link} style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <ArrowBackIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Back\n            </Button>\n          </div>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditExperimentProfilesContent code={source} filename={filename.split(\".\")[0]}/>\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}>Learn more about <a href=\"https://docs.pioreactor.com/user-guide/experiment-profiles-schema\" target=\"_blank\" rel=\"noopener noreferrer\">experiment profile schemas</a>.</p>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction EditProfile(props) {\n\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title]);\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <ProfilesContainer />\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default EditProfile;\n","import React from \"react\";\nimport MarkdownView from 'react-showdown';\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport Snackbar from '@mui/material/Snackbar';\nimport Link from '@mui/material/Link';\nimport UpdateIcon from '@mui/icons-material/Update';\nimport Divider from '@mui/material/Divider';\nimport SystemUpdateAltIcon from '@mui/icons-material/SystemUpdateAlt';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\n\nfunction PageHeader(props) {\n  const classes = useStyles();\n\n\n  return (\n    <div>\n      <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Calibrations\n          </Box>\n        </Typography>\n      <Divider/>\n      </div>\n    </div>\n  )\n}\n\n\nfunction Calibrations(props) {\n    React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <PageHeader/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Calibrations;\n\n","import React from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport FormControl from '@mui/material/FormControl';\nimport Button from '@mui/material/Button';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport InputLabel from '@mui/material/InputLabel';\nimport Box from '@mui/material/Box';\nimport MenuItem from '@mui/material/MenuItem';\nimport {Typography} from '@mui/material';\nimport Snackbar from '@mui/material/Snackbar';\nimport Select from '@mui/material/Select';\nimport SaveIcon from '@mui/icons-material/Save';\nimport { CodeFlaskReact } from \"react-codeflask\"\nimport moment from \"moment\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\nclass EditableCodeDiv extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: \"Loading...\",\n      openSnackbar: false,\n      filename: \"config.ini\",\n      snackbarMsg: \"\",\n      saving: false,\n      historicalConfigs: [{filename: \"config.ini\", data: \"\", timestamp: \"2000-01-01\"}],\n      timestamp_ix: 0,\n      errorMsg: \"\",\n      isError: false,\n      hasChangedSinceSave: true,\n      availableConfigs: [\n        {name: \"shared config.ini\", filename: \"config.ini\"},\n      ]\n    };\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n    this.deleteConfig = this.deleteConfig.bind(this);\n  }\n\n  getConfig(filename) {\n    fetch(`/api/configs/${filename}`)\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        this.setState({code: text});\n      })\n  }\n\n  getListOfConfigFiles() {\n    fetch(\"/api/configs\")\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        this.setState(prevState => ({\n          availableConfigs: [...prevState.availableConfigs, ...json.filter(e => (e !== 'config.ini')).map(e => ({name: e, filename: e}))]\n        }));\n      })\n  }\n\n  getHistoricalConfigFiles(filename) {\n    fetch(\"/api/historical_configs/\" + filename)\n      .then(response => {\n        return response.json();\n      })\n      .then(listOfHistoricalConfigs => {\n        listOfHistoricalConfigs.shift() // remove the first file, which is equal to current\n        this.setState({\n          historicalConfigs: listOfHistoricalConfigs,\n          timestamp_ix: 0\n        });\n      })\n  }\n\n  saveCurrentCode() {\n    this.setState({saving: true, isError: false})\n    fetch(`/api/configs/${this.state.filename}`,{\n        method: \"PATCH\",\n        body: JSON.stringify({code :this.state.code, filename: this.state.filename}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" saved and synced.\", hasChangedSinceSave: false, saving: false})\n        this.setState({openSnackbar: true});\n      } else {\n        res.json().then(parsedJson =>\n          this.setState({errorMsg: parsedJson['msg'], isError: true, hasChangedSinceSave: true, saving: false})\n        )\n      }\n    })\n  }\n\n  deleteConfig(){\n    fetch(`/api/configs/${this.state.filename}`,{\n        method: \"DELETE\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" deleted.\"})\n      } else {\n        this.setState({snackbarMsg: \"Hm. Something when wrong deleting...\"})\n      }\n      this.setState({openSnackbar: true});\n      setTimeout(function () {\n        window.location.reload();\n      }, 750);\n    })\n  }\n\n  componentDidMount() {\n    this.getConfig(this.state.filename)\n    this.getListOfConfigFiles()\n    this.getHistoricalConfigFiles(this.state.filename)\n    this.setState({timestamp: this.state.historicalConfigs[0].timestamp})\n  }\n\n  onSelectionChange = (e) => {\n    const filename = e.target.value\n    this.setState({filename: filename})\n    this.getConfig(filename)\n    this.getHistoricalConfigFiles(filename)\n  }\n\n  onSelectionHistoricalChange = (e) => {\n    const timestamp = e.target.value\n    const ix = this.state.historicalConfigs.findIndex((c) => c.timestamp === timestamp)\n    const configBlob = this.state.historicalConfigs[ix]\n    this.setState({code: configBlob.data, timestamp_ix: ix})\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code, hasChangedSinceSave: true})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div style={{width: \"100%\", margin: \"10px\", display: \"flex\", justifyContent:\"space-between\"}}>\n          <FormControl>\n            <div>\n              <InputLabel id=\"configSelect\" variant=\"standard\">Config file</InputLabel>\n              <Select\n                labelId=\"configSelect\"\n                variant=\"standard\"\n                value={this.state.filename}\n                onChange={this.onSelectionChange}\n              >\n                {this.state.availableConfigs.map((v) => {\n                  return <MenuItem key={v.filename} value={v.filename}>{v.name}</MenuItem>\n                  }\n                )}\n              </Select>\n            </div>\n          </FormControl>\n          {this.state.historicalConfigs.length > 0 ? (\n          <FormControl style={{marginRight: \"20px\"}}>\n            <div>\n              <InputLabel id=\"configSelect\" variant=\"standard\">Versions</InputLabel>\n              <Select\n                labelId=\"historicalConfigSelect\"\n                variant=\"standard\"\n                value={this.state.historicalConfigs.length > 0 ? this.state.historicalConfigs[this.state.timestamp_ix].timestamp : \"\"}\n                displayEmpty={true}\n                onChange={this.onSelectionHistoricalChange}\n              >\n                {this.state.historicalConfigs.map((v, i) => {\n                  return <MenuItem key={v.timestamp} value={v.timestamp}>{i === 0 ? \"Current\" : moment(v.timestamp).format(\"MMM DD [at] hh:mm a\") }</MenuItem>\n                  }\n                )}\n              </Select>\n            </div>\n          </FormControl>\n        ) : <div></div>}\n\n        </div>\n\n        <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"280px\", border: \"1px solid #ccc\"}}>\n          <CodeFlaskReact\n            code={this.state.code}\n            onChange={this.onTextChange}\n            editorRef={this.getCodeFlaskRef}\n            language={\"python\"}\n          />\n        </div>\n        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n          <div>\n            <LoadingButton\n              style={{margin: \"5px 12px 5px 12px\"}}\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={this.saveCurrentCode}\n              disabled={!this.state.hasChangedSinceSave}\n              loading={this.state.saving}\n              loadingPosition=\"end\"\n              endIcon={<SaveIcon />}\n              >\n              {this.state.timestamp_ix === 0 ? \"Save\" : \"Revert\"}\n            </LoadingButton>\n            <p style={{marginLeft: 12}}>{this.state.isError ? <Box color=\"error.main\">{this.state.errorMsg}</Box>: \"\"}</p>\n          </div>\n          <Button\n            style={{margin: \"5px 10px 5px 10px\"}}\n            color=\"secondary\"\n            onClick={this.deleteConfig}\n            disabled={(this.state.filename === \"config.ini\")}>\n            Delete config file\n          </Button>\n        </div>\n        <Snackbar\n          anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n          open={this.state.openSnackbar}\n          onClose={this.handleSnackbarClose}\n          message={this.state.snackbarMsg}\n          autoHideDuration={2000}\n          key={\"edit-config-snackbar\"}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\n\n\n\nfunction EditConfigContainer(){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Configuration\n            </Box>\n          </Typography>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditableCodeDiv/>\n\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}>Learn more about Pioreactor  <a href=\"https://docs.pioreactor.com/user-guide/configuration\" target=\"_blank\" rel=\"noopener noreferrer\">configuration</a>.</p>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction EditConfig(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n             <EditConfigContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default EditConfig;\n\n","import React from 'react'\n\nimport { makeStyles } from '@mui/styles';\n\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown'\nimport Button from '@mui/material/Button'\nimport ButtonGroup from '@mui/material/ButtonGroup'\nimport Menu from '@mui/material/Menu'\nimport MenuItem from '@mui/material/MenuItem'\nimport CheckIcon from '@mui/icons-material/Check';\nimport Icon from '@mui/material/Icon';\n\nconst useStyles = makeStyles({\n  button: props => (props.buttonStyle),\n  buttonDropdown: {},\n})\n\nconst SelectButton = React.forwardRef((\n  props,\n  ref,\n) => {\n  const { textPrefix, onChange = () => {}, onClick = () => {}, value: initialValue, children } = props\n  const classes = useStyles(props)\n  const anchorRef = (ref || React.useRef(null))\n  const [isOpen, setOpen] = React.useState(false)\n  const valueRef = React.useRef(initialValue)\n  valueRef.current = initialValue\n\n  const handleItemClick = (value) => (e) => {\n    setOpen(false)\n    Object.defineProperty(e, 'target', { writable: true, value: { value } })\n    valueRef.current = value\n    onChange(e)\n  }\n\n  const handleButtonClick = (e) => {\n    const value = valueRef.current\n    Object.defineProperty(e, 'target', { writable: true, value: { value } })\n    valueRef.current = value\n    onClick(e)\n  }\n\n  const items = React.Children\n    .map(children, child => {\n      if (!child) {\n        return null\n      }\n      const selected = valueRef.current === child.props.value\n      const valueReadable = child.props.children\n      const icon = selected ? <CheckIcon style={{marginRight: \"5px\", verticalAlign: \"-1px\"}}/>: <Icon style={{marginRight: \"5px\", verticalAlign: \"-1px\"}}/>\n      const item = (\n        <MenuItem\n          onClick={handleItemClick(child.props.value)}\n          selected={selected}\n          role=\"option\"\n          aria-selected={selected ? 'true' : undefined}\n          data-value-readable={valueReadable}\n          data-value={child.props.value}\n          value={undefined}\n        >\n          {icon}{valueReadable}\n        </MenuItem>\n      )\n      return item\n    })\n    .filter(item => item !== null)\n\n  const displayName = (value) =>\n    (items.find(item => item.props['data-value'] === value)).props['data-value-readable']\n\n  return <>\n    <ButtonGroup variant='contained' ref={anchorRef}>\n      <Button\n        className={classes.button}\n        onClick={handleButtonClick}\n        endIcon={props.endIcon}\n        disabled={props.disabled}\n      >\n        { textPrefix }{ displayName(valueRef.current) }\n      </Button>\n      <Button\n        className={classes.buttonDropdown}\n        size='small'\n        onClick={() => setOpen(true)}\n        disabled={props.disabled}\n      >\n        <ArrowDropDownIcon />\n      </Button>\n    </ButtonGroup>\n    <Menu\n      open={isOpen}\n      onClose={() => setOpen(false)}\n      getContentAnchorEl={null} // needed for anchorOrigin to work\n      anchorEl={anchorRef.current}\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n    >\n      { items }\n    </Menu>\n  </>\n})\n\nSelectButton.displayName = 'SelectButton'\n\nexport default SelectButton","import React from \"react\";\nimport MarkdownView from 'react-showdown';\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport Snackbar from '@mui/material/Snackbar';\nimport Link from '@mui/material/Link';\nimport UpdateIcon from '@mui/icons-material/Update';\nimport Divider from '@mui/material/Divider';\nimport MenuItem from '@mui/material/MenuItem';\nimport SystemUpdateAltIcon from '@mui/icons-material/SystemUpdateAlt';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport { useConfirm } from 'material-ui-confirm';\nimport UnderlineSpan from \"./components/UnderlineSpan\";\nimport SelectButton from \"./components/SelectButton\";\nimport ScienceIcon from '@mui/icons-material/Science';\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\nfunction UpdateToLatestConfirmDialog(props) {\n  const confirm = useConfirm();\n  const [updating, setUpdating] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false)\n  const [installDev, setInstallDev] = React.useState(false)\n\n  const updateVersion = () => {\n    setOpenSnackbar(true)\n    if (installDev){\n      fetch(\"/api/update_app_to_develop\", {method: \"POST\"})\n    } else {\n      fetch(\"/api/update_app\", {method: \"POST\"})\n    }\n  }\n\n  const handleClick = () => {\n    confirm({\n      description: 'To avoid possible data interruptions, we suggest updating between running experiments. ' + (installDev ? \"We recommend being on the latest release of software before doing this. Confirm you are on the latest software before updating.\" : \"\"),\n      title: installDev ? \"Update to development build?\" : \"Update to next release?\" ,\n      confirmationText: \"Update\",\n      confirmationButtonProps: {color: \"primary\"},\n      cancellationButtonProps: {color: \"secondary\"},\n\n      }).then(() => {\n        updateVersion();\n        setUpdating(true)\n      }\n    )\n  };\n\n  return (\n    <React.Fragment>\n      <SelectButton\n        buttonStyle={{textTransform: 'none'}}\n        value={installDev ? \"development\" : \"latest\"}\n        onClick={handleClick}\n        onChange={({ target: { value } }) =>\n          setInstallDev(value === \"development\")\n        }\n        disabled={updating}\n        endIcon={installDev ? <ScienceIcon /> :  <UpdateIcon />}\n      >\n        <MenuItem value={\"latest\"}>Update to next release</MenuItem>\n        <MenuItem value={\"development\"}>Update to development</MenuItem>\n      </SelectButton>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        message=\"Updating in the background. This may take a few minutes. You may leave this page.\"\n        autoHideDuration={20000}\n        key=\"snackbar-update\"\n      />\n    </React.Fragment>\n  );\n}\n\n\nfunction PageHeader(props) {\n  const classes = useStyles();\n  const [version, setVersion] = React.useState(\"\")\n  const [uiVersion, setUIVersion] = React.useState(\"\")\n  const [latestVersion, setLatestVersion] = React.useState(\"\")\n\n  React.useEffect(() => {\n    async function getCurrentAppVersion() {\n         await fetch(\"/api/versions/app\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setVersion(data)\n        });\n      }\n\n    async function getCurrentUIVersion() {\n         await fetch(\"/api/versions/ui\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setUIVersion(data)\n        });\n      }\n\n    async function getLatestAppVersion() {\n         await fetch(\"https://api.github.com/repos/pioreactor/pioreactor/releases/latest\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setLatestVersion(data['tag_name'])\n        })\n        .catch(e => {\n          console.log(\"No internet connection?\")\n        })\n      }\n\n      getCurrentUIVersion()\n      getCurrentAppVersion()\n      getLatestAppVersion()\n  }, [])\n\n  return (\n    <div>\n      <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Updates\n          </Box>\n        </Typography>\n        <div>\n          <div style={{float: \"right\", marginRight: \"0px\", marginLeft: \"10px\"}}>\n            <UpdateToLatestConfirmDialog />\n          </div>\n          <Link color=\"inherit\" underline=\"none\" href={`https://github.com/Pioreactor/pioreactor/releases/tag/${latestVersion}`} target=\"_blank\" rel=\"noopener noreferrer\">\n            <Button style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n              <OpenInNewIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> View latest release\n            </Button>\n          </Link>\n        </div>\n      </div>\n      <Divider/>\n      <Typography variant=\"subtitle2\">\n\n        <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n          <SystemUpdateAltIcon style={{ fontSize: 14, verticalAlign: \"-1px\" }}/> Version installed:\n        </Box>\n        <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n          <UnderlineSpan title={`App: ${version}\\nUI:  ${uiVersion}`}> {version} </UnderlineSpan>\n        </Box>\n\n        <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n            <UpdateIcon style={{ fontSize: 14, verticalAlign: \"-1px\" }}/>\n          Latest version available:\n        </Box>\n        <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n          {latestVersion}\n        </Box>\n\n      </Typography>\n    </div>\n  )\n}\n\n\n\nfunction ChangelogContainer(){\n  const classes = useStyles();\n\n  const [changelog, setChangelog] = React.useState(\"\")\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"https://raw.githubusercontent.com/Pioreactor/pioreactor/master/CHANGELOG.md\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setChangelog(data)\n        }).catch(e => {\n          // no internet?\n          setChangelog(\"Could not retrieve latest Changelog. Are you missing an internet connection? You can find the latest changelog at [https://github.com/pioreactor/pioreactor/master/CHANGELOG.md](https://github.com/pioreactor/pioreactor/master/CHANGELOG.md)\")\n        })\n      }\n      getData()\n  }, [])\n\n\n  return(\n    <React.Fragment>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n        <Typography variant=\"h6\" component=\"h6\">\n            Change log\n        </Typography>\n          <MarkdownView\n            markdown={changelog}\n          />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Updates(props) {\n    React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <PageHeader/>\n            <ChangelogContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Updates;\n\n","import { Hashicon } from \"@emeraldpay/hashicon-react\";\nimport React from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport Snackbar from '@mui/material/Snackbar';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemAvatar from '@mui/material/ListItemAvatar';\nimport ListItemSecondaryAction from '@mui/material/ListItemSecondaryAction';\nimport ListItemText from '@mui/material/ListItemText';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Avatar from '@mui/material/Avatar';\nimport GetAppIcon from '@mui/icons-material/GetApp';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { Link } from 'react-router-dom';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"25px\",\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  pluginList:{\n    width: \"92%\",\n    margin: \"auto\",\n    marginBottom: \"15px\"\n  },\n  primaryActionButton:{\n    marginLeft: \"5px\"\n  },\n  secondaryActionButton:{\n    marginLeft: \"15px\"\n  }\n}));\n\n\n\nfunction PageHeader(props) {\n  return (\n    <React.Fragment>\n    <div>\n      <div>\n        <Typography variant=\"h5\" component=\"h2\">\n          <Box fontWeight=\"fontWeightBold\">\n            Plugins\n          </Box>\n        </Typography>\n      </div>\n    </div>\n    </React.Fragment>\n  )\n}\n\n\n\nfunction ListAvailablePlugins({alreadyInstalledPluginsNames}){\n\n  const classes = useStyles();\n  const [availablePlugins, setAvailablePlugins] = React.useState([])\n  const [snackbarOpen, setSnackbarOpen] = React.useState(false)\n  const [snackbarMsg, setSnackbarMsg] = React.useState(\"\")\n\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"https://raw.githubusercontent.com/Pioreactor/list-of-plugins/main/plugins.json\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((json) => {\n          setAvailablePlugins(json)\n        }).catch(e => {\n          // no internet?\n        })\n      }\n      getData()\n  }, [])\n\n  const installPlugin = (plugin_name) => () => {\n      setSnackbarOpen(true);\n      setSnackbarMsg(`Installing ${plugin_name} in the background...`);\n      fetch('/api/install_plugin', {\n        method: \"POST\",\n        body: JSON.stringify({plugin_name: plugin_name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n  }\n\n  const handleSnackbarClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setSnackbarOpen(false)\n  }\n\n  return (\n    <React.Fragment>\n    <div className={classes.pluginList}>\n     <List dense={true}>\n        {availablePlugins\n            .filter(plugin => (!alreadyInstalledPluginsNames.includes(plugin.name)))\n            .map(plugin =>\n          <ListItem key={plugin.name}>\n            <ListItemAvatar>\n              <Avatar variant=\"square\" style={{backgroundColor:\"#FFFFFF\"}}>\n                <Hashicon value={plugin.name} size={40} />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={plugin.name}\n              primaryTypographyProps={{style: {fontSize: '0.95rem'}}}\n              secondary={\n               <>\n                <Typography\n                  sx={{ display: 'block', fontStyle: \"italic\"}}\n                  component=\"span\"\n                  variant=\"body2\"\n                  color=\"text.primary\"\n                >\n                  {plugin.author}\n                </Typography>\n                <span>\n                 {plugin.description}\n                </span>\n               </>\n              }\n              style={{maxWidth: \"525px\"}}\n            />\n            <ListItemSecondaryAction sx={{display: {xs: 'contents', md: 'block'}}}>\n\n              <Button\n                onClick={installPlugin(plugin.name)}\n                variant=\"contained\"\n                size=\"small\"\n                aria-label=\"install\"\n                color=\"primary\"\n                endIcon={<GetAppIcon />}\n                className={classes.primaryActionButton}\n              >\n                Install\n              </Button>\n              <Button\n                component={Link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                to={plugin.homepage}\n                variant=\"text\"\n                size=\"small\"\n                color=\"primary\"\n                aria-label=\"view homepage\"\n                disabled={!plugin.homepage || (plugin.homepage === \"Unknown\")}\n                endIcon={<OpenInNewIcon />}\n                className={classes.secondaryActionButton}\n              >\n                View\n              </Button>\n              </ListItemSecondaryAction>\n\n          </ListItem>,\n        )}\n      </List>\n    </div>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMsg}\n      autoHideDuration={10000}\n      key=\"snackbar-available\"\n    />\n    </React.Fragment>\n  )\n}\n\n\n\nfunction ListInstalledPlugins({installedPlugins}){\n  const [snackbarOpen, setSnackbarOpen] = React.useState(false)\n  const [snackbarMsg, setSnackbarMsg] = React.useState(\"\")\n  const classes = useStyles();\n\n  const handleSnackbarClose = (e, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setSnackbarOpen(false)\n  }\n\n  const uninstallPlugin = (plugin_name) => () => {\n      setSnackbarOpen(true);\n      setSnackbarMsg(`Uninstalling ${plugin_name} in the background...`);\n      fetch('/api/uninstall_plugin', {\n        method: \"POST\",\n        body: JSON.stringify({plugin_name: plugin_name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n  }\n  if (installedPlugins.length > 0) {\n    return (\n      <React.Fragment>\n      <div className={classes.pluginList}>\n       <List dense={true}>\n          {installedPlugins.map(plugin =>\n            <ListItem key={plugin.name}>\n              <ListItemAvatar>\n                <Avatar variant=\"square\" style={{backgroundColor:\"#FFFFFF\"}}>\n                  <Hashicon value={plugin.name} size={42} />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText\n                primary={`${plugin.name} ${(plugin.version === \"Unknown\")  ? \"\" : \"(\" + plugin.version + \")\"}`}\n                primaryTypographyProps={{style: {fontSize: '0.95rem'}}}\n                secondary={\n                 <>\n                  <Typography\n                    sx={{ display: 'block', fontStyle: \"italic\" }}\n                    component=\"span\"\n                    variant=\"body2\"\n                    color=\"text.primary\"\n                  >\n                    {plugin.author || \"unknown author\"}\n                  </Typography>\n                  <span>{`${plugin.description === \"Unknown\" ? \"No description provided.\" : plugin.description}`}</span>\n                 </>\n                }\n                style={{maxWidth: \"525px\"}}\n              />\n              <ListItemSecondaryAction sx={{display: {xs: 'contents', md: 'block'}}}>\n                <Button\n                  onClick={uninstallPlugin(plugin.source.startsWith(\"plugins/\") ? plugin.source.slice(8, -3) : plugin.name)}\n                  variant=\"text\"\n                  size=\"small\"\n                  color=\"primary\"\n                  aria-label=\"delete\"\n                  endIcon={<DeleteIcon />}\n                  className={classes.primaryActionButton}\n                >\n                  Uninstall\n                </Button>\n                { !plugin.source.startsWith(\"plugins/\") &&\n                  <Button\n                    component={Link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    to={plugin.homepage}\n                    variant=\"text\"\n                    size=\"small\"\n                    color=\"primary\"\n                    aria-label=\"view homepage\"\n                    disabled={!plugin.homepage || (plugin.homepage === \"Unknown\")}\n                    endIcon={<OpenInNewIcon />}\n                    className={classes.secondaryActionButton}\n                  >\n                    View\n                  </Button>\n                }\n                { plugin.source.startsWith(\"plugins/\") &&\n                  <Button\n                    component={Link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    to={`/api/installed_plugins/${plugin.source.slice(8)}`}\n                    variant=\"text\"\n                    size=\"small\"\n                    color=\"primary\"\n                    aria-label=\"view homepage\"\n                    endIcon={<OpenInNewIcon />}\n                    className={classes.secondaryActionButton}\n                  >\n                    View\n                  </Button>\n                }\n              </ListItemSecondaryAction>\n            </ListItem>,\n          )}\n        </List>\n      </div>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={snackbarOpen}\n        onClose={handleSnackbarClose}\n        message={snackbarMsg}\n        autoHideDuration={7000}\n        key=\"snackbar-installation\"\n      />\n      </React.Fragment>\n    )\n  }\n  else {\n    return (\n      <div style={{textAlign: \"center\", marginBottom: '50px', marginTop: \"50px\"}}>\n        <Typography>\n          <Box fontWeight=\"fontWeightRegular\">\n            No installed plugins. Try installing one below, or read more about <a href=\"https://docs.pioreactor.com/user-guide/using-community-plugins\" target=\"_blank\" rel=\"noopener noreferrer\">Pioreactor plugins</a>.\n          </Box>\n        </Typography>\n      </div>\n  )}\n}\n\n\nfunction PluginContainer(){\n  const classes = useStyles();\n\n  const [installedPlugins, setInstalledPlugins] = React.useState([])\n  const [isFetchComplete, setIsFetchComplete] = React.useState(false)\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/api/installed_plugins\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((json) => {\n          setIsFetchComplete(true)\n          setInstalledPlugins(json)\n        });\n      }\n      getData()\n  }, [])\n\n\n  return(\n    <React.Fragment>\n      <PageHeader/>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <p> Discover, install, and manage Pioreactor plugins created by the community. These plugins can provide new functionalities for your Pioreactor (additional hardware may be necessary), or new automations to control dosing, temperature and LED tasks.</p>\n\n         <Typography variant=\"h6\" component=\"h3\">\n          Installed plugins\n         </Typography>\n\n          {isFetchComplete && (\n           <ListInstalledPlugins installedPlugins={installedPlugins}/>\n          )}\n\n          {!isFetchComplete && (\n            <div style={{textAlign: \"center\", marginBottom: '50px', marginTop: \"50px\"}}>\n              <CircularProgress size={33}/>\n            </div>\n          )}\n\n         <Typography variant=\"h6\" component=\"h3\">\n          Available plugins from the community\n         </Typography>\n          <ListAvailablePlugins alreadyInstalledPluginsNames={installedPlugins.map(plugin => plugin.name)}/>\n\n\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}>Learn more about Pioreactor <a href=\"https://docs.pioreactor.com/user-guide/using-community-plugins\" target=\"_blank\" rel=\"noopener noreferrer\">plugins</a>.</p>\n\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Plugins(props) {\n    React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <PluginContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\n\nexport default Plugins;\n","import React from \"react\";\n\nimport FormControl from '@mui/material/FormControl';\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { makeStyles } from '@mui/styles';\nimport Select from '@mui/material/Select';\nimport {Typography} from '@mui/material';\nimport Box from '@mui/material/Box';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {getConfig} from \"./utilities\"\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport DisplayProfile from \"./components/DisplayProfile\"\nimport DisplaySourceCode from \"./components/DisplaySourceCode\"\nimport CloseIcon from '@mui/icons-material/Close';\nimport CodeIcon from '@mui/icons-material/Code';\nimport {runPioreactorJob} from \"./utilities\"\nimport AddIcon from '@mui/icons-material/Add';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(2),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"},\n  textIcon: {\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\nfunction ExperimentProfilesContent(props) {\n  const classes = useStyles();\n\n  const [experimentProfilesAvailable, setExperimentProfilesAvailable] = React.useState([])\n  const [selectedExperimentProfile, setSelectedExperimentProfile] = React.useState('')\n  const [confirmed, setConfirmed] = React.useState(false)\n  const [viewSource, setViewSource] = React.useState(false)\n  const [source, setSource] = React.useState(\"\")\n\n  React.useEffect(() => {\n    fetch(\"/api/contrib/experiment_profiles\")\n      .then(response => {\n        return response.json();\n      })\n      .then(profiles => {\n        const profilesByKey = profiles.reduce((acc, cur) => ({ ...acc, [cur.file]: cur.experimentProfile}), {})\n        setExperimentProfilesAvailable(profilesByKey)\n        setSelectedExperimentProfile(Object.keys(profilesByKey)[0] ?? \"\")\n      })\n  }, [])\n\n  const onSubmit = () => runPioreactorJob(props.config['cluster.topology']?.leader_hostname, 'experiment_profile', ['execute', selectedExperimentProfile], {}, () => setConfirmed(true))\n\n\n  const onStop = () => {\n    fetch(`/api/stop/${props.config['cluster.topology']?.leader_hostname}/experiment_profile`,{\n          method: \"PATCH\",\n      })\n  }\n\n  const onSelectExperimentProfileChange = (e) => {\n    setSelectedExperimentProfile(e.target.value)\n    setViewSource(false)\n  }\n\n  const getSourceAndView = (e) => {\n    if (!viewSource){\n      fetch(`/api/contrib/experiment_profiles/${selectedExperimentProfile.split('/').pop()}`, {\n            method: \"GET\",\n        }).then(res => {\n          if (res.ok) {\n            return res.text();\n          }\n        }).then(text => {\n          setSource(text)\n        })\n    }\n    setViewSource(!viewSource)\n  }\n\n\n  return (\n      <Grid container spacing={1}>\n        <Grid item xs={6}>\n          <div style={{width: \"100%\", margin: \"10px\", display: \"flex\", justifyContent:\"space-between\"}}>\n            <FormControl style={{minWidth: \"300px\"}}>\n              <InputLabel id=\"profileSelect\" variant=\"standard\">Experiment profile</InputLabel>\n              <Select\n                labelId=\"profileSelect\"\n                variant=\"standard\"\n                value={selectedExperimentProfile}\n                onChange={onSelectExperimentProfileChange}\n                label=\"Experiment profile\"\n              >\n                {Object.keys(experimentProfilesAvailable).map((file) => {\n                  const profile = experimentProfilesAvailable[file]\n                  return <MenuItem key={file} value={file}>{profile.experiment_profile_name} (from {file.split('/').pop()})</MenuItem>\n                  }\n                )}\n              </Select>\n            </FormControl>\n          </div>\n        </Grid>\n        <Grid item xs={3} />\n        <Grid container xs={3} direction=\"column\" alignItems=\"flex-end\">\n          <Grid item xs={6} />\n          <Grid item xs={6} >\n            <Button\n              variant=\"text\"\n              size=\"small\"\n              color=\"primary\"\n              aria-label=\"edit source code\"\n              onClick={getSourceAndView}\n              style={{marginRight: \"10px\", textTransform: \"none\"}}\n              to={`/edit-experiment-profile?profile=${selectedExperimentProfile.split(\"/\").pop()}`}\n              component={Link}\n            >\n              <EditIcon fontSize=\"15\" classes={{root: classes.textIcon}} /> Edit\n            </Button>\n            <Button\n              variant=\"text\"\n              size=\"small\"\n              color=\"primary\"\n              aria-label=\"view source code\"\n              disabled={selectedExperimentProfile === \"\"}\n              onClick={getSourceAndView}\n              style={{marginRight: \"10px\", textTransform: \"none\"}}\n            >\n              <CodeIcon fontSize=\"15\" classes={{root: classes.textIcon}} /> {viewSource ? \"Back to description\": \"View source\"}\n            </Button>\n          </Grid>\n\n        </Grid>\n\n        <Grid item xs={12}>\n          {selectedExperimentProfile !== \"\" && !viewSource &&\n            <DisplayProfile data={experimentProfilesAvailable[selectedExperimentProfile]} />\n          }\n          {selectedExperimentProfile !== \"\" && viewSource &&\n            <DisplaySourceCode sourceCode={source}/>\n          }\n        </Grid>\n        <div style={{display: \"flex\", justifyContent: \"flex-end\"}}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              style={{marginLeft: \"20px\"}}\n              onClick={onSubmit}\n              endIcon={ <PlayArrowIcon /> }\n              disabled={(selectedExperimentProfile === \"\") || confirmed}\n            >\n              Execute\n           </Button>\n          <Button\n            variant=\"text\"\n            color=\"secondary\"\n            style={{marginLeft: \"20px\"}}\n            onClick={onStop}\n            endIcon={ <CloseIcon /> }\n          >\n            Stop\n         </Button>\n        </div>\n      </Grid>\n  );\n}\n\nfunction ProfilesContainer(props){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Experiment Profiles\n            </Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <Button to={`/create-experiment-profile`} component={Link} style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <AddIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Create new profle\n            </Button>\n          </div>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <ExperimentProfilesContent config={props.config}/>\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}>Learn more about <a href=\"https://docs.pioreactor.com/user-guide/experiment-profiles\" target=\"_blank\" rel=\"noopener noreferrer\">experiment profiles</a>.</p>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Profiles(props) {\n    const [config, setConfig] = React.useState({})\n\n    React.useEffect(() => {\n      getConfig(setConfig)\n    }, [])\n\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title]);\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <ProfilesContainer config={config}/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Profiles;\n","import React from \"react\";\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport FormGroup from '@mui/material/FormGroup';\nimport TextField from '@mui/material/TextField';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  halfTextField: {\n    width: \"70%\"\n  },\n}));\n\n\n\nfunction FeedbackContainer(props){\n  const classes = useStyles();\n  const [formError, setFormError] = React.useState(false);\n  const [helperText, setHelperText] = React.useState(\"\");\n  const [email, setEmail] = React.useState(\"\");\n  const [feedback, setFeedback] = React.useState(\"\");\n  const [sending, setSending] = React.useState(false);\n  const [hasBeenSent, setHasBeenSent] = React.useState(false);\n\n  function publishFeedbackToCloud(){\n    setSending(true)\n    fetch(\"https://us-central1-pioreactor-backend.cloudfunctions.net/feedback\", {\n      method:\"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n          email: email,\n          message: feedback\n          })\n      })\n    setSending(false)\n    setHasBeenSent(true)\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (email === \"\"){\n      setFormError(true)\n      setHelperText(\"Can't be blank.\")\n      return\n    }\n    publishFeedbackToCloud()\n  }\n\n  const onEmailChange = (e) => {\n    setFormError(false)\n    setHelperText(\"\")\n    setEmail(e.target.value)\n  }\n  const onFeedbackChange = (e) => {\n    setFeedback(e.target.value)\n  }\n\n  return(\n    <React.Fragment>\n      <div>\n        <Typography variant=\"h5\" component=\"h2\">\n          <Box fontWeight=\"fontWeightBold\">\n            Share feedback\n          </Box>\n        </Typography>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n        <p>\n        Include your email, and we may get back to you with some questions or advice about your provided feedback.\n        We appreciate all feedback sent to us!\n        </p>\n        <FormGroup>\n          <Grid container spacing={1}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                error={formError}\n                id=\"email\"\n                type=\"email\"\n                label=\"Email\"\n                required\n                onChange={onEmailChange}\n                className={`${classes.halfTextField} ${classes.textField}`}\n                value={email}\n                helperText={helperText}\n                />\n            </Grid>\n            <Grid item xs={12} md={12}>\n              <TextField\n                label=\"What went wrong? What went right? What are you unsure about?\"\n                maxRows={4}\n                multiline\n                required\n                onChange={onFeedbackChange}\n                value={feedback}\n                className={classes.textField}\n                minRows={3}\n                fullWidth={true}\n              />\n            </Grid>\n\n            <Grid item xs={12} md={12}>\n              <LoadingButton\n                loading={sending}\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={hasBeenSent}\n                onClick={onSubmit}>\n                {hasBeenSent ? \"Submitted\" : \"Submit\"}\n              </LoadingButton>\n            </Grid>\n          </Grid>\n        </FormGroup>\n\n\n\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Feedback(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title])\n    return (\n        <Grid container spacing={3} >\n          <Grid item md={12} xs={12}>\n            <FeedbackContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Feedback;\n\n","import React from 'react';\nimport { makeStyles } from '@mui/styles';\nimport Drawer from '@mui/material/Drawer';\nimport Badge from '@mui/material/Badge';\nimport Divider from '@mui/material/Divider';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport IconButton from '@mui/material/IconButton';\nimport SaveAltIcon from '@mui/icons-material/SaveAlt';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport TuneIcon from '@mui/icons-material/Tune';\nimport UpdateIcon from '@mui/icons-material/Update';\nimport Toolbar from '@mui/material/Toolbar';\nimport {AppBar, Typography, Button} from '@mui/material';\nimport PioreactorIcon from './PioreactorIcon';\nimport LibraryAddOutlinedIcon from '@mui/icons-material/LibraryAddOutlined';\nimport DashboardOutlinedIcon from '@mui/icons-material/DashboardOutlined';\nimport SettingsOutlinedIcon from '@mui/icons-material/SettingsOutlined';\nimport QueryStatsOutlinedIcon from '@mui/icons-material/QueryStatsOutlined';\nimport InsertChartOutlinedIcon from '@mui/icons-material/InsertChartOutlined';\nimport ViewTimelineOutlinedIcon from '@mui/icons-material/ViewTimelineOutlined';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport ChatOutlinedIcon from '@mui/icons-material/ChatOutlined';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Sidebar, Menu, MenuItem} from \"react-pro-sidebar\";\n\nconst drawerWidth = 230;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  appBarRoot: {\n    [theme.breakpoints.up('sm')]: {\n      zIndex: theme.zIndex.drawer + 1\n    }\n  },\n  listItemIcon: {\n    minWidth: \"40px\"\n  },\n  divider: {\n    marginTop: \"15px\",\n    marginBottom: \"15px\",\n  },\n\n}));\n\n\n\nexport default function SideNavAndHeader() {\n  const classes = useStyles();\n  const location = useLocation()\n\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [version, setVersion] = React.useState(null)\n  const [latestVersion, setLatestVersion] = React.useState(null)\n\n  React.useEffect(() => {\n    async function getCurrentApp() {\n         await fetch(\"/api/versions/app\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setVersion(data)\n        });\n      }\n\n    async function getLatestVersion() {\n         // TODO: what happens when there is not internet connection?\n         await fetch(\"https://api.github.com/repos/pioreactor/pioreactor/releases/latest\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setLatestVersion(data['tag_name'])\n        }).catch(e => {\n          // no internet?\n        });\n      }\n\n      getCurrentApp()\n      getLatestVersion()\n  }, [])\n\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  function isSelected(path) {\n    return (location.pathname === path)\n  }\n\n\n  const list = () => (\n    <Sidebar>\n      <Menu\n          style={{minWidth: \"230px\", width: \"230px\"}}\n          renderExpandIcon={({level, active, disabled}) => null }\n          menuItemStyles={{\n            label:  {whiteSpace: \"pre-wrap\"},\n            button: ({ level, active, disabled }) => {\n              // only apply styles on first level elements of the tree\n              if (level === 0)\n                return {\n                  color: disabled ? '#00000050' : (active ? '#5331ca' : 'inherit'),\n                  backgroundColor: active ? '#5331ca14' : undefined,\n                };\n            },\n            icon: ({level, active, disabled}) => {\n              return {\n                color: disabled ? '#00000050' : (active ? '#5331ca' : '#0000008a'),\n              };\n            }\n          }}\n        >\n        <MenuItem\n          icon={<DashboardOutlinedIcon/>}\n          component={<Link to=\"/overview\" className=\"link\" />}\n          active={(isSelected(\"/\") || isSelected(\"/overview\"))}\n          >\n          Overview\n        </MenuItem>\n\n        <MenuItem\n          icon={<PioreactorIcon viewBox=\"-3 0 24 24\"/>}\n          component={<Link to=\"/pioreactors\" className=\"link\" />}\n          active={isSelected(\"/pioreactors\")}\n          >\n          Pioreactors\n        </MenuItem>\n\n        <MenuItem\n          icon={<ViewTimelineOutlinedIcon/> }\n          component={<Link to=\"/experiment-profiles\" className=\"link\" />}\n          active={isSelected(\"/experiment-profiles\")}\n          >\n          Profiles\n        </MenuItem>\n\n\n        <MenuItem\n          icon={<SettingsOutlinedIcon/> }\n          component={<Link to=\"/config\" className=\"link\" />}\n          active={isSelected(\"/config\")}\n          >\n          Configuration\n\n        </MenuItem>\n\n        <MenuItem\n          icon={<SaveAltIcon/> }\n          component={<Link to=\"/export-data\" className=\"link\" />}\n          active={isSelected(\"/export-data\")}\n          >\n          Export data\n        </MenuItem>\n\n        <MenuItem\n          icon={<InsertChartOutlinedIcon/> }\n          component={<Link to=\"/experiments\" className=\"link\" />}\n          active={isSelected(\"/experiments\")}\n          >\n          Past experiments\n        </MenuItem>\n\n        <MenuItem\n          icon={<QueryStatsOutlinedIcon/> }\n          component={<Link to=\"/analysis\" className=\"link\" />}\n          active={isSelected(\"/analysis\")}\n          disabled={true}\n          >\n          Analysis\n        </MenuItem>\n\n        <MenuItem\n          icon={<TuneIcon/> }\n          component={<Link to=\"/calibrations\" className=\"link\" />}\n          active={isSelected(\"/calibrations\")}\n          disabled={true}\n          >\n          Calibrations\n        </MenuItem>\n\n        <Divider className={classes.divider} />\n\n        <MenuItem\n          icon={<LibraryAddOutlinedIcon/> }\n          component={<Link to=\"/plugins\" className=\"link\" />}\n          active={isSelected(\"/plugins\")}\n          >\n          Plugins\n        </MenuItem>\n\n        <MenuItem\n          icon={\n            <Badge variant=\"dot\" color=\"secondary\" invisible={!((version) && (latestVersion) && (version !== latestVersion))}>\n                <UpdateIcon/>\n            </Badge>\n            }\n          component={<Link to=\"/updates\" className=\"link\" />}\n          active={isSelected(\"/updates\")}\n          >\n          Updates\n        </MenuItem>\n\n\n        <MenuItem\n          icon={<HelpOutlineIcon/> }\n          component={<Link target=\"_blank\" rel=\"noopener noreferrer\" to={{pathname: \"https://docs.pioreactor.com\"}}  className=\"link\" />}\n          suffix={<OpenInNewIcon style={{fontSize:\"15px\", verticalAlign: \"middle\"}}/>}\n          >\n          Help\n        </MenuItem>\n\n\n        <MenuItem\n          icon={<ChatOutlinedIcon/> }\n          component={<Link target=\"_blank\" rel=\"noopener noreferrer\" to={{pathname: \"https://forum.pioreactor.com\"}}  className=\"link\" />}\n          suffix={<OpenInNewIcon style={{fontSize:\"15px\", verticalAlign: \"middle\"}}/>}\n          >\n          Forums\n        </MenuItem>\n\n\n      </Menu>\n    </Sidebar>\n  );\n  return (\n    <React.Fragment>\n      <div className={classes.appBarRoot}>\n        <AppBar position=\"fixed\" >\n          <Toolbar variant=\"dense\">\n\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              onClick={handleDrawerToggle}\n              classes={{root: classes.menuButton}}\n              sx={{ display: { xs: 'block', sm: 'none' } }}\n              size=\"large\">\n              <MenuIcon />\n            </IconButton>\n\n\n            <Typography variant=\"h6\" className={classes.title}>\n              <Link color=\"inherit\" underline=\"none\" to=\"/\" className={classes.title}>\n                <img alt=\"pioreactor logo\" src=\"/white_colour.png\" style={{width: \"120px\", height: \"29px\"}}/> <\n              /Link>\n            </Typography>\n            <Button component={Link} target=\"_blank\" rel=\"noopener noreferrer\" to={{pathname: \"https://docs.pioreactor.com\"}} color=\"inherit\" style={{textTransform: \"none\"}}>\n              Help <HelpOutlineIcon style={{ fontSize: 18, verticalAlign: \"middle\", marginLeft: 5 }}/>\n            </Button>\n          </Toolbar>\n        </AppBar>\n      </div>\n      <Drawer\n        variant=\"temporary\"\n        anchor=\"left\"\n        open={mobileOpen}\n        onClose={handleDrawerToggle}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        ModalProps={{\n          keepMounted: true, // Better open performance on mobile.\n        }}\n        sx={{ display: { xs: 'block', sm: 'none' } }}\n      >\n        {list()}\n      </Drawer>\n      <Drawer\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        variant=\"permanent\"\n        open\n        className={classes.drawer}\n        sx={{ display: { xs: 'none', sm: 'block' } }}\n      >\n        <Toolbar />\n        {list()}\n      </Drawer>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, errorMsg: \"\" };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.log(error);\n    this.setState({errorMsg: error.message})\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n      <React.Fragment>\n        <div style={{maxWidth: 700, margin: \"auto\"}}>\n          <div>\n            <h1>Something went wrong with the PioreactorUI!</h1>\n            <h3>Don't worry. It's our fault. Here's what you can do:</h3>\n            <p> Looks like there's a bug in the UI. See the below for error information. We would appreciate it\n            if you create an issue in <a href=\"https://github.com/Pioreactor/pioreactorui/issues\">Github</a> for us, with the information below.</p>\n          </div>\n          <div>\n            <code>\n            {this.state.errorMsg}\n            </code>\n          </div>\n        </div>\n      </React.Fragment>\n      )\n    }\n\n    return this.props.children; \n  }\n}\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { BrowserRouter as Router, Routes, Route, useLocation } from \"react-router-dom\";\nimport { ThemeProvider, createTheme} from '@mui/material/styles';\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport { StyledEngineProvider } from '@mui/material/styles';\n\n\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport ErrorSnackbar from \"./components/ErrorSnackbar\";\nimport ExperimentOverview from \"./ExperimentOverview\";\nimport ExportData from \"./ExportData\";\nimport Pioreactors from \"./Pioreactors\";\nimport StartNewExperiment from \"./StartNewExperiment\";\nimport CreateExperimentProfile from \"./CreateExperimentProfile\";\nimport EditExperimentProfile from \"./EditExperimentProfile\";\nimport Calibrations from \"./Calibrations\";\nimport EditConfig from \"./EditConfig\";\nimport Updates from \"./Updates\";\nimport Plugins from \"./Plugins\";\nimport Profiles from \"./Profiles\";\n//import Analysis from \"./Analysis\";\nimport Experiments from \"./Experiments\";\nimport Feedback from \"./Feedback\";\nimport SideNavAndHeader from \"./components/SideNavAndHeader\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport { ConfirmProvider } from 'material-ui-confirm';\nimport { ProSidebarProvider } from \"react-pro-sidebar\";\n\nimport \"@fontsource/roboto/300.css\"\nimport \"@fontsource/roboto/400.css\"\nimport \"@fontsource/roboto/500.css\"\nimport \"@fontsource/roboto/700.css\"\nimport './styles.css';\n\nconst theme = createTheme({\n  palette: {\n    background: {\n      default: \"#f6f6f7\",\n    },\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: '#5331CA',\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n    secondary: {\n      main: '#f44336',\n    },\n  },\n});\n\n\nfunction ScrollToTop() {\n  const { pathname } = useLocation();\n\n  React.useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n\n\nfunction App() {\n  return (\n    <React.StrictMode>\n      <StyledEngineProvider injectFirst>\n        <ThemeProvider theme={theme}>\n          <Router>\n            <ProSidebarProvider>\n            <ScrollToTop/>\n            <ConfirmProvider>\n              <CssBaseline />\n              <MainSite />\n            </ConfirmProvider>\n            </ProSidebarProvider>\n          </Router>\n        </ThemeProvider>\n      </StyledEngineProvider>\n    </React.StrictMode>\n  );\n}\n\nfunction MainSite() {\n  return (\n    <div style={{display: 'flex'}}>\n      <ErrorBoundary>\n        <SideNavAndHeader />\n        <main style={{flexGrow: 1, paddingTop: theme.spacing(9), paddingLeft: theme.spacing(4), paddingRight: theme.spacing(4)}}>\n          <div className=\"pageContainer\">\n            <Routes>\n              <Route path=\"/export-data\" element={<ExportData title=\"Pioreactor ~ Export data\"/>}/>\n              <Route path=\"/start-new-experiment\" element={<StartNewExperiment title=\"Pioreactor ~ Start new experiment\" />}/>\n              <Route path=\"/overview\" element={<ExperimentOverview title=\"Pioreactor ~ Overview\"/>}/>\n              <Route path=\"/plugins\" element={<Plugins title=\"Pioreactor ~ Plugins\"/>}/>\n              <Route path=\"/experiments\" element={<Experiments title=\"Pioreactor ~ Past experiments\"/>}/>\n              <Route path=\"/experiment-profiles\" element={<Profiles title=\"Pioreactor ~ Experiment profiles\"/>}/>\n              <Route path=\"/create-experiment-profile\" element={<CreateExperimentProfile title=\"Pioreactor ~ Create experiment profile\"/>}/>\n              <Route path=\"/edit-experiment-profile\" element={<EditExperimentProfile title=\"Pioreactor ~ Edit experiment profile\"/>}/>\n              <Route path=\"/config\" element={<EditConfig title=\"Pioreactor ~ Configuration\"/>}/>\n              <Route path=\"/pioreactors\" element={ <Pioreactors title=\"Pioreactor ~ Pioreactors\"/>}/>\n              <Route path=\"/updates\" element={<Updates title=\"Pioreactor ~ Updates\"/>}/>\n              <Route path=\"/feedback\" element={<Feedback title=\"Pioreactor ~ Feedback\"/>}/>\n              <Route path=\"/calibrations\" element={<Calibrations title=\"Pioreactor ~ Calibrations\"/>}/>\n              <Route path=\"/\" element={<ExperimentOverview title=\"Pioreactor ~ Overview\"/>}/>\n            </Routes>\n            <ErrorSnackbar />\n            <TactileButtonNotification />\n          </div>\n        </main>\n      </ErrorBoundary>\n    </div>\n)}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./styles.css\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react'\n\nimport SvgIcon from '@mui/material/SvgIcon';\n\n\nfunction PioreactorIcon(props) {\n  return (\n    <SvgIcon {...props} >\n        <g id=\"PioreactorIcon1\" stroke=\"none\" strokeWidth=\"1\" fill={props.fillColor || \"none\"} fillRule=\"evenodd\">\n            <g id=\"PioreactorIcon2\" transform=\"translate(-728.000000, -1502.000000)\" stroke=\"currentColor\" strokeWidth=\"1.8\">\n                <g id=\"PioreactorIcon3\" transform=\"translate(729.000000, 1503.000000)\">\n                    <path d=\"M1.4,18.9 L1.4,14.7 L0,14.7 L0,11.2 L2.799,11.2 L2.8,0 L14,0 L13.999,11.2 L16.8,11.2 L16.8,14.7 L15.399,14.7 L15.4,18.9 L1.4,18.9 Z\" id=\"Combined-Shape\"></path>\n                    <circle id=\"Oval\" cx=\"8.4\" cy=\"13.3\" r=\"2.1\"></circle>\n                </g>\n            </g>\n        </g>\n    </SvgIcon>\n  );\n}\n\nexport default PioreactorIcon;\n"],"sourceRoot":""}
