{"version":3,"sources":["components/TactileButtonNotification.jsx","components/ErrorSnackbar.jsx","components/LogTable.jsx","components/ExperimentSummary.jsx","components/Chart.jsx","components/PioreactorIcon.jsx","components/UnderlineSpan.jsx","components/MediaCard.jsx","ExperimentOverview.jsx","ExportData.jsx","components/AutomationForm.jsx","components/ChangeAutomationsDialog.jsx","components/ActionDosingForm.jsx","components/ActionLEDForm.jsx","Pioreactors.jsx","PioreactorUnit.jsx","components/StartSensors.jsx","components/StartCalculations.jsx","StartNewExperiment.jsx","EditConfig.jsx","Updates.jsx","Plugins.jsx","Analysis.jsx","Feedback.jsx","components/SideNavAndHeader.jsx","components/ErrorBoundary.jsx","App.jsx","utilities.js","serviceWorker.js","index.js"],"names":["TactileButtonNotification","props","React","useState","unit","setUnit","renamedUnit","setRenamedUnit","open","setOpen","useEffect","config","client","remote","ws_url","Client","Math","random","connect","onSuccess","subscribe","join","qos","timeout","reconnect","onMessageArrived","msg","payloadString","topic","split","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","key","transitionDuration","enter","Alert","severity","variant","icon","AlertTitle","style","fontSize","ErrorSnackbar","setMsg","level","setLevel","task","setTask","handleClose","event","reason","message","payload","JSON","parse","endsWith","maxWidth","toLowerCase","whiteSpace","levelMappingToOrdinal","NOTSET","DEBUG","INFO","WARNING","ERROR","CRITICAL","LogTable","state","listOfLogs","onConnect","bind","a","this","experiment","fetch","encodeURIComponent","URLSearchParams","min_level","logging","ui_log_level","then","response","json","data","setState","catch","e","console","log","getData","prevProps","length","pop","unshift","timestamp","moment","utc","format","pioreactor_unit","String","is_error","is_warning","name","classes","Card","CardContent","Typography","component","Box","fontWeight","TableContainer","height","width","overflowY","Table","stickyHeader","size","aria-label","TableHead","TableRow","TableCell","className","clsx","headerCell","TableBody","map","i","tightCell","smallText","errorLog","warningLog","title","local","renameUnit","replace","Component","withStyles","theme","padding","backgroundColor","tightRight","textAlign","useStyles","makeStyles","cardContent","pos","marginBottom","textIcon","verticalAlign","margin","headerMenu","display","justifyContent","breakpoints","down","flexFlow","flexDirection","headerButtons","EditableDescription","saveToDatabaseOrSkip","recentChange","setTimeout","method","body","stringify","description","desc","headers","res","status","savingLoopActive","onFocus","evt","target","scrollHeight","handleChange","value","render","InputBase","placeholder","multiline","fullWidth","onChange","border","fontFamily","overflow","contentEditable","createRef","ButtonConfirmNewExperimentDialog","Fragment","Button","textTransform","float","color","onClick","root","Dialog","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","href","autoFocus","ButtonConfirmStopProcessDialog","ExperimentSummary","experimentMetadata","startedAt","deltaHours","delta_hours","marginRight","Divider","colors","primary","colorMaps","getColorFromName","sensorRe","test","match","newPallete","shift","Chart","createToolTip","d","datum","x","renameAndFormatSeries","childName","round","yTransformation","y","fixedDecimals","seriesMap","hiddenSeries","Set","names","legendEvents","fetched","selectLegendData","selectVictoryLines","dataSource","filter_mod_N","max","floor","min","lookback","initialSeriesMap","entries","v","item","Object","keys","createLegendEvents","forceUpdate","set","delete","eventHandlers","_","eventKey","mutation","has","prevState","deleteAndReturnSet","add","retained","parseFloat","payloadKey","isODReading","push","newSeriesMap","error","string","slice","results","index","sensor","breakString","reformattedName","symbol","fill","marker","interpolation","labels","stroke","strokeWidth","parent","maxHeight","domainPadding","left","right","bottom","top","events","scale","VictoryTheme","material","containerComponent","responsive","voronoiBlacklist","labelComponent","cornerRadius","flyoutStyle","text","textAnchor","tickLabels","offsetY","orientation","crossAxis","dependentAxis","domain","yAxisDomain","tickFormat","t","toFixed","label","yAxisLabel","axisLabelComponent","dy","symbolSpacer","itemsPerRow","borderPadding","cursor","gutter","rowGutter","PioreactorIcon","SvgIcon","fillColor","fillRule","transform","cx","cy","r","UnderlineSpan","underlineSpan","children","MediaCard","mediaThroughputPerUnit","altMediaThroughputPerUnit","mediaThroughput","altMediaThroughput","rates","all","mediaRate","altMediaRate","activeUnits","getRecentRates","filter","hash","object","hasOwnProperty","topicParts","destinationName","objectRef","totalRef","addOrUpdate","total","values","reduce","b","align","scope","getRenameIfAvailable","Overview","setExperimentMetadata","document","Grid","container","spacing","xs","md","marginTop","formControl","caption","marginLeft","ExperimentSelection","experiments","setExperiments","FormControl","Select","native","inputProps","CheckboxesGroup","FormLabel","FormGroup","FormControlLabel","control","Checkbox","checked","isChecked","growth_rates","gutterBottom","od_readings_raw","od_readings_filtered","temperature_readings","alt_media_fraction","dosing_events","dosing_automation_settings","led_events","led_automation_settings","temperature_automation_settings","kalman_filter_outputs","stirring_rates","logs","ExportDataContainer","isRunning","setIsRunning","isError","setIsError","errorMsg","setErrorMsg","experimentSelection","datasetCheckbox","errorFeedbackOrDefault","LoadingButton","type","loading","preventDefault","some","link","createElement","filename","setAttribute","appendChild","click","remove","rel","ExportData","textFieldCompact","AutomationForm","defaults","assign","fields","field","default","updateParent","onSettingsChange","listOfTextField","TextField","defaultValue","InputProps","endAdornment","InputAdornment","position","onKeyPress","unitTitle","unitTitleDialog","suptitle","defaultAutomations","temperature","dosing","led","ChangeAutomationsDialog","automationType","automationTypeForDisplay","automation_name","skip_first_run","algoSettings","setAlgoSettings","setClient","automations","setAutomations","openSnackbar","setOpenSnackbar","ok","Error","listOfAuto","auto","onFinished","PaperProps","IconButton","sx","palette","grey","no_skip_first_run","display_name","setting","isJobRunning","Message","publish","actionTextField","actionForm","actionToAct","ActionPumpForm","mL","setML","duration","setDuration","isMLDisabled","setIsMLDisabled","isDurationDisabled","setIsDurationDisabled","snackbarMsg","setSnackbarMsg","formErrorDuration","setFormErrorDuration","formErrorML","setFormErrorML","action","disabled","params","ml","source_of_event","continuously","ActionLEDForm","intensity","setIntensity","errorForm","setErrorForm","channel","pioreactorCard","disabledText","textbox","textboxLabel","footnote","textField","textFieldWide","slider","divider","jobButton","paddingRight","paddingLeft","unitSettingsSubtext","unitSettingsSubtextEmpty","minHeight","ledBlock","rowOfUnitSettingDisplay","flexWrap","alignItems","alignContent","testingListItemIcon","minWidth","testingListItem","paddingTop","paddingBottom","cardHeaderSettings","cardHeaderButtons","TabPanel","other","role","hidden","UnitSettingDisplaySubtext","subtext","UnitSettingDisplay","stateDisplay","prettyPrint","isStateSetting","isUnitActive","displaySettings","isLEDIntensity","ledIntensities","LEDMap","renamedA","renamedB","renamedC","renamedD","precision","measurementUnit","AddNewPioreactor","snackbarOpen","setSnackbarOpen","setName","runningFeedback","CircularProgress","required","startAdornment","newPioreactorName","PioreactorHeader","SettingsActionsDialogAll","PatientButton","buttonText","setButtonText","disableElevation","CalibrateDialog","tabValue","setTabValue","startPioreactorJob","job","createUserButtonsBasedOnState","jobState","blankODButton","odBlankJobState","stirringCalibrationButton","stirringCalibrationState","Tabs","newValue","indicatorColor","textColor","Tab","odBlankReading","k","SelfTestDialog","displayIcon","selfTestTests","colorOfIcon","selfTestButton","selfTestState","List","subheader","ListSubheader","lineHeight","disableSticky","disableGutters","ListItem","ListItemIcon","ListItemText","secondary","led_pd","SettingsActionsDialog","snackbarMessage","setSnackbarMessage","openChangeDosingDialog","setOpenChangeDosingDialog","openChangeLEDDialog","setOpenChangeLEDDialog","openChangeTemperatureDialog","setOpenChangeTemperatureDialog","setPioreactorJobState","setPioreactorJobAttr","stopPioreactorJob","job_attr","buttons","fromEntries","jobs","job_key","isLargeScreen","useMediaQuery","dosingControlJob","dosing_control","ledControlJob","led_control","temperatureControlJob","temperature_control","scrollButtons","allowScrollButtonsMobile","metadata","includes","source","dangerouslySetInnerHTML","__html","resumeHideDuration","setJobs","listOfJobs","jobs_","metaData_","job_name","prev","sendMessage","setPioreactorJobAttrOnEnter","backgroundImage","ActiveUnits","units","PioreactorCard","FlashLEDButton","flashing","setFlashing","blinkled","fetchComplete","setFetchComplete","monitor","is_testing","parsedFloat","isNaN","experimentName","indicatorDotColor","indicatorDotShadow","getIndicatorDotShadow","indicatorLabel","isActive","getInicatorLabel","sm","Tooltip","placement","boxShadow","mean","InactiveUnits","Pioreactors","PioreactorUnit","useParams","StartHeating","isClicked","setIsClicked","StartStirring","StartODReading","StartSensors","direction","fontScale","StartGrowthRate","StartCalculations","setExperiment","deltaHour","button","instructions","halfTextField","ExperimentSummaryForm","formError","setFormError","helperText","setHelperText","expName","setExpName","setTimestamp","setDescription","InputLabelProps","shrink","maxRows","trim","toISOString","publishExpNameToMQTT","handleNext","StartNewExperimentContainer","activeStep","setActiveStep","skipped","setSkipped","isStepOptional","steps","optional","isStepSkipped","step","window","location","newSkipped","prevActiveStep","scrollTo","content","Stepper","stepProps","labelProps","completed","Step","StepLabel","prevSkipped","StartNewExperiment","EditableCodeDiv","onSelectionChange","getConfig","getCodeFlaskRef","codeFlask","onTextChange","code","hasChangedSinceSave","handleSnackbarClose","availableConfigs","saveCurrentCode","deleteConfig","reload","getListOfConfigFiles","letterSpacing","editorRef","language","EditConfigContainer","EditConfig","ConfirmDialog","PageHeader","version","setVersion","latestVersion","setLatestVersion","getCurrentAppVersion","getLatestAppVersion","Link","underline","ChangelogContainer","changelog","setChangelog","markdown","Updates","pluginList","secondaryActionButton","ListAvailablePlugins","alreadyInstalledPluginsNames","availablePlugins","setAvailablePlugins","dense","plugin","ListItemAvatar","Avatar","ListItemSecondaryAction","plugin_name","endIcon","homepage","ListInstalledPlugins","installedPlugins","PluginContainer","setInstalledPlugins","Plugins","Analysis","setExperimentSelection","FeedbackContainer","email","setEmail","feedback","setFeedback","sending","setSending","hasBeenSent","setHasBeenSent","minRows","Feedback","drawer","up","flexShrink","menuButton","drawerPaper","flexGrow","appBarRoot","zIndex","listItemIcon","SideNavAndHeader","mobileOpen","setMobileOpen","getCurrentApp","getLatestVersion","handleDrawerToggle","isSelected","path","pathname","helpNode","list","drawerContainer","selected","primaryTypographyProps","Badge","invisible","AppBar","Toolbar","edge","alt","src","Drawer","anchor","paper","ModalProps","keepMounted","ErrorBoundary","hasError","errorInfo","createTheme","background","main","MainSite","setConfig","regex","section","param","comment","lines","forEach","line","parseINIString","ExperimentOverview","exact","App","StrictMode","StyledEngineProvider","injectFirst","ThemeProvider","CssBaseline","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2910dcde.chunk.js","sourcesContent":["import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport Alert from '@mui/material/Alert';\nimport AlertTitle from '@mui/material/AlertTitle';\n\nimport Snackbar from '@mui/material/Snackbar';\n\nfunction TactileButtonNotification(props) {\n  var [unit, setUnit] = React.useState(\"\")\n  var [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  var [open, setOpen] = React.useState(false)\n\n  React.useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    const onMessageArrived = (msg) => {\n      if (msg.payloadString === \"1\"){\n        var unit = msg.topic.split(\"/\")[1]\n        setUnit(unit)\n        try {\n          setRenamedUnit(props.config['ui.rename'][unit])\n        }\n        catch {}\n        setOpen(true)\n      }\n      else {\n        setOpen(false)\n      }\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"$experiment\",\n        \"monitor\",\n        \"button_down\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_TactileButtonNotification\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_TactileButtonNotification\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: onSuccess, timeout: 180, reconnect: true});\n    client.onMessageArrived = onMessageArrived;\n\n  },[props.config])\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={null}\n      onClose={() => {}}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      key={\"button-tactile-snackbar\"}\n      transitionDuration={{enter: 10}}\n    >\n    <Alert severity=\"info\" variant=\"filled\" icon={false}>\n      <AlertTitle style={{fontSize: 25}}>{unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      Holding <b>{unit}</b>'s button down\n    </Alert>\n    </Snackbar>\n)}\n\nexport default TactileButtonNotification;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport Alert from '@mui/material/Alert';\nimport AlertTitle from '@mui/material/AlertTitle';\n\nimport Snackbar from '@mui/material/Snackbar';\n\nfunction ErrorSnackbar(props) {\n  var [open, setOpen] = React.useState(false)\n  var [renamedUnit, setRenamedUnit] = React.useState(\"\")\n  var [unit, setUnit] = React.useState(\"\")\n  var [msg, setMsg] = React.useState(\"\")\n  var [level, setLevel] = React.useState(\"error\")\n  var [task, setTask] = React.useState(\"\")\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  React.useEffect(() => {\n    if (!props.config['network.topology']){\n      return\n    }\n\n    const onMessageArrived = (message) => {\n      const payload = JSON.parse(message.payloadString)\n\n      if ((payload.level === \"ERROR\" || payload.level === \"WARNING\") && (!message.topic.endsWith(\"/ui\"))){\n        const unit = message.topic.split(\"/\")[1]\n        try {\n          setRenamedUnit(props.config['ui.rename'][unit])\n        }\n        catch {}\n        setMsg(payload.message)\n        setTask(payload.task)\n        setLevel(payload.level)\n        setUnit(unit)\n        setOpen(true)\n      }\n\n    }\n\n    const onSuccess = () => {\n      client.subscribe(\n      [\n        \"pioreactor\",\n        \"+\",\n        \"+\",\n        \"logs\",\n        \"+\"\n      ].join(\"/\"),\n      { qos: 1 }\n      )\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_ErrorSnackbarNotification\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_ErrorSnackbarNotification\" + Math.random()\n      );\n    }\n    client.connect({onSuccess: onSuccess, timeout: 180, reconnect: true});\n    client.onMessageArrived = onMessageArrived;\n\n  },[props.config])\n\n  return (\n    <Snackbar\n      open={open}\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}\n      key={\"error-snackbar\"}\n      autoHideDuration={11000}\n      style={{maxWidth: \"500px\"}}\n      onClose={handleClose}\n    >\n    <Alert variant=\"standard\" severity={level.toLowerCase()} onClose={handleClose}>\n      <AlertTitle style={{fontSize: 15}}>{task} encountered the following {level.toLowerCase()} in {unit + (renamedUnit ? \" / \" + renamedUnit : \"\")}</AlertTitle>\n      <span style={{whiteSpace: 'pre-wrap'}}>{msg}</span>\n    </Alert>\n    </Snackbar>\n)}\n\nexport default ErrorSnackbar;\n","import React from 'react'\n\nimport clsx from 'clsx';\nimport {Client} from 'paho-mqtt';\nimport moment from 'moment';\n\n\nimport {withStyles} from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"6px 10px 6px 10px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n  errorLog: {\n    backgroundColor: \"#ff7961\"\n  },\n  warningLog: {\n    backgroundColor: \"#FFEA8A\"\n  }\n});\n\nconst levelMappingToOrdinal = {\n  NOTSET: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARNING: 3,\n  ERROR: 4,\n  CRITICAL: 5\n}\n\n\nclass LogTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {listOfLogs: []};\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getData() {\n    if (!this.props.experiment){\n      return\n    }\n    await fetch(\"/recent_logs/\" + encodeURIComponent(this.props.experiment) + \"?\" + new URLSearchParams({\n        min_level: this.props.config.logging.ui_log_level\n      }))\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        this.setState({listOfLogs: data});\n      }).catch((e) => {\n        console.log(e)\n      });\n  }\n\n  componentDidMount() {\n    this.getData()\n    if (this.props.config.remote && this.props.config.remote.ws_url) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_LogTable\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_LogTable\" + Math.random()\n      );\n    }\n    this.client.connect({timeout: 180, 'onSuccess': this.onConnect, reconnect: true});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getData()\n     }\n  }\n\n  onConnect() {\n    this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"logs\", \"+\"].join(\"/\"))\n    this.client.subscribe([\"pioreactor\", \"+\", \"$experiment\",         \"logs\", \"+\"].join(\"/\"))\n  }\n\n  onMessageArrived(message) {\n    if (this.state.listOfLogs.length > 50){\n      this.state.listOfLogs.pop()\n    }\n    const unit = message.topic.split(\"/\")[1]\n    const payload = JSON.parse(message.payloadString)\n\n    if (levelMappingToOrdinal[payload.level] < levelMappingToOrdinal[this.props.config.logging.ui_log_level]){\n      return\n    }\n\n    this.state.listOfLogs.unshift(\n      {timestamp: moment.utc().format('YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]'), pioreactor_unit: unit, message: String(payload.message), task: payload.task, is_error: (payload.level === \"ERROR\"), is_warning: (payload.level === \"WARNING\")}\n    )\n    this.setState({\n      listOfLogs: this.state.listOfLogs\n    });\n  }\n\n  renameUnit(name){\n    if (!this.props.config['ui.rename']){\n      return name\n    }\n    return (this.props.config['ui.rename'][name]) || name\n  }\n\n  render(){\n    const { classes } = this.props;\n    return (\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" component=\"h2\">\n            <Box fontWeight=\"fontWeightRegular\">\n              Recent event logs\n            </Box>\n          </Typography>\n          <TableContainer style={{ height: \"700px\", width: \"100%\", overflowY: \"scroll\"}}>\n            <Table stickyHeader size=\"small\" aria-label=\"log table\">\n               <TableHead>\n                <TableRow>\n                  <TableCell className={clsx(classes.headerCell)}>Time</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Pioreactor</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Source</TableCell>\n                  <TableCell className={clsx(classes.headerCell)}>Message</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {this.state.listOfLogs.map((log, i) => (\n                  <TableRow key={i}>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}>\n                      <span title={moment.utc(log.timestamp, 'YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]').local().format('YYYY-MM-DD HH:mm:ss.SS')}>{moment.utc(log.timestamp, 'YYYY-MM-DD[T]HH:mm:ss.SSSSS[Z]').local().format('HH:mm:ss')} </span>\n                    </TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}> {this.renameUnit(log.pioreactor_unit)}</TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}>{log.task.replace(/_/g, ' ')}</TableCell>\n                    <TableCell className={clsx(classes.tightCell, classes.smallText, {[classes.errorLog]: log.is_error, [classes.warningLog]: log.is_warning})}>{log.message}</TableCell>\n                  </TableRow>\n                  ))\n                }\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n    );}\n}\n\n\n\nexport default withStyles(useStyles)(LogTable);\n","import React from 'react'\nimport moment from \"moment\";\nimport Card from '@mui/material/Card';\nimport {makeStyles} from '@mui/styles';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Box from '@mui/material/Box';\nimport InputBase from '@mui/material/InputBase';\nimport Divider from '@mui/material/Divider';\nimport Button from '@mui/material/Button';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport TimelapseIcon from '@mui/icons-material/Timelapse';\nimport GetAppIcon from '@mui/icons-material/GetApp';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport AddIcon from '@mui/icons-material/Add';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContentText from '@mui/material/DialogContentText';\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"}\n}));\n\n\n\nclass EditableDescription extends React.Component {\n  constructor(props) {\n    super(props)\n    this.contentEditable = React.createRef();\n    this.state = {\n      desc: \"\",\n      recentChange: false,\n      savingLoopActive: false\n    };\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.description !== prevProps.description) {\n      this.setState({desc: this.props.description})\n    }\n  }\n\n  saveToDatabaseOrSkip = () => {\n    if (this.state.recentChange) {\n      this.setState({recentChange: false})\n      setTimeout(this.saveToDatabaseOrSkip, 150)\n    } else {\n      fetch('update_experiment_desc', {\n          method: \"POST\",\n          body: JSON.stringify({experiment : this.props.experiment, description: this.state.desc}),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(res => {\n          if (res.status !== 200){\n            console.log(\"Didn't save successfully.\")\n          }\n        })\n        this.setState({savingLoopActive: false})\n      }\n  }\n\n  onFocus = evt => {\n    evt.target.style.height = evt.target.scrollHeight + 'px'\n  }\n\n  handleChange = evt => {\n    evt.target.style.height = evt.target.scrollHeight + 'px'\n    this.setState({desc: evt.target.value});\n    this.setState({recentChange: true})\n    if (this.state.savingLoopActive){\n      return\n    }\n    else {\n      this.setState({savingLoopActive: true})\n      setTimeout(this.saveToDatabaseOrSkip, 150)\n    }\n  };\n\n\n  render = () => {\n    return (\n      <div style={{padding: \"0px 5px 0px 5px\"}}>\n        <Box fontWeight=\"fontWeightBold\">\n          Description:\n        </Box>\n          <InputBase\n            placeholder={\"Provide a description of your experiment.\"}\n            multiline\n            fullWidth={true}\n            onChange={this.handleChange}\n            value={this.state.desc}\n            style={{padding: \"3px 3px 3px 2px\", border: \"none\", fontSize: \"14px\", fontFamily: \"Roboto\", width: \"100%\", overflow: \"hidden\"}}\n          />\n      </div>\n    )\n  };\n};\n\n\nfunction ButtonConfirmNewExperimentDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\"}} color=\"primary\" onClick={handleClickOpen}>\n        <AddIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> New experiment\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">Starting a new experiment</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Starting a new experiment will stop data collection for the current experiment. Do you wish to proceed?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button href=\"/start-new-experiment\" color=\"primary\">\n            Confirm\n          </Button>\n          <Button onClick={handleClose} color=\"secondary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n\nfunction ButtonConfirmStopProcessDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const onConfirm = () => {\n    fetch(\"/stop_all\", {method: \"POST\"})\n    handleClose()\n  }\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\"}} color=\"primary\" onClick={handleClickOpen}>\n        <ClearIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> End experiment\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"End experiment?\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            This will halt all activies (stirring, dosing, optical density reading, etc.) in all Pioreactor units. You can manually start them again later. Do you wish to end the experiment?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onConfirm} color=\"primary\">\n            Confirm\n          </Button>\n          <Button onClick={handleClose} color=\"secondary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n\n\nfunction ExperimentSummary(props){\n  const classes = useStyles();\n  const experiment = props.experimentMetadata.experiment || \"\"\n  const startedAt = props.experimentMetadata.timestamp || moment()\n  const desc = props.experimentMetadata.description || \"\"\n  const deltaHours = props.experimentMetadata.delta_hours || 0\n\n  return(\n    <React.Fragment>\n      <div>\n        <div className={classes.headerMenu}>\n          <Typography variant=\"h5\" component=\"h1\">\n            <Box fontWeight=\"fontWeightBold\">{experiment}</Box>\n          </Typography>\n          <div className={classes.headerButtons}>\n            <ButtonConfirmNewExperimentDialog/>\n            <ButtonConfirmStopProcessDialog/>\n            <Button href=\"/export-data\" style={{textTransform: 'none', marginRight: \"0px\", float: \"right\"}} color=\"primary\">\n              <GetAppIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Export experiment data\n            </Button>\n          </div>\n        </div>\n\n        <Divider/>\n        <Typography variant=\"subtitle2\">\n          <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n            <CalendarTodayIcon style={{ fontSize: 12, verticalAlign: \"middle\" }}/> Experiment started:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n            <span title={moment(startedAt).format(\"YYYY-MM-DD HH:mm:ss\")}>{moment(startedAt).format(\"dddd, MMMM D, YYYY\")}</span>\n          </Box>\n          <Box fontWeight=\"fontWeightBold\" style={{display:\"inline-block\", margin: \"10px 2px 10px 0px\"}}>\n            <TimelapseIcon style={{ fontSize: 12, verticalAlign: \"middle\"  }}/>Time elapsed:\n          </Box>\n          <Box fontWeight=\"fontWeightRegular\" style={{display:\"inline-block\"}}>\n           {deltaHours}h\n          </Box>\n        </Typography>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <EditableDescription experiment={experiment} description={desc} />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n  )\n}\n\n\nexport default ExperimentSummary;\n","import React from \"react\";\nimport { Client } from \"paho-mqtt\";\nimport {\n  VictoryChart,\n  VictoryLabel,\n  VictoryAxis,\n  VictoryTheme,\n  VictoryLine,\n  VictoryScatter,\n  VictoryGroup,\n  VictoryLegend,\n  VictoryTooltip,\n  VictoryVoronoiContainer,\n} from \"victory\";\nimport moment from \"moment\";\nimport Card from \"@mui/material/Card\";\n\nconst colors = [\n  {primary: \"#0077BB\", \"1\": \"#0077BB\", \"2\": \"#0077BB\"},\n  {primary: \"#009988\", \"1\": \"#009988\", \"2\": \"#009988\"},\n  {primary: \"#CC3311\", \"1\": \"#CC3311\", \"2\": \"#CC3311\"},\n  {primary: \"#33BBEE\", \"1\": \"#33BBEE\", \"2\": \"#33BBEE\"},\n  {primary: \"#EE7733\", \"1\": \"#EE7733\", \"2\": \"#EE7733\"},\n  {primary: \"#EE3377\", \"1\": \"#EE3377\", \"2\": \"#EE3377\"},\n  {primary: \"#BBBBBB\", \"1\": \"#BBBBBB\", \"2\": \"#BBBBBB\"},\n];\n\nconst colorMaps = {}\n\nfunction getColorFromName(name){\n  if (name in colorMaps){\n    return colorMaps[name]\n  }\n\n  let sensorRe = /(.*)-[1234]/;\n  if (sensorRe.test(name)){\n    let primaryName = name.match(sensorRe)[1]\n    return getColorFromName(primaryName)\n  }\n  else{\n    var newPallete = colors.shift()\n    colorMaps[name] = newPallete.primary\n    colorMaps[name + \"-1\"] = newPallete[\"1\"]\n    colorMaps[name + \"-2\"] = newPallete[\"2\"]\n    colorMaps[name + \"-3\"] = newPallete[\"3\"]\n    colorMaps[name + \"-4\"] = newPallete[\"4\"]\n    return getColorFromName(name)\n  }\n}\n\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seriesMap: {},\n      hiddenSeries: new Set(),\n      names: [],\n      legendEvents: [],\n      fetched: false,\n    };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n    this.selectLegendData = this.selectLegendData.bind(this);\n    this.selectVictoryLines = this.selectVictoryLines.bind(this);\n    this.yTransformation = this.props.yTransformation || ((y) => y)\n\n  }\n\n  onConnect() {\n    this.client.subscribe(\n      [\"pioreactor\", \"+\", this.props.experiment, this.props.topic].join(\"/\")\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getData()\n     }\n  }\n\n  componentDidMount() {\n    this.getData()\n\n    if (!this.props.config || !this.props.config['network.topology']){\n      return\n    }\n\n    if (this.props.config.remote && this.props.config.remote.ws_url) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_Chart\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_Chart\" + Math.random()\n      );\n    }\n\n    this.client.connect({ onSuccess: this.onConnect, reconnect: true});\n    this.client.onMessageArrived = this.onMessageArrived;\n  }\n\n  async getData() {\n    if (!this.props.experiment){\n      return\n    }\n    const tweak = 0.60 // increase to filter more\n    await fetch(\"/time_series/\" + this.props.dataSource + \"/\" + this.props.experiment + \"?\" + new URLSearchParams({\n        filter_mod_N: Math.max(Math.floor(tweak * Math.min(this.props.deltaHours, this.props.lookback)), 1),\n        lookback: this.props.lookback\n      }))\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        let initialSeriesMap = {};\n        for (const [i, v] of data[\"series\"].entries()) {\n          if (data[\"data\"][i].length > 0) {\n            initialSeriesMap[v] = {\n              data: (data[\"data\"][i]).map(item => ({y: item.y, x: moment.utc(item.x, 'YYYY-MM-DDTHH:mm:ss.SSSSS').local()})),\n              name: v,\n              color: getColorFromName(v),\n            };\n          }\n        }\n        let names = Object.keys(initialSeriesMap);\n        this.setState({\n          seriesMap: initialSeriesMap,\n          legendEvents: this.createLegendEvents(),\n          names: names,\n          fetched: true\n        });\n      })\n      .catch((e) => {\n        console.log(e)\n        this.setState({fetched: true})\n      });\n      this.forceUpdate()\n\n  }\n\n  deleteAndReturnSet(set, value){\n    set.delete(value)\n    return set\n  }\n\n  createLegendEvents() {\n    return [{\n      childName: \"legend\",\n      target: \"data\",\n      eventHandlers: {\n        onClick: (_, props) => {\n          return [\n            {\n              childName: props.datum.name,\n              target: \"data\",\n              eventKey: \"all\",\n              mutation: () => {\n                if (!this.state.hiddenSeries.has(props.datum.name)) {\n                  // Was not already hidden => add to set\n                  this.setState((prevState) => ({\n                    hiddenSeries: prevState.hiddenSeries.add(props.datum.name)\n                  }));\n                } else {\n                  // remove from set\n                  this.setState((prevState) => ({\n                    hiddenSeries: this.deleteAndReturnSet(prevState.hiddenSeries, props.datum.name)\n                  }));\n                }\n                return null;\n              },\n            },\n          ];\n        },\n      },\n    }]\n  }\n\n  onMessageArrived(message) {\n    if (!this.state.fetched){\n      return\n    }\n    if (message.retained){\n      return\n    }\n\n    if (!message.payloadString){\n      return\n    }\n\n    const payload = JSON.parse(message.payloadString)\n    const timestamp = moment.utc(payload.timestamp).local()\n    const value = parseFloat(payload[this.props.payloadKey])\n\n\n    var key = this.props.isODReading //TODO: change this variable name, something like: IsPartitionedBySensor\n      ? message.topic.split(\"/\")[1] + \"-\" + message.topic.split(\"/\")[5]\n      : message.topic.split(\"/\")[1];\n\n    try {\n      if (!(key in this.state.seriesMap)){\n        const newSeriesMap = {...this.state.seriesMap, [key]:  {\n          data: [{x: timestamp, y: value}],\n          name: key,\n          color: getColorFromName(key)\n        }}\n\n        this.setState({ seriesMap: newSeriesMap })\n        this.setState({\n          names: [...this.state.names, key]\n        })\n      } else {\n        // .push seems like bad state management, and maybe a hit to performance...\n        this.state.seriesMap[key].data.push({\n          x: timestamp,\n          y: value,\n        });\n        this.setState({ seriesMap: this.state.seriesMap })\n      }\n    }\n    catch (error) {\n      console.log(error)\n    }\n    return;\n  }\n\n  breakString(string){\n    if (string.length > 12){\n      return string.slice(0, 5) + \"...\" + string.slice(string.length-2, string.length)\n    }\n    return string\n  }\n\n  renameAndFormatSeries(name){\n    if (!this.props.config || !this.props.config['ui.rename']){\n      return name\n    }\n\n    if (name.match(/(.*)-([1234])/g)){\n      const results = name.match(/(.*)-([1234])/);\n      const index = results[1];\n      const sensor = results[2];\n      return this.breakString(this.props.config['ui.rename'][index] || index) + \"-ch\" + sensor\n    }\n    else {\n      return this.breakString(this.props.config['ui.rename'][name] || name)\n    }\n  }\n\n\n\n  createToolTip = (d) => {\n      return `${d.datum.x.format(\"MMM DD HH:mm\")}\n${this.renameAndFormatSeries(d.datum.childName)}: ${Math.round(this.yTransformation(d.datum.y) * 10 ** this.props.fixedDecimals) / 10 ** this.props.fixedDecimals}`\n  }\n\n\n  selectLegendData(name){\n    var reformattedName = this.renameAndFormatSeries(name)\n    if (!this.state.seriesMap) {\n      return {}\n    }\n    const line = this.state.seriesMap[name];\n    const item = {\n      name: reformattedName,\n      symbol: { fill: line.color },\n    };\n    if (this.state.hiddenSeries.has(reformattedName)) {\n      return { ...item, symbol: { fill: \"white\" } };\n    }\n    return item;\n  }\n\n  selectVictoryLines(name) {\n    var reformattedName = this.renameAndFormatSeries(name)\n\n    var marker = null;\n    if (this.state.seriesMap[name].data.length === 1){\n      marker = <VictoryScatter\n          size={4}\n          key={\"line-\" + reformattedName + this.props.title}\n          name={reformattedName}\n          style={{\n            data: {\n              fill: this.state.seriesMap[name].color\n            },\n          }}\n        />\n    }\n    else {\n        marker = <VictoryLine\n          interpolation={this.props.interpolation}\n          key={\"line-\" + reformattedName + this.props.title}\n          name={reformattedName}\n          style={{\n            labels: {fill: this.state.seriesMap[name].color},\n            data: {\n              stroke: this.state.seriesMap[name].color,\n              strokeWidth: 2,\n            },\n            parent: { border: \"1px solid #ccc\" },\n          }}\n        />\n    }\n\n    return (\n      <VictoryGroup\n          data={(this.state.hiddenSeries.has(reformattedName)) ? [] : this.state.seriesMap[name].data}\n          x=\"x\"\n          y={(datum) => this.yTransformation(datum.y)}\n        >\n        {marker}\n      </VictoryGroup>\n    );\n  }\n\n  render() {\n    return (\n      <Card style={{ maxHeight: \"100%\"}}>\n        <VictoryChart\n          style={{ parent: { maxWidth: \"700px\"}}}\n          title={this.props.title}\n          domainPadding={10}\n          padding={{ left: 70, right: 50, bottom: 80, top: 50 }}\n          events={this.state.legendEvents}\n          height={315}\n          width={600}\n          scale={{x: 'time'}}\n          theme={VictoryTheme.material}\n          containerComponent={\n           <VictoryVoronoiContainer\n             responsive={true}\n             voronoiBlacklist={['parent']}\n             labels={this.createToolTip}\n             labelComponent={\n               <VictoryTooltip\n                 cornerRadius={0}\n                 flyoutStyle={{\n                   fill: \"white\",\n                   stroke: \"#90a4ae\",\n                   strokeWidth: 1.5,\n                 }}\n               />\n             }\n\n           />\n          }\n        >\n          <VictoryLabel\n            text={this.props.title}\n            x={300}\n            y={30}\n            textAnchor=\"middle\"\n            style={{\n              fontSize: 16,\n              fontFamily: \"inherit\",\n            }}\n          />\n          <VictoryAxis\n            style={{\n              tickLabels: {\n                fontSize: 14,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n            offsetY={80}\n            orientation=\"bottom\"\n          />\n          <VictoryAxis\n            crossAxis={false}\n            dependentAxis\n            domain={this.props.yAxisDomain}\n            tickFormat={(t) => `${t.toFixed(this.props.fixedDecimals)}`}\n            label={this.props.yAxisLabel}\n            axisLabelComponent={\n              <VictoryLabel\n                dy={-41}\n                style={{\n                  fontSize: 15,\n                  padding: 10,\n                  fontFamily: \"inherit\",\n                }}\n              />\n            }\n            style={{\n              tickLabels: {\n                fontSize: 14,\n                padding: 5,\n                fontFamily: \"inherit\",\n              },\n            }}\n          />\n          <VictoryLegend\n            x={65}\n            y={270}\n            symbolSpacer={6}\n            itemsPerRow={5}\n            name=\"legend\"\n            borderPadding={{ right: 8 }}\n            orientation=\"horizontal\"\n            cursor={\"pointer\"}\n            gutter={15}\n            rowGutter={5}\n            style={{\n              labels: { fontSize: 13 },\n              data: { stroke: \"#485157\", strokeWidth: 0.5, size: 6.5 },\n            }}\n            data={this.state.names.map(this.selectLegendData)}\n          />\n          {Object.keys(this.state.seriesMap).map(this.selectVictoryLines)}\n        </VictoryChart>\n      </Card>\n    );\n  }\n}\n\nexport default Chart;\n","import React from 'react'\n\nimport SvgIcon from '@mui/material/SvgIcon';\n\n\nfunction PioreactorIcon(props) {\n  return (\n    <SvgIcon {...props} >\n        <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill={props.fillColor || \"none\"} fillRule=\"evenodd\">\n            <g id=\"Experiment-Page-1\" transform=\"translate(-728.000000, -1502.000000)\" stroke=\"currentColor\" strokeWidth=\"1.8\">\n                <g id=\"pioreactor\" transform=\"translate(729.000000, 1503.000000)\">\n                    <path d=\"M1.4,18.9 L1.4,14.7 L0,14.7 L0,11.2 L2.799,11.2 L2.8,0 L14,0 L13.999,11.2 L16.8,11.2 L16.8,14.7 L15.399,14.7 L15.4,18.9 L1.4,18.9 Z\" id=\"Combined-Shape\"></path>\n                    <circle id=\"Oval\" cx=\"8.4\" cy=\"13.3\" r=\"2.1\"></circle>\n                </g>\n            </g>\n        </g>\n    </SvgIcon>\n  );\n}\n\nexport default PioreactorIcon;\n","import React from 'react'\n\nimport clsx from 'clsx';\n\nexport default  function UnderlineSpan(props){\n  const title = props.title\n\n  return (\n    <span className={clsx({underlineSpan: title ? true : false})} title={title}>\n      {props.children}\n    </span>\n )\n}\n","import React from 'react'\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport {Client} from 'paho-mqtt';\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport {withStyles} from '@mui/styles';\n\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\n\nimport PioreactorIcon from \"./PioreactorIcon\"\nimport UnderlineSpan from \"./UnderlineSpan\"\n\n\n\nconst useStyles = theme => ({\n  tightCell: {\n    padding: \"8px 2px 6px 4px\",\n    fontSize: 13,\n  },\n  smallText: {\n    fontSize: 12,\n  },\n  headerCell: {\n    backgroundColor: \"white\",\n    padding: \"8px 6px 6px 6px\",\n  },\n  tightRight: {\n    textAlign: \"right\"\n  },\n});\n\n\n\nclass MediaCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        mediaThroughputPerUnit: {},\n        altMediaThroughputPerUnit: {},\n        mediaThroughput: 0,\n        altMediaThroughput: 0,\n        rates: {all: {mediaRate: 0, altMediaRate: 0}},\n        activeUnits: []\n      };\n    this.onConnect = this.onConnect.bind(this);\n    this.onMessageArrived = this.onMessageArrived.bind(this);\n  }\n\n  async getRecentRates() {\n    if (!this.props.experiment){\n      return\n    }\n\n     await fetch(\"/recent_media_rates/\" + encodeURIComponent(this.props.experiment))\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      this.setState(prevState => ({...prevState, rates: data}))\n    });\n    return\n  }\n\n  componentDidUpdate(prevProps) {\n     if (prevProps.experiment !== this.props.experiment) {\n      this.getRecentRates()\n     }\n  }\n\n  componentDidMount() {\n    if (this.props.config.remote && this.props.config.remote.ws_url) {\n      this.client = new Client(\n        `ws://${this.props.config.remote.ws_url}/`,\n        \"webui_MediaCard\" + Math.random()\n      )}\n    else {\n      this.client = new Client(\n        `${this.props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_MediaCard\" + Math.random()\n      );\n    }\n\n    this.client.connect({timeout: 180, 'onSuccess': this.onConnect});\n    this.client.onMessageArrived = this.onMessageArrived;\n    this.setState({activeUnits: Object.entries(this.props.config['network.inventory']).filter((v) => v[1] === \"1\").map((v) => v[0])})\n    this.getRecentRates()\n  }\n\n\n  onConnect() {\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"dosing_automation\", \"alt_media_throughput\"].join(\"/\"))\n      this.client.subscribe([\"pioreactor\", \"+\", this.props.experiment, \"dosing_automation\", \"media_throughput\"].join(\"/\"))\n  }\n\n  addOrUpdate(hash, object, value) {\n      if (Object.hasOwnProperty(hash)){\n        object[hash] = value + object[hash]\n      }\n      else{\n        object[hash] = value\n      }\n      return object\n  }\n\n  onMessageArrived(message) {\n    const topic = message.destinationName\n    const topicParts = topic.split(\"/\")\n    const payload = parseFloat(message.payloadString)\n    const unit = topicParts[1]\n    const objectRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughputPerUnit\"  : \"mediaThroughputPerUnit\"\n    const totalRef = (topicParts.slice(-1)[0] === \"alt_media_throughput\")  ? \"altMediaThroughput\"  : \"mediaThroughput\"\n\n    this.setState({\n      [objectRef]: this.addOrUpdate(unit, this.state[objectRef], payload)\n    });\n\n    var total = Object.values(this.state[objectRef]).reduce((a, b) => a + b, 0)\n\n    this.setState({\n      [totalRef]: total\n    })\n  }\n\n  getRenameIfAvailable(unit) {\n    return (this.props.config['ui.rename'] && this.props.config['ui.rename'][unit]) ? this.props.config['ui.rename'][unit] : unit\n  }\n\n  render(){\n    return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h2\">\n          <Box fontWeight=\"fontWeightRegular\">\n            Dosing\n          </Box>\n        </Typography>\n       <TableContainer style={{ width: \"100%\"}}>\n          <Table size=\"small\" aria-label=\"media throughput\">\n            <TableHead>\n              <TableRow>\n                <TableCell style={{padding: \"6px 0px\"}}></TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Media</TableCell>\n                <TableCell style={{padding: \"6px 0px\"}} align=\"right\">Alt. Media</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow key=\"all\">\n                <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                  All Pioreactors\n                </TableCell>\n                <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{this.state.mediaThroughput.toFixed(1)}mL (~{this.state.rates.all.mediaRate.toFixed(1)}mL/h)</TableCell>\n                <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{this.state.altMediaThroughput.toFixed(1)}mL (~{this.state.rates.all.altMediaRate.toFixed(1)}mL/h)</TableCell>\n              </TableRow>\n\n              {this.state.activeUnits.map((unit) => (\n                <TableRow key={unit}>\n                  <TableCell style={{padding: \"6px 0px\"}} component=\"th\" scope=\"row\">\n                      <PioreactorIcon style={{ fontSize: 14, verticalAlign: \"middle\" }} color=\"inherit\"/> <UnderlineSpan title={this.getRenameIfAvailable(unit) === unit ? null : unit}>{this.getRenameIfAvailable(unit)}</UnderlineSpan>\n                  </TableCell>\n                  <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{(this.state.mediaThroughputPerUnit[unit] || 0).toFixed(1)}mL (~{this.state.rates[unit] ? this.state.rates[unit].mediaRate.toFixed(1) : \"0.0\"}mL/h)</TableCell>\n                  <TableCell align=\"right\" style={{ fontSize: 13, padding: \"6px 0px\"}}>{(this.state.altMediaThroughputPerUnit[unit] || 0).toFixed(1)}mL (~{this.state.rates[unit] ? this.state.rates[unit].altMediaRate.toFixed(1): \"0.0\"}mL/h)</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </CardContent>\n    </Card>\n  )}\n}\n\nexport default  withStyles(useStyles)(MediaCard);\n","import React from \"react\";\n\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport LogTable from \"./components/LogTable\";\nimport ExperimentSummary from \"./components/ExperimentSummary\";\nimport Chart from \"./components/Chart\";\nimport MediaCard from \"./components/MediaCard\";\nimport PioreactorIcon from './components/PioreactorIcon';\n\n\nfunction Overview(props) {\n\n  const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n  React.useEffect(() => {\n    document.title = props.title;\n    function getLatestExperiment() {\n        fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperimentMetadata(data)\n        });\n      }\n    getLatestExperiment()\n  }, [props.title])\n\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2} justifyContent=\"space-between\">\n\n        <Grid item xs={12} md={12}>\n          <ExperimentSummary experimentMetadata={experimentMetadata}/>\n        </Grid>\n\n\n        <Grid item xs={12} md={7} container spacing={2} justifyContent=\"flex-start\" style={{height: \"100%\"}}>\n\n\n          {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['implied_growth_rate'] === \"1\")) &&\n          <Grid item xs={12}>\n            <Chart\n              config={props.config}\n              dataSource=\"growth_rates\"\n              title={props.config['ui.overview.settings']['daily_growth_rate'] === \"1\" ?  \"Implied daily growth rate\" : \"Implied growth rate\"}\n              topic=\"growth_rate_calculating/growth_rate\"\n              payloadKey=\"growth_rate\"\n              yAxisLabel={props.config['ui.overview.settings']['daily_growth_rate'] === \"1\" ? \"Growth rate, d⁻¹\" : \"Growth rate, h⁻¹\"}\n              yTransformation={props.config['ui.overview.settings']['daily_growth_rate'] === \"1\" ? (y) => 24 * y : (y) => y}\n              experiment={experimentMetadata.experiment}\n              deltaHours={experimentMetadata.delta_hours}\n              interpolation=\"stepAfter\"\n              yAxisDomain={props.config['ui.overview.settings']['daily_growth_rate'] === \"1\" ? [-0.1, 1.0] : [-0.02, 0.1]}\n              lookback={100000}\n              fixedDecimals={2}\n            />\n          </Grid>\n          }\n\n          {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['fraction_of_volume_that_is_alternative_media'] === \"1\")) &&\n          <Grid item xs={12}>\n            <Chart\n              config={props.config}\n              yAxisDomain={[0.00, 0.05]}\n              dataSource=\"alt_media_fraction\"\n              interpolation=\"stepAfter\"\n              payloadKey=\"alt_media_fraction\"\n              title=\"Fraction of volume that is alternative media\"\n              topic=\"alt_media_calculating/alt_media_fraction\"\n              yAxisLabel=\"Fraction\"\n              experiment={experimentMetadata.experiment}\n              deltaHours={1} // hack to make all points display\n              fixedDecimals={3}\n              lookback={100000}\n            />\n          </Grid>\n          }\n\n          {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['normalized_optical_density'] === \"1\")) &&\n          <Grid item xs={12}>\n            <Chart\n              config={props.config}\n              dataSource=\"od_readings_filtered\"\n              title=\"Normalized optical density\"\n              payloadKey=\"od_filtered\"\n              topic=\"growth_rate_calculating/od_filtered\"\n              yAxisLabel=\"Current OD / initial OD\"\n              experiment={experimentMetadata.experiment}\n              deltaHours={experimentMetadata.delta_hours}\n              interpolation=\"stepAfter\"\n              lookback={parseFloat(props.config['ui.overview.settings']['filtered_od_lookback_hours'])}\n              fixedDecimals={2}\n              yAxisDomain={[0.98, 1.02]}\n            />\n          </Grid>\n          }\n\n          {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['raw_optical_density'] === \"1\")) &&\n          <Grid item xs={12}>\n            <Chart\n              config={props.config}\n              isODReading={true}\n              dataSource=\"od_readings_raw\"\n              title=\"Optical density\"\n              payloadKey=\"voltage\"\n              topic=\"od_reading/od_raw/+\"\n              yAxisLabel=\"Voltage\"\n              experiment={experimentMetadata.experiment}\n              deltaHours={experimentMetadata.delta_hours}\n              interpolation=\"stepAfter\"\n              lookback={parseFloat(props.config['ui.overview.settings']['raw_od_lookback_hours'])}\n              fixedDecimals={3}\n            />\n          </Grid>\n         }\n          {( props.config['ui.overview.charts'] && (props.config['ui.overview.charts']['temperature'] === \"1\")) &&\n          <Grid item xs={12}>\n            <Chart\n              config={props.config}\n              dataSource=\"temperature_readings\"\n              title=\"Temperature of vials\"\n              topic=\"temperature_control/temperature\"\n              yAxisLabel=\"temperature, ℃\"\n              payloadKey=\"temperature\"\n              experiment={experimentMetadata.experiment}\n              interpolation=\"stepAfter\"\n              lookback={10000}\n              deltaHours={1} // hack to display all data points\n              yAxisDomain={[22.5, 37.5]}\n              fixedDecimals={1}\n            />\n          </Grid>\n         }\n        </Grid>\n\n        <Grid item xs={12} md={5} container spacing={1} justifyContent=\"flex-end\" style={{height: \"100%\"}}>\n\n\n          {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['dosings'] === \"1\")) &&\n            <Grid item xs={12} >\n              <MediaCard experiment={experimentMetadata.experiment} config={props.config}/>\n              <Button href=\"/pioreactors\" color=\"primary\" style={{textTransform: \"none\", verticalAlign: \"middle\", margin: \"0px 3px\"}}> <PioreactorIcon style={{ fontSize: 17 }} color=\"primary\"/> See all Pioreactor details </Button>\n            </Grid>\n          }\n\n\n          {( props.config['ui.overview.cards'] && (props.config['ui.overview.cards']['event_logs'] === \"1\")) &&\n            <Grid item xs={12}>\n              <LogTable experiment={experimentMetadata.experiment} config={props.config}/>\n            </Grid>\n          }\n\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  );\n}\nexport default Overview;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from '@mui/material/Grid';\n\nimport { makeStyles } from '@mui/styles';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Select from '@mui/material/Select';\nimport Box from '@mui/material/Box';\nimport LoadingButton from \"@mui/lab/LoadingButton\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(2),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  }\n}));\n\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n\n  const [experiments, setExperiments] = React.useState([{experiment: \"<All experiments>\"}])\n\n  React.useEffect(() => {\n    async function getData() {\n       await fetch(\"/get_experiments\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setExperiments(prevState => [ ...data, ...prevState])\n        props.handleChange(data[0].experiment)\n      });\n    }\n    getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleChange(e.target.value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n\n        <Select\n          native\n          variant=\"standard\"\n          value={props.ExperimentSelection}\n          onChange={handleExperimentSelectionChange}\n          inputProps={{\n            name: 'experiment',\n            id: 'experiment',\n          }}\n        >\n          {experiments.map((v) => {\n            return <option value={v.experiment}>{v.experiment +  (v.timestamp ? ` (started ${moment(v.timestamp).format(\"MMMM D, YYYY\")})` : \"\")}</option>\n            }\n          )}\n        </Select>\n      </FormControl>\n\n    </div>\n  )\n}\n\n\n\nconst CheckboxesGroup = (props) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Datasets</FormLabel>\n        <FormGroup>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.growth_rates} onChange={props.handleChange} name=\"growth_rates\" />}\n            label=\"Implied growth rate\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of the calculated (implied) growth rate. Same data as presented in the \"Implied growth rate\" chart in the Experiment Overview.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_raw} onChange={props.handleChange} name=\"od_readings_raw\" />}\n            label=\"Raw optical density\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of raw voltages provided by the senors, the inputs for growth calculations and normalized optical densities. Same data as presented in the \"Raw optical density\" chart in the Experiment Overview.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.od_readings_filtered} onChange={props.handleChange} name=\"od_readings_filtered\" />}\n            label=\"Normalized optical density\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of normalized optical densities. Same data as presented in the \"Normalized optical density\" chart in the Experiment Overview.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.temperature_readings} onChange={props.handleChange} name=\"temperature_readings\" />}\n            label=\"Temperature readings\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The time series of temperature readings from the Pioreactors. Same data as presented in the \"Temperature of vials\" chart in the Experiment Overview.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.experiments} onChange={props.handleChange} name=\"experiments\" />}\n            label=\"Experiment metadata\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The description and other metadata from the experiment.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.alt_media_fraction} onChange={props.handleChange} name=\"alt_media_fraction\" />}\n            label=\"Alternative media fraction\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            A time series of how much alternative media is in each Pioreactor. Same data as presented in the \"Fraction of volume that is alternative media\" chart in the Experiment Overview.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_events} onChange={props.handleChange} name=\"dosing_events\" />}\n            label=\"Dosing event log\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            A detailed log table of all dosing events, including the volume exchanged, and the source of who or what triggered the event.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.dosing_automation_settings} onChange={props.handleChange} name=\"dosing_automation_settings\" />}\n            label=\"Dosing automation changelog\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            Whenever a dosing automation is updated (new automation, new setting, etc.), a new row is recorded. You can reconstruct all the dosing automation states\n            from this dataset.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.led_events} onChange={props.handleChange} name=\"led_events\" />}\n            label=\"LED event log\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            A detailed log table of all LED events, including the channel, intensity, and the source of who or what triggered the event.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.led_automation_settings} onChange={props.handleChange} name=\"led_automation_settings\" />}\n            label=\"LED automation changelog\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            Whenever a LED automation is updated (new automation, new setting, etc.), a new row is recorded. You can reconstruct all the LED automation states\n            from this dataset.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.temperature_automation_settings} onChange={props.handleChange} name=\"temperature_automation_settings\" />}\n            label=\"Temperature automation changelog\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            Whenever a temperature automation is updated (new automation, new setting, etc.), a new row is recorded. You can reconstruct all the temperature automation states\n            from this dataset.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.kalman_filter_outputs} onChange={props.handleChange} name=\"kalman_filter_outputs\" />}\n            label=\"Kalman filter outputs\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            An internal Kalman filter produces the normalized optical densities, growth rates, an acceleration term, and variances (and covariances) between the estimates.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.stirring_rates} onChange={props.handleChange} name=\"stirring_rates\" />}\n            label=\"Stirring rates\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The measured RPM of the onboard stirring.\n          </Typography>\n\n          <FormControlLabel\n            control={<Checkbox checked={props.isChecked.logs} onChange={props.handleChange} name=\"logs\" />}\n            label=\"Pioreactor logs\"\n          />\n          <Typography variant=\"caption\" className={classes.caption} gutterBottom>\n            The append-only collection of logs from all Pioreactors. A subset of the these logs are displayed in the Log Table in the Experiment Overview.\n            These are the logs that should be provided to get assistance when troubleshooting, but choose \"&lt;All experiments&gt;\" above.\n          </Typography>\n\n        </FormGroup>\n      </FormControl>\n    </div>\n)}\n\n\nfunction ExportDataContainer() {\n  const classes = useStyles();\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [isError, setIsError] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n  const [state, setState] = React.useState({\n    experimentSelection: \"\",\n    datasetCheckbox: {\n      growth_rates: false,\n      dosing_events: false,\n      led_events: false,\n      experiments: false,\n      od_readings_raw: false,\n      od_readings_filtered: false,\n      logs: false,\n      alt_media_fraction: false,\n      dosing_automation_settings: false,\n      led_automation_settings: false,\n      temperature_automation_settings: false,\n      kalman_filter_outputs: false,\n      stirring_rates: false,\n      temperature_readings: false\n    }\n  });\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n\n    if (!Object.values(state['datasetCheckbox']).some((e) => e)) {\n      setIsError(true)\n      setErrorMsg(\"At least one dataset must be selected.\")\n      return\n    }\n\n    setIsRunning(true)\n    fetch('export_datasets',{\n        method: \"POST\",\n        body: JSON.stringify(state),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    }).then(res => res.json())\n      .then(res => {\n      var link = document.createElement(\"a\");\n      const filename = res['filename'].replace(/%/g, \"%25\")\n      link.setAttribute('export', filename);\n      link.href = \"/static/exports/\" + filename;\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      setIsRunning(false)\n    }).catch(e => {\n      setIsRunning(false)\n      setIsError(true)\n      setErrorMsg(\"Server error occurred. Check logs.\")\n    });\n  }\n\n  const handleCheckboxChange = (event) => {\n    setState(prevState => ({\n      ...prevState,\n      datasetCheckbox: {...state.datasetCheckbox, [event.target.name]: event.target.checked }\n    }));\n  };\n\n  function handleExperimentSelectionChange(value) {\n    setState(prevState => ({\n      ...prevState,\n      experimentSelection: value\n    }));\n  };\n\n  const errorFeedbackOrDefault = isError ? <Box color=\"error.main\">{errorMsg}</Box>: \"\"\n  return (\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Export Experiment Data\n            </Box>\n          </Typography>\n        </div>\n\n      </div>\n      <Card className={classes.root}>\n\n        <CardContent className={classes.cardContent}>\n          <form>\n            <Grid container spacing={0}>\n              <Grid item xs={12} md={12}>\n                <ExperimentSelection\n                experimentSelection={state.experimentSelection}\n                handleChange={handleExperimentSelectionChange}\n                />\n              </Grid>\n              <Grid item xs={12} md={12}>\n                <CheckboxesGroup\n                isChecked={state.datasetCheckbox}\n                handleChange={handleCheckboxChange}\n                />\n              </Grid>\n\n              <Grid item xs={0}/>\n              <Grid item xs={12}>\n                <LoadingButton\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  loading={isRunning}\n                  onClick={onSubmit}\n                  style={{width: \"120px\", marginLeft: 24}}\n                >\n                  Export\n                </LoadingButton>\n                <p style={{marginLeft: 24}}>{errorFeedbackOrDefault}</p>\n\n              </Grid>\n              <Grid item xs={12}>\n                <p style={{textAlign: \"center\", marginTop: \"30px\"}}>💡 Learn more about <a href=\"https://docs.pioreactor.com/user_guide/Exporting%20Data\" target=\"_blank\" rel=\"noopener noreferrer\">data exporting</a>.</p>\n              </Grid>\n            </Grid>\n          </form>\n        </CardContent>\n      </Card>\n  </React.Fragment>\n  )\n}\n\n\nfunction ExportData(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title]);\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <ExportDataContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default ExportData;\n\n","import React, {useEffect } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\nimport TextField from \"@mui/material/TextField\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  textFieldCompact: {\n    marginTop: theme.spacing(3),\n    marginRight: theme.spacing(2),\n    marginBottom: theme.spacing(0),\n    width: \"18ch\",\n  }\n}));\n\n\n\nfunction AutomationForm(props){\n  const classes = useStyles();\n  const defaults = Object.assign({}, ...props.fields.map(field => ({[field.key]: field.default})))\n  useEffect(() => {\n    props.updateParent(defaults)\n  }, [props.fields])\n\n  const onSettingsChange = (e) => {\n    props.updateParent({[e.target.id]: e.target.value})\n  }\n  var listOfTextField = props.fields.map(field =>\n        <TextField\n          size=\"small\"\n          id={field.key}\n          key={field.key + props.name}\n          label={field.label}\n          defaultValue={field.default}\n          InputProps={{\n            endAdornment: <InputAdornment position=\"end\">{field.unit}</InputAdornment>,\n          }}\n          variant=\"outlined\"\n          onChange={onSettingsChange}\n          onKeyPress={(e) => {e.key === 'Enter' && e.preventDefault();}}\n          className={classes.textFieldCompact}\n        />\n  )\n\n  return (\n    <div>\n        <p> {props.description} </p>\n        {listOfTextField}\n    </div>\n)}\n\n\nexport default AutomationForm;","import React, { useState, useEffect } from \"react\";\n\nimport { Client, Message } from \"paho-mqtt\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport FormLabel from '@mui/material/FormLabel';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\n\nimport PioreactorIcon from \"./PioreactorIcon\"\nimport AutomationForm from \"./AutomationForm\"\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    marginTop: theme.spacing(2)\n  },\n  unitTitle: {\n    fontSize: 17,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  unitTitleDialog :{\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n}));\n\n\nconst defaultAutomations = {\n  temperature: \"stable\",\n  dosing: \"chemostat\",\n  led: \"silent\"\n}\n\n\nfunction ChangeAutomationsDialog(props) {\n  const classes = useStyles();\n  const automationType = props.automationType\n  const automationTypeForDisplay = (automationType === \"led\") ? \"LED\" : automationType\n  const [algoSettings, setAlgoSettings] = useState({\n    automation_name: defaultAutomations[props.automationType],\n    skip_first_run: 0\n  })\n  const [client, setClient] = useState(null)\n  const [automations, setAutomations] = useState({})\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n\n\n  useEffect(() => {\n    function fetchAutomations() {\n      fetch(\"/contrib/automations/\" + automationType)\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((listOfAuto) => {\n          setAutomations(Object.assign({}, ...listOfAuto.map(auto => ({ [auto.automation_name]: auto}))))\n        })\n        .catch((error) => {})\n    }\n    fetchAutomations();\n  }, [automationType])\n\n\n  useEffect(() => {\n    // MQTT - client ids should be unique\n    if (!props.config['network.topology']){\n      return\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_ButtonChangeDialog\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_ButtonChangeDialog\" + Math.random()\n      );\n    }\n\n    client.connect({timeout: 180});\n    setClient(client)\n  },[props.config])\n\n\n  const handleClose = () => {\n    props.onFinished();\n  };\n\n  const handleSkipFirstRunChange = (e) => {\n    setAlgoSettings({...algoSettings, skip_first_run: e.target.checked ? 1 : 0})\n  }\n\n  const handleAlgoSelectionChange = (e) => {\n    setAlgoSettings({\n        automation_name: e.target.value,\n        ...( !props.no_skip_first_run && {skip_first_run: algoSettings.skip_first_run})\n    })\n  }\n\n  const updateFromChild = (setting) => {\n    setAlgoSettings(prevState => ({...prevState, ...setting}))\n  }\n\n  const startJob = (event) => {\n    event.preventDefault()\n    fetch(`/run/${automationType}_control/${props.unit}`, {\n      method: \"POST\",\n      body: JSON.stringify(algoSettings),\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    setOpenSnackbar(true);\n    handleClose()\n  }\n\n  const changeAutomation = (event) => {\n    event.preventDefault()\n    var message = new Message(JSON.stringify(algoSettings));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      `${automationType}_control`,\n      \"automation\",\n      \"set\",\n    ].join(\"/\");\n    message.qos = 2;\n    try{\n      client.publish(message);\n      setOpenSnackbar(true);\n    }\n    catch (e){\n      console.log(e)\n    }\n    handleClose();\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return (\n    <React.Fragment>\n    <Dialog open={props.open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" PaperProps={{style: {height: \"100%\"}}}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/>\n            {(props.unit === \"$broadcast\")\n              ? <b>All active Pioreactors</b>\n              :(props.title || ((props.config['ui.rename'] && props.config['ui.rename'][props.unit])\n                  ? `${props.config['ui.rename'][props.unit]} / ${props.unit}`\n                  : `${props.unit}`)\n              )\n            }\n        </Typography>\n        <Typography className={classes.unitTitleDialog}>\n          Select {automationTypeForDisplay} automation\n        </Typography>\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" component=\"p\" gutterBottom>\n          <span style={{textTransform: \"capitalize\"}}>{automationTypeForDisplay}</span> automations control the {automationTypeForDisplay} of the Pioreactor's vial. The settings below can be changed later. Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href={\"https://docs.pioreactor.com/user_guide/Automations/\" + automationTypeForDisplay + \"%20Automations\"}>{automationTypeForDisplay} automations</a>.\n        </Typography>\n\n        <form>\n          <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Automation</FormLabel>\n            <Select\n              native\n              variant=\"standard\"\n              value={algoSettings.automation_name}\n              onChange={handleAlgoSelectionChange}\n              style={{maxWidth: \"200px\"}}\n            >\n              {Object.keys(automations).map((key) => <option id={key} value={key} key={\"change-io\" + key}>{automations[key].display_name}</option>)}\n\n            </Select>\n            {Object.keys(automations).length > 0 && <AutomationForm fields={automations[algoSettings.automation_name].fields} description={automations[algoSettings[\"automation_name\"]].description} updateParent={updateFromChild} name={algoSettings.automation_name}/>}\n\n            {!props.no_skip_first_run ?\n            <FormControlLabel\n              control={<Checkbox checked={algoSettings.skip_first_run}\n                                  color=\"primary\"\n                                  onChange={handleSkipFirstRunChange}\n                                  size=\"small\"/>\n                      }\n              label=\"Skip first run\"\n            />\n            : <React.Fragment/> }\n\n          </FormControl>\n        </form>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={props.isJobRunning ? changeAutomation :  startJob}\n        >\n          Start\n        </Button>\n        <Button\n          color=\"secondary\"\n          onClick={handleClose}\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={`Starting ${automationTypeForDisplay} automation ${automations[algoSettings.automation_name]?.display_name}.`}\n      autoHideDuration={7000}\n      key={\"snackbar-change-\" + automationType}\n    />\n    </React.Fragment>\n  );}\n\n\nexport default ChangeAutomationsDialog;\n","import React, {useState} from 'react'\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { makeStyles } from \"@mui/styles\";\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n    width: \"175px\",\n  },\n  actionForm: {\n    padding: \"20px 0px 0px 0px\",\n  }\n});\n\n\nconst actionToAct = {\n  \"remove_waste\": \"Removing waste\",\n  \"add_media\": \"Adding media\",\n  \"add_alt_media\": \"Adding alt. media\",\n\n}\n\nexport default function ActionPumpForm(props) {\n  const EMPTYSTATE = \"\";\n  const classes = useStyles();\n  const [mL, setML] = useState(EMPTYSTATE);\n  const [duration, setDuration] = useState(EMPTYSTATE);\n  const [isMLDisabled, setIsMLDisabled] = useState(false);\n  const [isDurationDisabled, setIsDurationDisabled] = useState(false);\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n  const [snackbarMsg, setSnackbarMsg] = useState(\"\");\n\n  const [formErrorDuration, setFormErrorDuration] = useState(false)\n  const [formErrorML, setFormErrorML] = useState(false)\n\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (mL !== EMPTYSTATE || duration !== EMPTYSTATE) {\n      const params = mL !== \"\" ? { ml: mL, source_of_event: \"UI\"} : { duration: duration, source_of_event: \"UI\"};\n      fetch(`/run/${props.action}/${props.unit}`, {\n        method: \"POST\",\n        body: JSON.stringify(params),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      setSnackbarMsg(actionToAct[props.action] + (duration !== EMPTYSTATE ? (\" for \" +  duration + \" seconds.\") : (\" until \" + mL + \"mL is reached.\")))\n      setOpenSnackbar(true);\n    }\n  }\n\n  function stopPump(e) {\n    fetch(`/stop/${props.action}/${props.unit}`, {method: \"POST\"})\n  }\n\n  function runPumpContinuously(e) {\n    fetch(`/run/add_media/${props.unit}`, {\n      method: \"POST\",\n      body: JSON.stringify({continuously: \"\", source_of_event: \"UI\"}),\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    setSnackbarMsg(\"Running media pump continuously\")\n    setOpenSnackbar(true)\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  function handleMLChange(e) {\n    const re = /^[0-9.\\b]+$/;\n\n    setIsDurationDisabled(true);\n    if (e.target.value === EMPTYSTATE) {\n      setIsDurationDisabled(false);\n    }\n\n    setML(e.target.value);\n\n    if (e.target.value === EMPTYSTATE || re.test(e.target.value)) {\n      setFormErrorML(false)\n    }\n    else {\n      setFormErrorML(true)\n    }\n  }\n\n  function handleDurationChange(e) {\n    const re = /^[0-9.\\b]+$/;\n\n    setIsMLDisabled(true);\n    if (e.target.value === EMPTYSTATE) {\n      setIsMLDisabled(false);\n    }\n\n    setDuration(e.target.value);\n\n    if (e.target.value === EMPTYSTATE || re.test(e.target.value)) {\n      setFormErrorDuration(false)\n    }\n    else {\n      setFormErrorDuration(true)\n    }\n  }\n\n  return (\n    <form id={props.action} className={classes.actionForm}>\n      <TextField\n        name=\"mL\"\n        error={formErrorML}\n        value={mL}\n        size=\"small\"\n        id={props.action + \"_mL\"}\n        label=\"mL\"\n        variant=\"outlined\"\n        disabled={isMLDisabled}\n        onChange={handleMLChange}\n        className={classes.actionTextField}\n      />\n      <TextField\n        name=\"duration\"\n        value={duration}\n        error={formErrorDuration}\n        size=\"small\"\n        id={props.action + \"_duration\"}\n        label=\"seconds\"\n        variant=\"outlined\"\n        disabled={isDurationDisabled}\n        onChange={handleDurationChange}\n        className={classes.actionTextField}\n      />\n      <br />\n      <br />\n      <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n        <Button\n          disabled={formErrorML || formErrorDuration}\n          type=\"submit\"\n          variant=\"contained\"\n          size=\"small\"\n          color=\"primary\"\n          onClick={onSubmit}\n        >\n          {props.action.replace(/_/g, \" \")}\n        </Button>\n        <div>\n          {props.action === \"add_media\" && <Button\n            size=\"small\"\n            color=\"primary\"\n            onClick={runPumpContinuously}\n          >\n            Run continuously\n          </Button>\n        }\n          <Button\n            size=\"small\"\n            color=\"secondary\"\n            onClick={stopPump}\n          >\n            Interrupt\n          </Button>\n        </div>\n      </div>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={snackbarMsg}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit + props.action}\n      />\n    </form>\n  );\n}","import React, {useState} from 'react'\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { makeStyles } from \"@mui/styles\";\nimport InputAdornment from '@mui/material/InputAdornment';\n\n\nconst useStyles = makeStyles({\n  actionTextField: {\n    padding: \"0px 10px 0px 0px\",\n    width: \"160px\",\n  },\n  actionForm: {\n    padding: \"10px 0px 0px 0px\",\n  }\n});\n\n\n\nexport default function ActionLEDForm(props) {\n  const EMPTYSTATE = \"\";\n  const classes = useStyles();\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n  const [intensity, setIntensity] = useState(EMPTYSTATE);\n  const [errorForm, setErrorForm] = useState(false);\n\n  function onSubmit(e) {\n    const re = /^[0-9.\\b]+$/;\n    e.preventDefault();\n    if (intensity !== EMPTYSTATE && re.test(intensity)) {\n      // TODO: this could also fire an mqtt event to set it in LEDAlgorithm, in case that is running\n      setErrorForm(false)\n      setOpenSnackbar(true);\n\n      const params = { intensity: intensity, channel: props.channel, source_of_event: \"UI\"}\n\n      fetch(`/run/led_intensity/${props.unit}`, {\n        method: \"POST\",\n        body: JSON.stringify(params),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }\n      );\n    } else {\n      setErrorForm(true)\n    }\n  }\n\n\n  function handleChange(e) {\n    const re = /^[0-9.\\b]+$/;\n    setIntensity(e.target.value);\n    if (e.target.value === '' || re.test(e.target.value)) {\n      setErrorForm(false)\n    } else {\n      setErrorForm(true)\n    }\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n\n  return (\n    <form id={props.action} className={classes.actionForm}>\n      <TextField\n        error={errorForm}\n        name=\"intensity\"\n        value={intensity}\n        size=\"small\"\n        id={props.channel + \"_intensity_edit\"}\n        label=\"new intensity\"\n        variant=\"outlined\"\n        onChange={handleChange}\n        InputProps={{\n          endAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n        }}\n        className={classes.actionTextField}\n      />\n      <br />\n      <br />\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        size=\"small\"\n        color=\"primary\"\n        onClick={onSubmit}\n      >\n      Submit\n      </Button>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        onClose={handleSnackbarClose}\n        message={`Updating channel ${props.channel} to ${intensity}%.`}\n        autoHideDuration={7000}\n        key={\"snackbar\" + props.unit + props.channel}\n      />\n    </form>\n  );\n}","import clsx from 'clsx';\nimport { Client, Message } from \"paho-mqtt\";\n\nimport React, {useState, useEffect} from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport PropTypes from 'prop-types';\nimport { useMediaQuery } from \"@mui/material\";\n\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport Box from '@mui/material/Box';\nimport Divider from '@mui/material/Divider';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Snackbar from '@mui/material/Snackbar';\nimport TextField from '@mui/material/TextField';\nimport Tooltip from '@mui/material/Tooltip';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Button from \"@mui/material/Button\";\nimport AddIcon from '@mui/icons-material/Add';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport CloseIcon from '@mui/icons-material/Close';\nimport CheckIcon from '@mui/icons-material/Check';\nimport FlareIcon from '@mui/icons-material/Flare';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport TuneIcon from '@mui/icons-material/Tune';\nimport CheckBoxOutlinedIcon from '@mui/icons-material/CheckBoxOutlined';\nimport IndeterminateCheckBoxIcon from '@mui/icons-material/IndeterminateCheckBox';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport List from '@mui/material/List';\nimport IconButton from '@mui/material/IconButton';\nimport ListItem from '@mui/material/ListItem';\nimport ListSubheader from '@mui/material/ListSubheader';\nimport IndeterminateCheckBoxOutlinedIcon from '@mui/icons-material/IndeterminateCheckBoxOutlined';\n\nimport ChangeAutomationsDialog from \"./components/ChangeAutomationsDialog\"\nimport ActionDosingForm from \"./components/ActionDosingForm\"\nimport ActionLEDForm from \"./components/ActionLEDForm\"\nimport PioreactorIcon from \"./components/PioreactorIcon\"\nimport UnderlineSpan from \"./components/UnderlineSpan\";\n\nconst readyGreen = \"#4caf50\"\nconst disconnectedGrey = \"grey\"\nconst lostRed = \"#DE3618\"\n\nconst useStyles = makeStyles((theme) => ({\n  textIcon: {\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n  pioreactorCard: {\n    marginTop: \"0px\",\n    marginBottom: \"20px\",\n  },\n  cardContent: {\n    padding: \"10px 20px 20px 20px\"\n  },\n  unitTitle: {\n    fontSize: 20,\n    color: \"rgba(0, 0, 0, 0.87)\",\n    fontWeight: 500,\n  },\n  suptitle: {\n    fontSize: \"13px\",\n    color: \"rgba(0, 0, 0, 0.60)\",\n  },\n  disabledText: {\n    color: \"rgba(0, 0, 0, 0.38)\",\n  },\n  textbox:{\n    width: \"127px\",\n    marginTop: \"10px\"\n  },\n  textboxLabel:{\n    width: \"100px\",\n    marginTop: \"10px\",\n    marginRight: \"5px\"\n  },\n  footnote: {\n    marginBottom: 0,\n    fontSize: 12,\n  },\n  textField: {\n    marginTop: \"15px\",\n    maxWidth: \"180px\",\n  },\n  textFieldWide: {\n    marginTop: \"15px\",\n    maxWidth: \"220px\",\n  },\n  textFieldCompact: {\n    marginTop: \"15px\",\n    width: \"120px\",\n  },\n  slider: {\n    width: \"70%\",\n    margin: \"40px auto 0px auto\",\n  },\n  divider: {\n    marginTop: 15,\n    marginBottom: 10,\n  },\n  jobButton: {\n    paddingRight: \"15px\",\n    paddingLeft: \"15px\"\n  },\n  unitSettingsSubtext:{\n    fontSize: \"11px\"\n  },\n  unitSettingsSubtextEmpty:{\n    minHeight: \"15px\"\n  },\n  ledBlock:{\n    width: \"55px\",\n    display: \"inline-block\"\n  },\n  rowOfUnitSettingDisplay:{\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"flex-start\",\n    alignItems: \"stretch\",\n    alignContent: \"stretch\",\n  },\n  testingListItemIcon: {\n    minWidth: \"30px\"\n  },\n  testingListItem : {\n    paddingTop: \"0px\",\n    paddingBottom: \"0px\",\n  },\n  headerMenu: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: \"5px\",\n    [theme.breakpoints.down('lg')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  cardHeaderSettings:{\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    [theme.breakpoints.down('md')]:{\n      flexFlow: \"nowrap\",\n      flexDirection: \"column\",\n    }\n  },\n  cardHeaderButtons: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    [theme.breakpoints.down('md')]: {\n      justifyContent: \"space-between\",\n    }\n  },\n  headerButtons: {display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", flexFlow: \"wrap\"}\n}));\n\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      key={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n          <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\n\nfunction UnitSettingDisplaySubtext(props){\n  const classes = useStyles();\n\n  if (props.subtext){\n    return <div className={classes.unitSettingsSubtext}><code>{props.subtext}</code></div>\n  }\n  else{\n    return <div className={classes.unitSettingsSubtextEmpty}></div>\n  };\n}\n\n\nfunction UnitSettingDisplay(props) {\n  const classes = useStyles();\n  const stateDisplay = {\n    \"init\":          {display: \"Starting\", color: readyGreen},\n    \"ready\":         {display: \"On\", color: readyGreen},\n    \"sleeping\":      {display: \"Paused\", color: disconnectedGrey},\n    \"disconnected\":  {display: \"Off\", color: disconnectedGrey},\n    \"lost\":          {display: \"Lost\", color: lostRed},\n    \"NA\":            {display: \"Not available\", color: disconnectedGrey},\n  }\n  const value = props.value === null ?  \"\"  : props.value\n\n  function prettyPrint(x){\n    if (x >= 10){\n      return x.toFixed(0)\n    }\n    else if (x===0){\n      return \"0\"\n    }\n    else if (x < 1){\n      return `<1`\n    } else {\n      return (x).toFixed(1).replace(/[.,]0$/, \"\");\n    }\n  }\n\n  if (props.isStateSetting) {\n    if (!props.isUnitActive) {\n      return <div className={clsx({[classes.disabledText]: !props.isUnitActive})}> {stateDisplay[value].display} </div>;\n    } else {\n      var displaySettings = stateDisplay[value]\n      return (\n        <React.Fragment>\n          <div style={{ color: displaySettings.color, fontWeight: 500}}>\n            {displaySettings.display}\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n    )}\n  } else if (props.isLEDIntensity) {\n    if (!props.isUnitActive || value === \"—\" || value === \"\") {\n      return <div style={{ color: disconnectedGrey, fontSize: \"13px\"}}> {props.default} </div>;\n    } else {\n      const ledIntensities = JSON.parse(value)\n        // the | {} is here to protect against the UI loading from a broken config.\n      const LEDMap = props.config['leds']\n      const renamedA = (LEDMap['A']) ? (LEDMap['A'].replace(\"_\", \" \")) : null\n      const renamedB = (LEDMap['B']) ? (LEDMap['B'].replace(\"_\", \" \")) : null\n      const renamedC = (LEDMap['C']) ? (LEDMap['C'].replace(\"_\", \" \")) : null\n      const renamedD = (LEDMap['D']) ? (LEDMap['D'].replace(\"_\", \" \")) : null\n\n      return(\n        <React.Fragment>\n          <div style={{fontSize: \"13px\"}}>\n            <div>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedA ? renamedA : null}>A</UnderlineSpan>: {prettyPrint(ledIntensities[\"A\"])}%\n              </span>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedB ? renamedB : null}>B</UnderlineSpan>: {prettyPrint(ledIntensities[\"B\"])}%\n              </span>\n            </div>\n            <div>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedC ? renamedC : null}>C</UnderlineSpan>: {prettyPrint(ledIntensities[\"C\"])}%\n              </span>\n              <span className={classes.ledBlock}>\n                <UnderlineSpan title={renamedD ? renamedD : null}>D</UnderlineSpan>: {prettyPrint(ledIntensities[\"D\"])}%\n              </span>\n            </div>\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      )\n    }\n  } else {\n    if (!props.isUnitActive || value === \"—\" || value === \"\") {\n      return (\n        <React.Fragment>\n          <div style={{ color: disconnectedGrey, fontSize: \"13px\"}}> {props.default} </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      );\n    } else {\n      return (\n        <React.Fragment>\n          <div style={{ fontSize: \"13px\"}}>\n            {(typeof value === \"string\"\n              ? value\n              : +value.toFixed(props.precision)) + \" \" +\n              (props.measurementUnit ? props.measurementUnit : \"\")}\n          </div>\n          <UnitSettingDisplaySubtext subtext={props.subtext}/>\n        </React.Fragment>\n      );\n    }\n  }\n}\n\n\n\nfunction ButtonConfirmStopProcessDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const onConfirm = () => {\n    fetch(\"/stop_all\", {method: \"POST\"})\n    handleClose()\n  }\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\" }} color=\"secondary\" onClick={handleClickOpen}>\n        <ClearIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Stop all activity\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Stop all Pioreactor activity?\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            This will stop all activies (stirring, dosing, optical density reading, etc.) in <b>all</b> Pioreactor units. Do you wish to stop all activities?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onConfirm} color=\"primary\">\n            Confirm\n          </Button>\n          <Button onClick={handleClose} color=\"secondary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n\n\nfunction AddNewPioreactor(props){\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [name, setName] = React.useState(\"\");\n  const [isRunning, setIsRunning] = React.useState(false)\n  const [errorMsg, setErrorMsg] = React.useState(\"\")\n  const [isError, setIsError] = React.useState(\"\")\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n  const handleNameChange = evt => {\n    setName(evt.target.value)\n  }\n\n\n  const onSubmit = (event) =>{\n    event.preventDefault()\n    if (!name) {\n      setIsError(true)\n      setErrorMsg(\"Provide the hostname for the new Pioreactor worker\")\n      return\n    }\n    setIsError(false)\n    setIsRunning(true)\n    fetch('add_new_pioreactor', {\n        method: \"POST\",\n        body: JSON.stringify({newPioreactorName: name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n    })\n    .then(response => {\n        if(!response.ok){\n          setIsError(true)\n          setIsRunning(false)\n          response.json().then(data => setErrorMsg(`Unable to complete installation. ${data.msg}`))\n        }\n    })\n  }\n\n  const runningFeedback = isRunning ? <CircularProgress color=\"inherit\" size={24}/> : \"Add Pioreactor\"\n\n  return (\n    <React.Fragment>\n    <Button onClick={handleClickOpen} style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n      <AddIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Add new Pioreactor\n    </Button>\n    <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle>\n        Add new Pioreactor\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n      <p>Follow the instructions to <a href=\"https://docs.pioreactor.com/user_guide/Raspberry%20Pi%20set%20up%20and%20software%20installation#adding-workers-to-your-cluster\">set up your Pioreactor's Raspberry Pi</a>.</p>\n\n      <p>Below, provide the hostname you used when installing the Pioreactor image onto the Raspberry Pi.\n      Your existing Pioreactors will automatically connect it to the cluster.\n      When finished, the new Pioreactor will show up on this page.</p>\n\n\n      <div>\n        <TextField\n          required\n          size=\"small\"\n          id=\"new-pioreactor-name\"\n          label=\"Provide hostname\"\n          variant=\"outlined\"\n          className={classes.textFieldWide}\n          onChange={handleNameChange}\n          value={name}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <PioreactorIcon style={{fontSize: \"1.1em\"}}/>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </div>\n\n      <div style={{minHeight: \"50px\"}}>\n        {isError? <p><Box color=\"error.main\">{errorMsg}</Box></p> : <p></p>}\n        {isRunning? <p>Installation is occuring in the background. You may navigate away from this page, including adding more Pioreactors. </p> : <p> </p>}\n      </div>\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        style={{marginTop: \"15px\"}}\n        onClick={onSubmit}\n        type=\"submit\"\n      >\n        {runningFeedback}\n      </Button>\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={`Adding new Pioreactor ${name}`}\n      autoHideDuration={7000}\n      key={\"snackbar-add-new\"}\n    />\n    </React.Fragment>\n  );}\n\n\n\nfunction PioreactorHeader(props) {\n  const classes = useStyles()\n  return (\n    <div>\n      <div className={classes.headerMenu}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Pioreactors\n          </Box>\n        </Typography>\n        <div className={classes.headerButtons}>\n          <ButtonConfirmStopProcessDialog/>\n          <AddNewPioreactor config={props.config}/>\n          <SettingsActionsDialogAll config={props.config} experiment={props.experiment}/>\n        </div>\n      </div>\n      <Divider/>\n    </div>\n  )\n}\n\n\n\nfunction PatientButton(props) {\n  const [buttonText, setButtonText] = useState(props.buttonText)\n\n  useEffect(\n    () => {\n      setButtonText(props.buttonText)\n    }\n  , [props.buttonText])\n\n  function wrappingOnClick() {\n    function f() {\n      setButtonText(<CircularProgress color=\"inherit\" size={21}/>)\n      props.onClick()\n    }\n    return f\n  }\n\n  return (\n    <Button\n      disableElevation\n      style={{width: \"70px\", marginTop: \"5px\", height: \"31px\"}}\n      color={props.color}\n      variant={props.variant}\n      disabled={props.disabled}\n      size=\"small\"\n      onClick={wrappingOnClick()}\n    >\n      {buttonText}\n    </Button>\n  )\n}\n\nfunction CalibrateDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [tabValue, setTabValue] = React.useState(0);\n\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false)\n    setTimeout(()=> setTabValue(0), 200) // we put a timeout here so the switching tabs doesn't occur during the close transition.\n  };\n\n\n  function startPioreactorJob(job){\n    return function() {\n      fetch(\"/run/\" + job + \"/\" + props.unit, {method: \"POST\"}).then(res => {\n      })\n    }\n  }\n\n  function clearBlank() {\n    return function() {\n      var message = new Message(\"\");\n      message.retained = true\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        props.experiment,\n        \"od_blank\",\n        \"mean\",\n      ].join(\"/\");\n      props.client.publish(message);\n    }\n  }\n\n  function createUserButtonsBasedOnState(jobState, job){\n\n    switch (jobState){\n      case \"disconnected\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"ready\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                buttonText=\"Running\"\n                disabled={true}\n               />\n              </div>)\n      default:\n        return(<div></div>)\n    }\n   }\n\n  const blankODButton = createUserButtonsBasedOnState(props.odBlankJobState, \"od_blank\")\n  const stirringCalibrationButton = createUserButtonsBasedOnState(props.stirringCalibrationState, \"stirring_calibration\")\n\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\" }} color=\"primary\" disabled={props.disabled} onClick={handleClickOpen}>\n        <TuneIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> Calibrate\n      </Button>\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle>\n          <Typography className={classes.suptitle}>\n            <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {(props.config['ui.rename'] &&  props.config['ui.rename'][props.unit]) ? `${props.config['ui.rename'][props.unit]} / ${props.unit}` : `${props.unit}`}\n          </Typography>\n          <Tabs\n            value={tabValue}\n            onChange={handleTabChange}\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            >\n            <Tab label=\"Blanks\"/>\n            <Tab label=\"Stirring\"/>\n            <Tab label=\"Dosing\" disabled={true}/>\n          </Tabs>\n          <IconButton\n            aria-label=\"close\"\n            onClick={handleClose}\n            sx={{\n              position: 'absolute',\n              right: 8,\n              top: 8,\n              color: (theme) => theme.palette.grey[500],\n            }}\n            size=\"large\">\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <TabPanel value={tabValue} index={0}>\n            <Typography  gutterBottom>\n             Record optical densities of blank (optional)\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              For more accurate growth rate and biomass inferences, you can subtract out the\n              media's optical density per sensor. Read more about <a href=\"\">using blanks</a>.\n            </Typography>\n\n            {blankODButton}\n\n            <Typography variant=\"body2\" component=\"p\" style={{marginTop: \"20px\"}}>\n              Recorded optical densities of blank vial: <code>{props.odBlankReading ? Object.entries(JSON.parse(props.odBlankReading)).map( ([k, v]) => `${k}:${v.toFixed(4)}` ).join(\", \") : \"—\"}</code> <Button color=\"primary\" size=\"small\" disabled={!props.odBlankReading} onClick={clearBlank()}>Clear</Button>\n            </Typography>\n            <Divider className={classes.divider} />\n\n          </TabPanel>\n          <TabPanel value={tabValue} index={1}>\n            <Typography  gutterBottom>\n             Stirring calibration (optional)\n            </Typography>\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n              You can improve the responsiveness of stirring RPM changes by running the below calibration. This calibration is\n              optional, and stirring RPM changes can still occur without running this calibration.\n            </Typography>\n\n            <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Add a vial, with a stirbar and ~15ml water, to the Pioreactor, then hit Start below. This calibration will take less than three minutes.\n            </Typography>\n\n            {stirringCalibrationButton}\n\n            <Divider className={classes.divider} />\n\n          </TabPanel>\n        </DialogContent>\n      </Dialog>\n  </React.Fragment>\n  );\n}\n\n\n\nfunction SelfTestDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n\n  function startPioreactorJob(job){\n    return function() {\n      fetch(\"/run/\" + job + \"/\" + props.unit, {method: \"POST\"}).then(res => {\n      })\n    }\n  }\n\n  function displayIcon(key, state){\n    if (props.selfTestTests == null){\n      return <IndeterminateCheckBoxIcon />\n    }\n    else if (props.selfTestTests[key].value === 1){\n      return <CheckIcon style={{color: readyGreen}}/>\n    }\n    else if (props.selfTestTests[key].value === 0){\n      return <CloseIcon style={{color: lostRed}}/>\n    }\n    else if (state === \"ready\") {\n      return <CircularProgress size={20} />\n    }\n    else {\n      return <IndeterminateCheckBoxIcon />\n    }\n  }\n\n\n  function createUserButtonsBasedOnState(jobState, job){\n\n    switch (jobState){\n      case \"disconnected\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"ready\":\n       return (<div>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                disabled={true}\n                buttonText=\"Running\"\n               />\n              </div>)\n      default:\n        return(<div></div>)\n    }\n  }\n\n  function colorOfIcon(){\n    return props.disabled ? \"disabled\" : \"primary\"\n  }\n\n  function Icon(){\n    if (props.selfTestTests == null){\n      return <IndeterminateCheckBoxOutlinedIcon color={colorOfIcon()} fontSize=\"15\" classes={{root: classes.textIcon}}/>\n    }\n    else {\n      return props.selfTestTests[\"all_tests_passed\"].value ? <CheckBoxOutlinedIcon color={colorOfIcon()} fontSize=\"15\" classes={{root: classes.textIcon}}/> : <IndeterminateCheckBoxOutlinedIcon color={colorOfIcon()} fontSize=\"15\" classes={{root: classes.textIcon}}/>\n    }\n  }\n\n  const selfTestButton = createUserButtonsBasedOnState(props.selfTestState, \"self_test\")\n\n  return (\n    <React.Fragment>\n      <Button style={{textTransform: 'none', float: \"right\" }} color=\"primary\" disabled={props.disabled} onClick={handleClickOpen}>\n        {Icon()} Self test\n      </Button>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>\n          <Typography className={classes.suptitle} gutterBottom>\n            <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {(props.config['ui.rename'] &&  props.config['ui.rename'][props.unit]) ? `${props.config['ui.rename'][props.unit]} / ${props.unit}` : `${props.unit}`}\n          </Typography>\n           Self test\n          <IconButton\n            aria-label=\"close\"\n            onClick={handleClose}\n            sx={{\n              position: 'absolute',\n              right: 8,\n              top: 8,\n              color: (theme) => theme.palette.grey[500],\n            }}\n            size=\"large\">\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" component=\"p\" gutterBottom>\n            Perform a check of the heating & temperature sensor, LEDs & photodiodes, and stirring.\n          </Typography>\n\n            {selfTestButton}\n            <Divider className={classes.divider} />\n\n            <List component=\"nav\"\n              subheader={\n                <ListSubheader style={{lineHeight: \"35px\"}} component=\"div\" disableSticky={true} disableGutters={true}>\n                  LEDs & photodiodes\n                </ListSubheader>\n              }\n            >\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_pioreactor_hat_present\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Pioreactor HAT is detected\" />\n              </ListItem>\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_all_positive_correlations_between_pds_and_leds\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Photodiodes are responsive to IR LED\" secondary={\n                    props.selfTestTests ?\n                      JSON.parse(props.selfTestTests[\"correlations_between_pds_and_leds\"].value).map(led_pd => `${led_pd[0]} ⇝ ${led_pd[1]}`).join(\",  \") :\n                      \"\"\n                    }/>\n              </ListItem>\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_ambient_light_interference\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"No ambient IR light detected\" />\n              </ListItem>\n            </List>\n\n            <List component=\"nav\"\n              subheader={\n                <ListSubheader style={{lineHeight: \"35px\"}} component=\"div\" disableSticky={true} disableGutters={true}>\n                  Heating & temperature\n                </ListSubheader>\n              }\n            >\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_detect_heating_pcb\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Heating PCB is detected\" />\n              </ListItem>\n\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_positive_correlation_between_temp_and_heating\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Heating is responsive\" />\n              </ListItem>\n            </List>\n\n\n            <List component=\"nav\"\n              subheader={\n                <ListSubheader style={{lineHeight: \"35px\"}} component=\"div\" disableSticky={true} disableGutters={true}>\n                  Stirring\n                </ListSubheader>\n              }\n            >\n              <ListItem className={classes.testingListItem}>\n                <ListItemIcon className={classes.testingListItemIcon}>\n                  {displayIcon(\"test_positive_correlation_between_rpm_and_stirring\", props.selfTestState)}\n                </ListItemIcon>\n                <ListItemText primary=\"Stirring RPM is responsive\" />\n              </ListItem>\n            </List>\n\n          <Divider className={classes.divider} />\n        </DialogContent>\n      </Dialog>\n  </React.Fragment>\n  );\n}\n\n\n\n\n\n\nfunction SettingsActionsDialog(props) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\n  const [tabValue, setTabValue] = React.useState(0);\n  const [openChangeDosingDialog, setOpenChangeDosingDialog] = React.useState(false);\n  const [openChangeLEDDialog, setOpenChangeLEDDialog] = React.useState(false);\n  const [openChangeTemperatureDialog, setOpenChangeTemperatureDialog] = React.useState(false);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n\n  function setPioreactorJobState(job, state) {\n    return function() {\n      setPioreactorJobAttr(`${job}/$state`, state)\n    };\n  }\n\n  function startPioreactorJob(job){\n    return function() {\n      fetch(\"/run/\" + job + \"/\" + props.unit, {method: \"POST\"}).then(res => {\n      })\n    }\n  }\n\n  function stopPioreactorJob(job){\n    return function() {\n      setPioreactorJobAttr(`${job}/$state`, \"disconnected\")\n      //fetch(\"/stop/\" + job + \"/\" + props.unit, {method: \"POST\"}).then(res => {})\n    }\n  }\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      props.unit,\n      props.experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      props.client.publish(message);\n    }\n    catch (e) {\n      console.log(e)\n      props.client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(measurementUnit) {\n    return function(e) {\n      if ((e.key === \"Enter\") && (e.target.value)) {\n        setPioreactorJobAttr(e.target.id, e.target.value);\n        setSnackbarMessage(`Updating to ${e.target.value} ${measurementUnit}.`)\n        setSnackbarOpen(true)\n      }\n    }\n  }\n\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTimeout(()=> setTabValue(0), 200) // we put a timeout here so the switching tabs doesn't occur during the close transition.\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(jobState, job){\n    switch (jobState){\n      case \"lost\":\n        return (<div key={\"patient_buttons_\" + job}>\n          <PatientButton\n            color=\"secondary\"\n            variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n            buttonText=\"Start\"\n          />\n        </div>)\n      case \"disconnected\":\n       return (<div key={\"patient_buttons_\" + job}>\n               <PatientButton\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={startPioreactorJob(job)}\n                buttonText=\"Start\"\n               />\n              </div>)\n      case \"init\":\n        return (<div key={\"patient_buttons_\" + job}>\n          <PatientButton\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={()=>(false)}\n            buttonText=<CircularProgress color=\"inherit\" size={22}/>\n            disabled={true}\n          />\n          <PatientButton\n            color=\"secondary\"\n            onClick={stopPioreactorJob(job)}\n            buttonText=\"Stop\"\n          />\n        </div>)\n      case \"ready\":\n        return (<div key={\"patient_buttons_\" + job}>\n          <PatientButton\n            color=\"secondary\"\n            variant=\"contained\"\n            onClick={setPioreactorJobState(job, \"sleeping\")}\n            buttonText=\"Pause\"\n          />\n          <PatientButton\n            color=\"secondary\"\n            onClick={stopPioreactorJob(job)}\n            buttonText=\"Stop\"\n          />\n        </div>)\n      case \"sleeping\":\n        return (\n          <div key={\"patient_buttons_\" + job}>\n            <PatientButton\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={setPioreactorJobState(job, \"ready\")}\n              buttonText=\"Resume\"\n            />\n            <PatientButton\n              color=\"secondary\"\n              onClick={stopPioreactorJob(job)}\n              buttonText=\"Stop\"\n            />\n          </div>\n          )\n      default:\n        return(<div key={\"patient_buttons_\" + job}></div>)\n    }\n   }\n  const LEDMap = props.config['leds']\n  const buttons = Object.fromEntries(Object.entries(props.jobs).map( ([job_key, job], i) => [job_key, createUserButtonsBasedOnState(job.state, job_key)]))\n\n  const stateDisplay = {\n    \"init\":          {display: \"Starting\", color: readyGreen},\n    \"ready\":         {display: \"On\", color: readyGreen},\n    \"sleeping\":      {display: \"Paused\", color: disconnectedGrey},\n    \"disconnected\":  {display: \"Off\", color: disconnectedGrey},\n    \"lost\":          {display: \"Lost\", color: lostRed},\n    \"NA\":            {display: \"Not available\", color: disconnectedGrey},\n  }\n\n  const isLargeScreen = useMediaQuery(theme => theme.breakpoints.down('xl'));\n  var dosingControlJob = props.jobs.dosing_control\n  var ledControlJob = props.jobs.led_control\n  var temperatureControlJob = props.jobs.temperature_control\n\n  return (\n    <div>\n    <Button style={{textTransform: 'none', float: \"right\" }} disabled={props.disabled} onClick={handleClickOpen} color=\"primary\">\n      <SettingsIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> Manage\n    </Button>\n    <Dialog maxWidth={isLargeScreen ? \"sm\" : \"md\"} fullWidth={true} open={open} onClose={handleClose}>\n      <DialogTitle>\n        <Typography className={classes.suptitle}>\n          <PioreactorIcon style={{verticalAlign: \"middle\", fontSize: \"1.2em\"}}/> {(props.config['ui.rename'] &&  props.config['ui.rename'][props.unit]) ? `${props.config['ui.rename'][props.unit]} / ${props.unit}` : `${props.unit}`}\n        </Typography>\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      <Tabs\n        value={tabValue}\n        onChange={handleTabChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        variant=\"scrollable\"\n        scrollButtons\n        allowScrollButtonsMobile\n        >\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"LEDs\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n        <TabPanel value={tabValue} index={0}>\n          {/* Unit Specific Activites */}\n          {Object.entries(props.jobs)\n            .filter(([job_key, job]) => job.metadata.display)\n            .filter(([job_key, job]) => !['dosing_control', 'led_control', 'temperature_control'].includes(job_key))\n            .map(([job_key, job]) =>\n            <div key={job_key}>\n              <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n                <Typography display=\"block\">\n                  {job.metadata.name}\n                </Typography>\n                <Typography display=\"block\" gutterBottom>\n                  <span style={{color:stateDisplay[job.state].color}}>{stateDisplay[job.state].display}</span>\n                </Typography>\n              </div>\n              <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n                {job.metadata.source !== \"app\" ? `Installed by ${job.metadata.source}` : \"\"}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: job.metadata.description}}/>\n              </Typography>\n\n              {buttons[job_key]}\n\n              <Divider className={classes.divider} />\n            </div>\n          )}\n\n\n          {/* Unit Specific Automations */}\n          {temperatureControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Temperature automation\n              </Typography>\n              <Typography display=\"block\" gutterBottom>\n                <span style={{color:stateDisplay[temperatureControlJob.state].color}}>{stateDisplay[temperatureControlJob.state].display}</span>\n              </Typography>\n            </div>\n            <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n            </Typography>\n            <div key={temperatureControlJob.metadata.key}>\n              {(temperatureControlJob.state === \"ready\") || (temperatureControlJob.state === \"sleeping\")\n              ?<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                Currently running LED automation <code>{temperatureControlJob.automation_name.value}</code>.\n                Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user_guide/Automations/LED%20Automations\">LED automations</a>.\n                </Typography>\n                {buttons[temperatureControlJob.metadata.key]}\n               </React.Fragment>\n              :<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                  <div dangerouslySetInnerHTML={{__html: temperatureControlJob.metadata.description}}/>\n                </Typography>\n\n                <Button\n                  style={{width: \"70px\", marginTop: \"5px\"}}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => setOpenChangeTemperatureDialog(true)}\n                >\n                  Start\n                </Button>\n\n               </React.Fragment>\n              }\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeTemperatureDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n              disabled={temperatureControlJob.state === \"disconnected\"}\n            >\n              Change temperature automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              open={openChangeTemperatureDialog}\n              onFinished={() => setOpenChangeTemperatureDialog(false)}\n              unit={props.unit}\n              config={props.config}\n              experiment={props.experiment}\n              isJobRunning={temperatureControlJob.state !== \"disconnected\"}\n              automationType=\"temperature\"\n              no_skip_first_run={true}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n          {dosingControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Dosing automation\n              </Typography>\n              <Typography display=\"block\" gutterBottom>\n                <span style={{color:stateDisplay[dosingControlJob.state].color}}>{stateDisplay[dosingControlJob.state].display}</span>\n              </Typography>\n            </div>\n            <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n            </Typography>\n            <div key={dosingControlJob.metadata.key}>\n              {(dosingControlJob.state === \"ready\") || (dosingControlJob.state === \"sleeping\")\n              ?<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                Currently running dosing automation <code>{dosingControlJob.automation_name.value}</code>.\n                Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user_guide/Automations/Dosing%20Automations\">dosing automations</a>.\n                </Typography>\n                {buttons[dosingControlJob.metadata.key]}\n               </React.Fragment>\n              :<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                  <div dangerouslySetInnerHTML={{__html: dosingControlJob.metadata.description}}/>\n                </Typography>\n\n                <Button\n                  style={{width: \"70px\", marginTop: \"5px\"}}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => setOpenChangeDosingDialog(true)}\n                >\n                  Start\n                </Button>\n\n               </React.Fragment>\n              }\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeDosingDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n              disabled={dosingControlJob.state === \"disconnected\"}\n            >\n              Change dosing automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              automationType=\"dosing\"\n              open={openChangeDosingDialog}\n              onFinished={() => setOpenChangeDosingDialog(false)}\n              unit={props.unit}\n              config={props.config}\n              experiment={props.experiment}\n              isJobRunning={dosingControlJob.state !== \"disconnected\"}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n          {ledControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                LED automation\n              </Typography>\n              <Typography display=\"block\" gutterBottom>\n                <span style={{color:stateDisplay[ledControlJob.state].color}}>{stateDisplay[ledControlJob.state].display}</span>\n              </Typography>\n            </div>\n            <Typography variant=\"caption\" display=\"block\" gutterBottom color=\"textSecondary\">\n            </Typography>\n            <div key={ledControlJob.metadata.key}>\n              {(ledControlJob.state === \"ready\") || (ledControlJob.state === \"sleeping\")\n              ?<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                Currently running LED automation <code>{ledControlJob.automation_name.value}</code>.\n                Learn more about <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com/user_guide/Automations/LED%20Automations\">LED automations</a>.\n                </Typography>\n                {buttons[ledControlJob.metadata.key]}\n               </React.Fragment>\n              :<React.Fragment>\n                <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                  <div dangerouslySetInnerHTML={{__html: ledControlJob.metadata.description}}/>\n                </Typography>\n\n                <Button\n                  style={{width: \"70px\", marginTop: \"5px\"}}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  onClick={() => setOpenChangeLEDDialog(true)}\n                >\n                  Start\n                </Button>\n\n               </React.Fragment>\n              }\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeLEDDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n              disabled={ledControlJob.state === \"disconnected\"}\n            >\n              Change LED automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              automationType=\"led\"\n              open={openChangeLEDDialog}\n              onFinished={() => setOpenChangeLEDDialog(false)}\n              unit={props.unit}\n              config={props.config}\n              experiment={props.experiment}\n              isJobRunning={ledControlJob.state !== \"disconnected\"}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n        </TabPanel>\n\n\n        <TabPanel value={tabValue} index={1}>\n          {Object.values(props.jobs)\n            .filter(job => job.metadata.display)\n            .map(job =>\n            Object.entries(job)\n              .filter(([key, setting]) => (key !== \"state\") && (key !== \"metadata\"))\n              .filter(([_, setting]) => setting.display)\n              .map(([key, setting]) =>\n            <React.Fragment>\n              <Typography  gutterBottom>\n                {setting.label}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                {setting.description}\n              </Typography>\n              <TextField\n                size=\"small\"\n                id={`${job.metadata.key.replace(\"_control\", \"_automation\")}/${key}`}\n                defaultValue={setting.value}\n                InputProps={{\n                  endAdornment: <InputAdornment position=\"end\">{setting.unit}</InputAdornment>,\n                }}\n                variant=\"outlined\"\n                onKeyPress={setPioreactorJobAttrOnEnter(setting.unit)}\n                className={classes.textFieldCompact}\n              />\n              <Divider className={classes.divider} />\n            </React.Fragment>\n\n          ))}\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pump for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionDosingForm action=\"add_media\" unit={props.unit} />\n          <Divider classes={{root: classes.divider}} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pump for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionDosingForm action=\"remove_waste\" unit={props.unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pump for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionDosingForm action=\"add_alt_media\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={3}>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['A']) ? \"Channel A\" : \"\"}\n          </Typography>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['A']) ? (LEDMap['A'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel A\" }\n          </Typography>\n          <ActionLEDForm channel=\"A\" unit={props.unit} />\n          <Divider className={classes.divider} />\n\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['B']) ? \"Channel B\" : \"\"}\n          </Typography>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['B']) ? (LEDMap['B'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel B\" }\n          </Typography>\n          <ActionLEDForm channel=\"B\" unit={props.unit} />\n          <Divider className={classes.divider} />\n\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['C']) ? \"Channel C\" : \"\"}\n          </Typography>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['C']) ? (LEDMap['C'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel C\" }\n          </Typography>\n\n          <ActionLEDForm channel=\"C\" unit={props.unit} />\n          <Divider className={classes.divider} />\n\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(LEDMap['D']) ? \"Channel D\" : \"\"}\n          </Typography>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            {(LEDMap['D']) ? (LEDMap['D'].replace(\"_\", \" \").replace(\"led\", \"LED\")) : \"Channel D\" }\n          </Typography>\n          <ActionLEDForm channel=\"D\" unit={props.unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      resumeHideDuration={2000}\n      key={\"snackbar\" + props.unit + \"settings\"}\n    />\n    </div>\n  );\n}\n\n\nfunction SettingsActionsDialogAll({config, experiment}) {\n\n  const classes = useStyles();\n  const unit = \"$broadcast\"\n  const [open, setOpen] = useState(false);\n  const [client, setClient] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState(\"\");\n  const [tabValue, setTabValue] = React.useState(0);\n  const [jobs, setJobs] = React.useState({});\n  const [openChangeTemperatureDialog, setOpenChangeTemperatureDialog] = React.useState(false);\n  const [openChangeDosingDialog, setOpenChangeDosingDialog] = React.useState(false);\n  const [openChangeLEDDialog, setOpenChangeLEDDialog] = React.useState(false);\n\n\n  useEffect(() => {\n    function fetchContribBackgroundJobs() {\n      fetch(\"/contrib/jobs\")\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((listOfJobs) => {\n          var jobs_ = {}\n          for (const job of listOfJobs){\n            var metaData_ = {state: \"disconnected\", metadata: {name: job.name, subtext: job.subtext, display: job.display, description: job.description, key: job.job_name, source:job.source}}\n            for(var i = 0; i < job[\"editable_settings\"].length; ++i){\n              var field = job[\"editable_settings\"][i]\n              metaData_[field.key] = {value: field.default, label: field.label, type: field.type, unit: field.unit || null, display: field.display, description: field.description}\n            }\n            jobs_[job.job_name] = metaData_\n          }\n          setJobs((prev) => ({...prev, ...jobs_}))\n        })\n        .catch((error) => {})\n    }\n    fetchContribBackgroundJobs();\n  }, [])\n\n\n  useEffect(() => {\n    if (!config['network.topology']){\n      return\n    }\n\n    var client\n    if (config.remote && config.remote.ws_url) {\n      client = new Client(\n        `ws://${config.remote.ws_url}/`,\n        \"webui_SettingsActionsDialogAll\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${config['network.topology']['leader_address']}`, 9001,\n        \"webui_SettingsActionsDialogAll\" + Math.random()\n      );\n    }\n    client.connect({timeout: 180, reconnect: true});\n    setClient(client)\n  },[config])\n\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  function setPioreactorJobState(job, state) {\n    return function sendMessage() {\n      var message = new Message(String(state));\n      message.destinationName = [\n        \"pioreactor\",\n        unit,\n        experiment,\n        job.metadata.key,\n        \"$state\",\n        \"set\",\n      ].join(\"/\");\n      message.qos = 1;\n      try{\n        client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 750)\n      }\n      finally {\n        const verbs = {\n          \"sleeping\":  \"Pausing\",\n          \"disconnected\":  \"Stopping\",\n          \"ready\":  \"Resuming\",\n        }\n        setSnackbarMessage(`${verbs[state]} ${job.metadata.name.toLowerCase()} on all active Pioreactors`)\n        setSnackbarOpen(true)\n      }\n    };\n  }\n\n  function startPioreactorJob(job){\n    return function() {\n      setSnackbarMessage(`Starting ${job.metadata.name.toLowerCase()} on all active Pioreactors`)\n      setSnackbarOpen(true)\n      fetch(\"/run/\" + job.metadata.key + \"/\" + unit, {method: \"POST\"})\n    }\n  }\n\n\n  function setPioreactorJobAttr(job_attr, value) {\n    var message = new Message(String(value));\n    message.destinationName = [\n      \"pioreactor\",\n      unit,\n      experiment,\n      job_attr,\n      \"set\",\n    ].join(\"/\");\n    message.qos = 1;\n    try{\n      client.publish(message);\n      setSnackbarOpen(true)\n    }\n    catch (e) {\n      console.log(e)\n      client.connect({onSuccess: () => setPioreactorJobAttr(job_attr, value)});\n    }\n  }\n\n  function setPioreactorJobAttrOnEnter(measurementUnit) {\n    return function(e) {\n      if ((e.key === \"Enter\") && (e.target.value)) {\n        setPioreactorJobAttr(e.target.id, e.target.value);\n        setSnackbarMessage(`Updating to ${e.target.value} ${measurementUnit}.`)\n        setSnackbarOpen(true)\n      }\n    }\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTimeout(()=> setTabValue(0), 200) // we put a timeout here so the switching tabs doesn't occur during the close transition.\n\n  };\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n\n  function createUserButtonsBasedOnState(job){\n    return (<div key={job.key}>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={startPioreactorJob(job)}\n        >\n          Start\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"sleeping\")}\n        >\n          Pause\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"primary\"\n          onClick={setPioreactorJobState(job, \"ready\")}\n        >\n          Resume\n        </Button>\n        <Button\n          className={classes.jobButton}\n          disableElevation\n          color=\"secondary\"\n          onClick={setPioreactorJobState(job, \"disconnected\")}\n        >\n          Stop\n        </Button>\n      </div>\n  )}\n\n\n  const buttons = Object.fromEntries(Object.entries(jobs).map( ([job_key, job], i) => [job_key, createUserButtonsBasedOnState(job)]))\n  const isLargeScreen = useMediaQuery(theme => theme.breakpoints.down('xl'));\n  var dosingControlJob = jobs.dosing_control\n  var ledControlJob = jobs.led_control\n  var temperatureControlJob = jobs.temperature_control\n\n  return (\n    <React.Fragment>\n    <Button style={{textTransform: 'none', float: \"right\" }} onClick={handleClickOpen} color=\"primary\">\n      <SettingsIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Manage all Pioreactors\n    </Button>\n    <Dialog  maxWidth={isLargeScreen ? \"sm\" : \"md\"} fullWidth={true}  open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle style={{backgroundImage: \"linear-gradient(to bottom left, rgba(83, 49, 202, 0.4), rgba(0,0,0,0))\"}}>\n        <Typography className={classes.suptitle}>\n          <b>All active Pioreactors</b>\n        </Typography>\n        <IconButton\n          aria-label=\"close\"\n          onClick={handleClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[600],\n          }}\n          size=\"large\">\n          <CloseIcon />\n        </IconButton>\n      <Tabs\n        value={tabValue}\n        onChange={handleTabChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        variant=\"scrollable\"\n        scrollButtons\n        allowScrollButtonsMobile\n      >\n        <Tab label=\"Activities\"/>\n        <Tab label=\"Settings\"/>\n        <Tab label=\"Dosing\"/>\n        <Tab label=\"LEDs\"/>\n      </Tabs>\n      </DialogTitle>\n      <DialogContent>\n\n        <TabPanel value={tabValue} index={0}>\n          {Object.entries(jobs)\n            .filter(([job_key, job]) => job.metadata.display)\n            .filter(([job_key, job]) => !['dosing_control', 'led_control', 'temperature_control'].includes(job_key))\n            .map(([job_key, job]) =>\n            <div key={job_key}>\n              <Typography gutterBottom>\n                {job.metadata.name}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: job.metadata.description}}/>\n              </Typography>\n\n              {buttons[job_key]}\n\n              <Divider classes={{root: classes.divider}} />\n            </div>\n          )}\n\n\n          {temperatureControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Temperature automation\n              </Typography>\n            </div>\n            <div>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: temperatureControlJob.metadata.description}}/>\n              </Typography>\n\n              {buttons['temperature_control']}\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeTemperatureDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n            >\n              Change temperature automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              open={openChangeTemperatureDialog}\n              onFinished={() => setOpenChangeTemperatureDialog(false)}\n              unit={unit}\n              config={config}\n              experiment={experiment}\n              isJobRunning={true}\n              automationType=\"temperature\"\n              no_skip_first_run={true}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n\n          {dosingControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                Dosing automation\n              </Typography>\n            </div>\n            <div>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: dosingControlJob.metadata.description}}/>\n              </Typography>\n\n              {buttons['dosing_control']}\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeDosingDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n            >\n              Change dosing automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              automationType=\"dosing\"\n              open={openChangeDosingDialog}\n              onFinished={() => setOpenChangeDosingDialog(false)}\n              unit={unit}\n              config={config}\n              experiment={experiment}\n              isJobRunning={true}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n\n          {ledControlJob &&\n          <React.Fragment>\n            <div style={{justifyContent: \"space-between\", display: \"flex\"}}>\n              <Typography display=\"block\">\n                LED automation\n              </Typography>\n            </div>\n            <div>\n              <Typography variant=\"body2\" component=\"p\" gutterBottom>\n                <div dangerouslySetInnerHTML={{__html: ledControlJob.metadata.description}}/>\n              </Typography>\n\n              {buttons['led_control']}\n            </div>\n\n            <Button\n              onClick={() => setOpenChangeLEDDialog(true)}\n              style={{marginTop: \"10px\"}}\n              size=\"small\"\n              color=\"primary\"\n            >\n              Change LED automation\n            </Button>\n\n            <ChangeAutomationsDialog\n              automationType=\"led\"\n              open={openChangeLEDDialog}\n              onFinished={() => setOpenChangeLEDDialog(false)}\n              unit={unit}\n              config={config}\n              experiment={experiment}\n              isJobRunning={true}\n              no_skip_first_run={false}\n            />\n          </React.Fragment>\n          }\n\n          <Divider className={classes.divider} />\n\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={1}>\n          {Object.values(jobs)\n            .filter(job => job.metadata.display)\n            .map(job =>\n            Object.entries(job)\n              .filter(([key, _]) => (key !== \"state\") && (key !== \"metadata\"))\n              .filter(([_, setting]) => setting.display)\n              .map(([key, setting]) =>\n            <React.Fragment key={key}>\n              <Typography  gutterBottom>\n                {setting.label}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                {setting.description}\n              </Typography>\n              <TextField\n                size=\"small\"\n                id={`${job.metadata.key.replace(\"_control\", \"_automation\")}/${key}`}\n                key={key}\n                defaultValue={setting.value}\n                InputProps={{\n                  endAdornment: <InputAdornment position=\"end\">{setting.unit}</InputAdornment>,\n                }}\n                variant=\"outlined\"\n                onKeyPress={setPioreactorJobAttrOnEnter(setting.unit)}\n                className={classes.textFieldCompact}\n              />\n              <Divider classes={{root: classes.divider}} />\n            </React.Fragment>\n\n          ))}\n\n        </TabPanel>\n        <TabPanel value={tabValue} index={2}>\n          <Typography  gutterBottom>\n            Add media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the media pumps for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionDosingForm action=\"add_media\" unit={unit} />\n          <Divider className={classes.divider} />\n          <Typography gutterBottom>\n            Add alternative media\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the alternative media pumps for a set duration (seconds), or a set\n            volume (mL).\n          </Typography>\n          <ActionDosingForm action=\"add_alt_media\" unit={unit} />\n          <Divider className={classes.divider} />\n          <Typography  gutterBottom>\n            Remove waste\n          </Typography>\n          <Typography variant=\"body2\" component=\"p\">\n            Run the waste pumps for a set duration (seconds), or a set volume (mL).\n          </Typography>\n          <ActionDosingForm action=\"remove_waste\" unit={unit} />\n          <Divider className={classes.divider} />\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={3}>\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel A\n          </Typography>\n          <ActionLEDForm channel=\"A\" unit={unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel B\n          </Typography>\n          <ActionLEDForm channel=\"B\" unit={unit} />\n          <Divider className={classes.divider} />\n\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel C\n          </Typography>\n          <ActionLEDForm channel=\"C\" unit={unit} />\n\n          <Divider className={classes.divider} />\n          <Typography style={{textTransform: \"capitalize\"}}>\n            Channel D\n          </Typography>\n          <ActionLEDForm channel=\"D\" unit={unit} />\n\n          <Divider className={classes.divider} />\n        </TabPanel>\n\n\n      </DialogContent>\n    </Dialog>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      resumeHideDuration={2000}\n      key={\"snackbar\" + unit + \"settings\"}\n    />\n    </React.Fragment>\n  );\n}\n\n\nfunction ActiveUnits(props){\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"10px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Active Pioreactors\n        </Box>\n      </Typography>\n      <div >\n\n      </div>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={true} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n  </React.Fragment>\n)}\n\n\nfunction FlashLEDButton(props){\n  const classes = useStyles();\n\n  const [flashing, setFlashing] = useState(false)\n\n\n  const onClick = () => {\n    setFlashing(true)\n    const sendMessage = () => {\n      var message = new Message(\"1\");\n      message.destinationName = [\n        \"pioreactor\",\n        props.unit,\n        \"$experiment\",\n        \"monitor\",\n        \"flicker_led_response_okay\",\n      ].join(\"/\");\n      message.qos = 0;\n      try{\n        props.client.publish(message);\n      }\n      catch (e){\n        console.log(e)\n        setTimeout(() => {sendMessage()}, 1000)\n      }\n    }\n\n    sendMessage()\n    setTimeout(() => {setFlashing(false)}, 3600 ) // .9 * 4\n  }\n\n  return (\n    <Button style={{textTransform: 'none', float: \"right\"}} className={clsx({blinkled: flashing})} disabled={props.disabled} onClick={onClick} color=\"primary\">\n      <FlareIcon color={props.disabled ? \"disabled\" : \"primary\"} fontSize=\"15\" classes={{root: classes.textIcon}}/> <span >  Blink  </span>\n    </Button>\n)}\n\n\n\nfunction PioreactorCard(props){\n  const classes = useStyles();\n  const unit = props.unit\n  const isUnitActive = props.isUnitActive\n  const experiment = props.experiment\n  const config = props.config\n  const [fetchComplete, setFetchComplete] = useState(false)\n\n  const [client, setClient] = useState(null)\n  const [jobs, setJobs] = useState({\n    monitor: {\n      state : \"disconnected\", metadata: {display: false}\n    },\n  })\n\n\n\n  useEffect(() => {\n    function fetchContribBackgroundJobs() {\n      fetch(\"/contrib/jobs\")\n        .then((response) => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((listOfJobs) => {\n          var jobs_ = {}\n          for (const job of listOfJobs){\n            var metaData_ = {state: \"disconnected\", metadata: {name: job.name, subtext: job.subtext, display: job.display, description: job.description, key: job.job_name, source: job.source, is_testing: job.is_testing}}\n            for(var i = 0; i < job[\"editable_settings\"].length; ++i){\n              var field = job[\"editable_settings\"][i]\n              metaData_[field.key] = {value: field.default, label: field.label, type: field.type, unit: field.unit || null, display: field.display, description: field.description}\n            }\n            jobs_[job.job_name] = metaData_\n          }\n          setJobs((prev) => ({...prev, ...jobs_}))\n          setFetchComplete(true)\n        })\n        .catch((error) => {})\n    }\n    fetchContribBackgroundJobs();\n  }, [])\n\n  useEffect(() => {\n    const onConnect = () => {\n      client.subscribe([\"pioreactor\", unit, \"$experiment\", \"monitor\", \"$state\"].join(\"/\"));\n      for (const job of Object.keys(jobs)) {\n        if (job === \"monitor\") {continue;}\n\n        // for some jobs (self_test), we use a different experiment name to not clutter datasets,\n        const experimentName = jobs[job].metadata.is_testing ? \"_testing_\" + experiment : experiment\n\n        client.subscribe([\"pioreactor\", unit, experimentName, job, \"$state\"].join(\"/\"));\n        for (const setting of Object.keys(jobs[job])){\n          if ((setting !== \"state\") && (setting !== \"metadata\")){\n            var topic = [\n              \"pioreactor\",\n              unit,\n              experimentName,\n              (setting === \"automation_name\") ? job : job.replace(\"_control\", \"_automation\"), // this is for, ex, automation_name\n              setting\n            ].join(\"/\")\n            client.subscribe(topic);\n          }\n        }\n      }\n    }\n\n    const onMessageArrived = (message) => {\n      var parsedFloat = parseFloat(message.payloadString); // try to parse it as a float first\n      var payload = isNaN(parsedFloat) ? message.payloadString : parsedFloat;\n      var [job, setting] = message.topic.split('/').slice(-2)\n      if (setting === \"$state\"){\n        setJobs((prev) => ({...prev, [job]: {...prev[job], state: payload}}))\n      } else if (job.endsWith(\"_automation\")) {\n        // needed because settings are attached to _automations, not _control\n        job = job.replace(\"_automation\", \"_control\")\n        setJobs((prev) => ({...prev, [job]: {...prev[job], [setting]: {...prev[job][setting], value: payload }}}))\n      } else {\n        setJobs((prev) => ({...prev, [job]: {...prev[job], [setting]: {...prev[job][setting], value: payload }}}))\n      }\n    }\n\n    if (!props.config['network.topology']){\n      return\n    }\n\n    if (!isUnitActive){\n      return\n    }\n\n    if (!experiment){\n      return\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_address']}`, 9001,\n        \"webui\" + Math.random()\n      );\n    }\n    client.onMessageArrived = onMessageArrived\n    client.connect({onSuccess: onConnect, reconnect: true});\n    setClient(client)\n  },[config, experiment, fetchComplete, isUnitActive])\n\n  const getInicatorLabel = (state, isActive) => {\n    if ((state === \"disconnected\") && isActive) {\n      return \"Offline, need to power up\"\n    }\n    else if ((state === \"disconnected\") && !isActive){\n      return \"Offline, change inventory status in config.ini\"\n    }\n    else if (state === \"lost\"){\n      return \"Lost, something went wrong. Try power-cycling the unit.\"\n    }\n    else {\n      return \"Online and ready\"\n    }\n  }\n\n  const getIndicatorDotColor = (state) => {\n    if (state === \"disconnected\") {\n      return disconnectedGrey\n    }\n    else if (state === \"lost\"){\n      return lostRed\n    }\n    else {\n      return readyGreen\n    }\n  }\n\n  const getIndicatorDotShadow = (state) => {\n    if (state === \"disconnected\") {\n      return 0\n    }\n    else {\n      return 6\n    }\n  }\n\n  const indicatorDotColor = getIndicatorDotColor(jobs.monitor.state)\n  const indicatorDotShadow = getIndicatorDotShadow(jobs.monitor.state)\n  const indicatorLabel = getInicatorLabel(jobs.monitor.state, isUnitActive)\n\n\n  return (\n    <Card className={classes.pioreactorCard} id={unit}>\n\n      <CardContent className={classes.cardContent}>\n        <div className={\"fixme\"}>\n          <Typography className={clsx(classes.suptitle)} color=\"textSecondary\">\n            {(props.config['ui.rename'] && props.config['ui.rename'][unit]) ? unit : \"\"}\n          </Typography>\n          <div className={classes.cardHeaderSettings}>\n            <div style={{display: \"flex\", justifyContent: \"left\"}}>\n              <Typography className={clsx(classes.unitTitle, {[classes.disabledText]: !isUnitActive})} gutterBottom>\n                <PioreactorIcon color={isUnitActive ? \"inherit\" : \"disabled\"} style={{verticalAlign: \"middle\"}} sx={{ display: {xs: 'none', sm: 'none', md: 'inline' } }}/>\n                {(props.config['ui.rename'] && props.config['ui.rename'][unit]) ? props.config['ui.rename'][unit] : unit }\n              </Typography>\n              <Tooltip title={indicatorLabel} placement=\"right\">\n                <div>\n                  <div aria-label={indicatorLabel} className=\"indicator-dot\" style={{boxShadow: `0 0 ${indicatorDotShadow}px ${indicatorDotColor}, inset 0 0 12px  ${indicatorDotColor}`}}/>\n                </div>\n              </Tooltip>\n            </div>\n            <div className={classes.cardHeaderButtons}>\n              <div>\n                <SelfTestDialog\n                  client={client}\n                  disabled={!isUnitActive}\n                  config={props.config}\n                  unit={unit}\n                  selfTestState={jobs['self_test'] ? jobs['self_test'].state : null}\n                  selfTestTests={jobs['self_test'] ? jobs['self_test'] : null}\n                />\n              </div>\n              <div>\n                <FlashLEDButton client={client} disabled={!isUnitActive} config={props.config} unit={unit}/>\n              </div>\n              <div>\n                <CalibrateDialog\n                  config={props.config}\n                  client={client}\n                  odBlankReading={jobs['od_blank'] ? jobs['od_blank'].mean.value : null}\n                  odBlankJobState={jobs['od_blank'] ? jobs['od_blank'].state : null}\n                  stirringCalibrationState={jobs['stirring_calibration'] ? jobs['stirring_calibration'].state : null}\n                  experiment={experiment}\n                  unit={unit}\n                  disabled={!isUnitActive}\n                />\n              </div>\n              <SettingsActionsDialog\n                config={props.config}\n                client={client}\n                unit={unit}\n                disabled={!isUnitActive}\n                experiment={experiment}\n                jobs={jobs}\n              />\n            </div>\n          </div>\n        </div>\n\n\n      <div style={{\n          display: \"flex\",\n          margin: \"15px 20px 20px 0px\",\n          flexDirection: \"row\",\n        }}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Activities:\n            </Box>\n          </Typography>\n        </div>\n        <div\n         className={classes.rowOfUnitSettingDisplay}\n        >\n          {Object.values(jobs)\n              .filter(job => job.metadata.display)\n              .map(job => (\n            <div className={classes.textbox} key={job.metadata.key}>\n              <Typography variant=\"body2\" style={{fontSize: \"0.84rem\"}} className={clsx({[classes.disabledText]: !isUnitActive})}>\n                {job.metadata.name}\n              </Typography>\n              <UnitSettingDisplay\n                value={job.state}\n                isUnitActive={isUnitActive}\n                default=\"disconnected\"\n                subtext={job.metadata.subtext ? job[job.metadata.subtext].value : null}\n                isStateSetting\n              />\n            </div>\n         ))}\n\n        </div>\n      </div>\n\n      <Divider/>\n\n      <div style={{\n          display: \"flex\",\n          margin: \"15px 20px 20px 0px\",\n          flexDirection: \"row\",\n        }}>\n        <div className={classes.textboxLabel}>\n          <Typography variant=\"body2\">\n            <Box fontWeight=\"fontWeightBold\" className={clsx({[classes.disabledText]: !isUnitActive})}>\n              Settings:\n            </Box>\n          </Typography>\n        </div>\n        <div\n         className={classes.rowOfUnitSettingDisplay}\n        >\n          {Object.values(jobs).map(job =>\n            Object.entries(job)\n              .filter(([key, setting]) => (key !== \"state\") && (key !== \"metadata\"))\n              .filter(([_, setting]) => setting.display)\n              .map(([key, setting]) =>\n            <div className={classes.textbox} key={job.metadata.key + key}>\n              <Typography variant=\"body2\" style={{fontSize: \"0.84rem\"}} className={clsx({[classes.disabledText]: !isUnitActive})}>\n                {setting.label}\n              </Typography>\n              <UnitSettingDisplay\n                value={setting.value}\n                isUnitActive={isUnitActive}\n                measurementUnit={setting.unit}\n                precision={2}\n                default=\"—\"\n                isLEDIntensity={setting.label === \"LED intensity\"}\n                config={props.config}\n              />\n            </div>\n         ))}\n        </div>\n      </div>\n\n\n      </CardContent>\n    </Card>\n)}\n\n\nfunction InactiveUnits(props){\n\n  return (\n  <React.Fragment>\n    <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"10px\", marginTop: \"15px\"}}>\n      <Typography variant=\"h5\" component=\"h2\">\n        <Box fontWeight=\"fontWeightRegular\">\n          Inactive Pioreactors\n        </Box>\n      </Typography>\n    </div>\n    {props.units.map(unit =>\n      <PioreactorCard isUnitActive={false} key={unit} unit={unit} config={props.config} experiment={props.experiment}/>\n  )}\n    </React.Fragment>\n)}\n\nfunction Pioreactors({title, config}) {\n    const [experimentMetadata, setExperimentMetadata] = React.useState({})\n\n    React.useEffect(() => {\n      document.title = title;\n      function getLatestExperiment() {\n          fetch(\"/get_latest_experiment\")\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            setExperimentMetadata(data)\n          });\n        }\n      getLatestExperiment()\n    }, [title])\n\n    const entries = (a) => Object.entries(a)\n\n    return (\n        <Grid container spacing={2} >\n\n\n          <Grid item md={12} xs={12}>\n            <PioreactorHeader config={config} experiment={experimentMetadata.experiment}/>\n            <ActiveUnits experiment={experimentMetadata.experiment} config={config} units={config['network.inventory'] ? entries(config['network.inventory']).filter((v) => v[1] === \"1\").map((v) => v[0]) : [] }/>\n            <InactiveUnits experiment={experimentMetadata.experiment} config={config} units={config['network.inventory'] ? entries(config['network.inventory']).filter((v) => v[1] === \"0\").map((v) => v[0]) : [] }/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Pioreactors;\n\n","import clsx from 'clsx';\nimport { Client, Message } from \"paho-mqtt\";\nimport { useParams } from 'react-router-dom';\n\nimport React, {useState, useEffect} from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport PropTypes from 'prop-types';\nimport { useMediaQuery } from \"@mui/material\";\n\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\n\n\nconst readyGreen = \"#4caf50\"\nconst disconnectedGrey = \"grey\"\nconst lostRed = \"#DE3618\"\n\n\nfunction PioreactorUnit({title, config}) {\n    const [experimentMetadata, setExperimentMetadata] = React.useState({})\n    const { unit } = useParams();\n\n    React.useEffect(() => {\n      document.title = title;\n      function getLatestExperiment() {\n          fetch(\"/get_latest_experiment\")\n          .then((response) => {\n            return response.json();\n          })\n          .then((data) => {\n            setExperimentMetadata(data)\n          });\n        }\n      getLatestExperiment()\n    }, [title])\n\n\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <h2>\n              {unit}\n            </h2>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default PioreactorUnit;\n\n","import React from \"react\";\nimport Grid from '@mui/material/Grid';\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Chart from \"./Chart\";\nimport ChangeAutomationsDialog from \"./ChangeAutomationsDialog\"\n\n\nfunction StartHeating(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openChangeTemperatureDialog, setOpenChangeTemperatureDialog] = React.useState(false);\n\n  const onClick = () => {\n    setOpenChangeTemperatureDialog(true);\n    setIsClicked(true);\n  };\n\n  return(\n    <div>\n      <p> For consistent temperatures of the culture, we recommend using the onboard heating. Click below and set the temperature of the cultures (you can change this temperature later).</p>\n\n      <Button\n        variant=\"contained\"\n        disabled={isClicked ? true : false }\n        onClick={onClick}\n      >\n        Start heating\n      </Button>\n\n      <ChangeAutomationsDialog\n        open={openChangeTemperatureDialog}\n        onFinished={() => setOpenChangeTemperatureDialog(false)}\n        unit={\"$broadcast\"}\n        config={props.config}\n        experiment={\"+\"}\n        isJobRunning={false}\n        automationType=\"temperature\"\n        no_skip_first_run={true}\n      />\n\n  </div>\n  )\n}\n\n\nfunction StartStirring(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/stirring/$broadcast\", {\n        method: \"POST\"}\n      ).then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> To get an accurate reading, we need to start start the stirring. This also provides gas transfer and keeps the cells in suspension.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start stirring </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"Stirring starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarStirring\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartODReading(props){\n\n  const [isClicked, setIsClicked] = React.useState(false)\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n\n  const onClick = (e) => {\n    setIsClicked(true)\n    fetch(\"/run/od_reading/$broadcast\",  {method: \"POST\"}).then(res => {\n      if (res.status === 200){\n        setOpenSnackbar(true);\n      }\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p> Next, we will turn on the optical density reading. We also call this <em>OD readings</em>. This will provide us with a measure of cell density. In a moment, you should see the data in the chart below. </p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start OD readings </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={\"OD reading starting\"}\n      autoHideDuration={7000}\n      key={\"snackbarOD\"}\n    />\n  </div>\n  )\n}\n\n\nfunction StartSensors(props){\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justifyContent=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartHeating config={props.config}/></Grid>\n      <Grid item xs={10}><StartStirring/></Grid>\n      <Grid item xs={10}><StartODReading/></Grid>\n      <Grid item xs={12}>\n        <Chart\n          config={props.config}\n          isODReading={true}\n          fontScale={1.0}\n          dataSource=\"od_readings_raw\"\n          interpolation=\"stepAfter\"\n          title=\"Optical density\"\n          topic=\"od_reading/od_raw/+\"\n          yAxisLabel=\"Voltage\"\n          payloadKey=\"voltage\"\n          experiment=\"+\"\n          deltaHours={1}\n          lookback={1}\n          fixedDecimals={3}\n        />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n  );}\n\n\nexport default StartSensors;\n","\nimport React from \"react\";\nimport Grid from '@mui/material/Grid';\nimport Button from \"@mui/material/Button\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Chart from \"./Chart\";\n\n\n\nfunction StartGrowthRate(props){\n\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n  const [isClicked, setIsClicked] = React.useState(false);\n\n  const onClick = (e) => {\n    fetch(\"/run/growth_rate_calculating/$broadcast\", {method: \"POST\"}).then(r => {\n      setSnackbarMessage(\"Growth rate calculating starting\")\n      setOpenSnackbar(true)\n      setIsClicked(true)\n    })\n  }\n\n  const handleSnackbarClose = () => {\n    setOpenSnackbar(false);\n  };\n\n  return(\n    <div>\n      <p>Because of the varying strength & quality of the electronics, not all readings look the same - even for the same density of cells. So we compute a baseline measurement from the OD readings, and measure all growth against that baseline. </p>\n      <p>From the (normalized) OD readings, we can calculate the <em>implied hourly growth rate</em>, which is our measure of growth. </p>\n      <p>Let's start the growth rate calculations. This first computes the normalization constants, <b>which can take up to two minutes to complete</b>. After that, the graph below should start to populate.</p>\n      <Button variant=\"contained\"  color=\"primary\" disabled={isClicked ? true : false } onClick={onClick}> Start growth rate calculations </Button>\n      <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={openSnackbar}\n      onClose={handleSnackbarClose}\n      message={snackbarMessage}\n      autoHideDuration={7000}\n      key={\"snackbarGR\"}\n      />\n  </div>\n  )\n}\n\n\n\n\nfunction StartCalculations(props){\n  const [experiment, setExperiment] = React.useState(\"null_exp\")\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_latest_experiment\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setExperiment(data.experiment)\n        });\n      }\n      getData()\n  }, [])\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justifyContent=\"flex-start\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item xs={2}/>\n      <Grid item xs={10}><StartGrowthRate experiment={experiment}/></Grid>\n      <Grid item xs={12}>\n      <Chart\n        config={props.config}\n        experiment={experiment}\n        dataSource=\"growth_rates\"\n        interpolation=\"stepAfter\"\n        title=\"Implied growth rate\"\n        topic=\"growth_rate_calculating/growth_rate\"\n        payloadKey=\"growth_rate\"\n        yAxisLabel=\"Growth rate, h⁻¹\"\n        yAxisDomain={[-0.02, 0.1]}\n        lookback={100000}\n        deltaHour={1}\n        fixedDecimals={2}\n      />\n      </Grid>\n      <Grid item xs={2}/>\n    </Grid>\n  );}\n\n\nexport default StartCalculations;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Client, Message } from \"paho-mqtt\";\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport FormGroup from '@mui/material/FormGroup';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport {Typography} from '@mui/material';\nimport Button from \"@mui/material/Button\";\nimport Stepper from '@mui/material/Stepper';\nimport Step from '@mui/material/Step';\nimport StepLabel from '@mui/material/StepLabel';\nimport TextField from '@mui/material/TextField';\n\n//import CleaningScript from \"./components/CleaningScript\"\nimport StartSensors from \"./components/StartSensors\"\nimport StartCalculations from \"./components/StartCalculations\"\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  instructions: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(4),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    width: \"60%\"\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  halfTextField: {\n    width: \"95%\"\n  },\n}));\n\n\n\nfunction ExperimentSummaryForm(props) {\n  const classes = useStyles();\n  const [formError, setFormError] = React.useState(false);\n  const [helperText, setHelperText] = React.useState(\"\");\n  const [expName, setExpName] = React.useState(\"\");\n  const [timestamp, setTimestamp] = React.useState(moment.utc());\n  const [description, setDescription] = React.useState(\"\");\n\n\n  function publishExpNameToMQTT(){\n\n    function onConnect() {\n      var message = new Message(expName.trim());\n      message.destinationName = \"pioreactor/latest_experiment\"\n      message.qos = 1;\n      message.retained = true;\n      client.publish(message);\n    }\n\n    var client\n    if (props.config.remote && props.config.remote.ws_url) {\n      client = new Client(\n        `ws://${props.config.remote.ws_url}/`,\n        \"webui_publishExpNameToMQTT\" + Math.random()\n      )}\n    else {\n      client = new Client(\n        `${props.config['network.topology']['leader_address']}`, 9001,\n        \"webui_publishExpNameToMQTT\" + Math.random()\n      );\n    }\n    client.connect({ onSuccess: onConnect, timeout: 180});\n\n  }\n\n  function populateFields(){\n    fetch(\"/get_latest_experiment\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setExpName(data.experiment)\n        setDescription(data.description)\n      });\n  }\n\n\n\n\n  function killExistingJobs(){\n     fetch('/stop_all', {method: \"POST\"})\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (expName === \"\"){\n      setFormError(true)\n      setHelperText(\"Can't be blank.\")\n      return\n    }\n    else if (expName.includes(\"#\") || expName.includes(\"+\") || expName.includes(\"/\")) {\n      setFormError(true)\n      setHelperText(\"Can't use #, / or + characters in experiment name.\")\n      return\n    }\n\n    // TODO: confirm we are connected to MQTT\n\n    fetch('create_experiment',{\n        method: \"POST\",\n        body: JSON.stringify({experiment : expName.trim(), timestamp: timestamp.toISOString(), description: description}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.status === 200){\n          publishExpNameToMQTT()\n          setHelperText(\"\")\n          setFormError(false);\n          killExistingJobs()\n          props.handleNext()\n        }\n        else{\n          setFormError(true);\n          setHelperText(\"Experiment name already used.\")\n        }\n      }\n     )\n  }\n\n  const onExpNameChange = (e) => {\n    setExpName(e.target.value)\n  }\n  const onDescChange = (e) => {\n    setDescription(e.target.value)\n  }\n  const onTimestampChange = (e) => {\n    setTimestamp(e.target.value)\n  }\n\n\n  return (\n    <div className={classes.root}>\n        <FormGroup>\n        <Grid container spacing={1}>\n          <Grid item xs={12} md={6}>\n            <TextField\n              error={formError}\n              id=\"expName\"\n              label=\"Experiment name\"\n              value={expName}\n              required className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onExpNameChange}\n              helperText={helperText}\n              />\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <TextField\n              id=\"datetime\"\n              label=\"Start time\"\n              type=\"datetime-local\"\n              defaultValue={timestamp.local().format(\"YYYY-MM-DDTHH:mm:ss\")}\n              className={`${classes.halfTextField} ${classes.textField}`}\n              onChange={onTimestampChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} md={12}>\n            <TextField\n              label=\"Description\"\n              maxRows={4}\n              placeholder={\"Add a description: what microbe are you using? What is the media composition? This description can always be changed later.\"}\n              multiline\n              value={description}\n              className={classes.textField}\n              onChange={onDescChange}\n              fullWidth={true}\n            />\n          </Grid>\n\n          <Grid item xs={12} md={4}/>\n          <Grid item xs={12} md={8}>\n            <div style={{display: \"flex\", justifyContent: \"flex-end\"}}>\n              <Button size=\"small\" color=\"primary\" onClick={populateFields}>Populate with previous experiment</Button>\n              <Button variant=\"contained\" color=\"primary\" onClick={onSubmit}> Create </Button>\n            </div>\n          </Grid>\n        </Grid>\n        </FormGroup>\n    </div>\n  );\n}\n\n\n\n\n\nfunction StartNewExperimentContainer(props) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [skipped, setSkipped] = React.useState(new Set());\n\n  const getStepContent = (index) => {\n    return steps[index].content\n  }\n  const isStepOptional = (index) => {\n    return steps[index].optional\n  };\n\n  const isStepSkipped = (step) => {\n    return skipped.has(step);\n  };\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1){\n      window.location.href = \"/overview\";\n    } else {\n\n      let newSkipped = skipped;\n      if (isStepSkipped(activeStep)) {\n        newSkipped = new Set(newSkipped.values());\n        newSkipped.delete(activeStep);\n      }\n\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      setSkipped(newSkipped);\n      window.scrollTo({top: 0})\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  const steps = [\n    {title: 'Experiment summary', content: <ExperimentSummaryForm config={props.config} handleNext={handleNext}/>, optional: false},\n    //{title: 'Cleaning and preparation', content: <CleaningScript config={props.config}/>, optional: true},\n    {title: 'Start sensors', content: <StartSensors config={props.config}/>, optional: false},\n    {title: 'Start calculations', content: <StartCalculations config={props.config}/>, optional: false},\n  ];\n\n  return (\n    <Card className={classes.root}>\n      <CardContent className={classes.cardContent}>\n        <Typography variant=\"h5\" component=\"h1\">\n          Start a new experiment\n        </Typography>\n        <Stepper activeStep={activeStep}>\n          {steps.map((step, index) => {\n            const stepProps = {};\n            const labelProps = {};\n            if (step.optional) {\n              labelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n            }\n            if (isStepSkipped(index)) {\n              stepProps.completed = false;\n            }\n            return (\n              <Step key={step.title} {...stepProps}>\n                <StepLabel {...labelProps}>{step.title}</StepLabel>\n              </Step>\n            );\n          })}\n        </Stepper>\n        <div>\n          {activeStep === steps.length ? (\n            <div>\n              <Typography className={classes.instructions}>\n                All steps completed - you're finished\n              </Typography>\n              <Button onClick={handleReset} className={classes.button}>\n                Reset\n              </Button>\n            </div>\n          ) : (\n            <div>\n              <Typography className={classes.instructions}>{getStepContent(activeStep)}</Typography>\n              <div>\n                <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\n                  Back\n                </Button>\n                {isStepOptional(activeStep) && (\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleSkip}\n                    className={classes.button}\n                  >\n                    Skip\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"contained\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  {activeStep === steps.length - 1 ? 'Go to overview' : 'Next'}\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n\n\nfunction StartNewExperiment(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item xs={12} md={12}>\n            <StartNewExperimentContainer config={props.config}/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default StartNewExperiment;\n\n","import React from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport Snackbar from '@mui/material/Snackbar';\nimport Select from '@mui/material/Select';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nimport { CodeFlaskReact } from \"react-codeflask\"\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n}));\n\nclass EditableCodeDiv extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: \"\",\n      openSnackbar: false,\n      filename: \"config.ini\",\n      snackbarMsg: \"\",\n      buttonText: \"Save\",\n      hasChangedSinceSave: true,\n      availableConfigs: [\n        {name: \"shared config.ini\", filename: \"config.ini\"},\n      ]\n    };\n    this.saveCurrentCode = this.saveCurrentCode.bind(this);\n    this.deleteConfig = this.deleteConfig.bind(this);\n  }\n\n  getConfig(filename) {\n    fetch(\"/get_config/\" + filename)\n      .then(response => {\n        return response.text();\n      })\n      .then(text => {\n        this.setState({code: text});\n      })\n  }\n\n  getListOfConfigFiles(filename) {\n    fetch(\"/get_configs\")\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        this.setState(prevState => ({\n          availableConfigs: [...prevState.availableConfigs, ...json.filter(e => (e !== 'config.ini')).map(e => ({name: e, filename: e}))]\n        }));\n      })\n  }\n\n  saveCurrentCode() {\n    this.setState({buttonText: <CircularProgress color=\"inherit\" size={24}/>})\n    fetch('/save_new_config',{\n        method: \"POST\",\n        body: JSON.stringify({code :this.state.code, filename: this.state.filename}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" saved and synced.\", hasChangedSinceSave: false, buttonText: \"Saved\"})\n      } else {\n        this.setState({snackbarMsg: \"Hm. Something when wrong saving or syncing...\", hasChangedSinceSave: true, buttonText: \"Save\"})\n      }\n      this.setState({openSnackbar: true});\n    })\n  }\n\n  deleteConfig(){\n    fetch('/delete_config',{\n        method: \"POST\",\n        body: JSON.stringify({filename: this.state.filename}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n    .then(res => {\n      if (res.ok) {\n        this.setState({snackbarMsg: this.state.filename + \" deleted.\"})\n      } else {\n        this.setState({snackbarMsg: \"Hm. Something when wrong deleting...\"})\n      }\n      this.setState({openSnackbar: true});\n      setTimeout(function () {\n        window.location.reload();\n      }, 750);\n    })\n  }\n\n  componentDidMount() {\n    this.getConfig(this.state.filename)\n    this.getListOfConfigFiles()\n  }\n\n  onSelectionChange = (e) => {\n    this.setState({filename: e.target.value})\n    this.getConfig(e.target.value)\n  }\n\n  getCodeFlaskRef = (codeFlask) => {\n    this.codeFlask = codeFlask\n  }\n\n  onTextChange = (code) => {\n    this.setState({code: code, hasChangedSinceSave: true, buttonText: \"Save\"})\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({openSnackbar: false});\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div>\n          <Select\n            style={{margin: \"10px 10px 10px 10px\"}}\n            native\n            variant=\"standard\"\n            value={this.state.filename}\n            onChange={this.onSelectionChange}\n            inputProps={{\n              name: 'config',\n              id: 'config',\n            }}\n          >\n            {this.state.availableConfigs.map((v) => {\n              return <option key={v.filename} value={v.filename}>{v.name}</option>\n              }\n            )}\n          </Select>\n        </div>\n\n        <div style={{letterSpacing: \"0em\", margin: \"10px auto 10px auto\", position: \"relative\", width: \"98%\", height: \"300px\", border: \"1px solid #ccc\"}}>\n          <CodeFlaskReact\n            code={this.state.code}\n            onChange={this.onTextChange}\n            editorRef={this.getCodeFlaskRef}\n            language={\"python\"}\n          />\n        </div>\n        <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n          <Button\n            style={{margin: \"5px 12px 5px 12px\"}}\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={this.saveCurrentCode}\n            disabled={!this.state.hasChangedSinceSave}\n            >\n            {this.state.buttonText}\n          </Button>\n          <Button\n            style={{margin: \"5px 10px 5px 10px\"}}\n            color=\"secondary\"\n            onClick={this.deleteConfig}\n            disabled={(this.state.filename === \"config.ini\")}>\n            Delete config file\n          </Button>\n        </div>\n        <Snackbar\n          anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n          open={this.state.openSnackbar}\n          onClose={this.handleSnackbarClose}\n          message={this.state.snackbarMsg}\n          autoHideDuration={2000}\n          key={\"edit-config-snackbar\"}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\n\n\n\nfunction EditConfigContainer(){\n  const classes = useStyles();\n\n  return(\n    <React.Fragment>\n      <div>\n        <div>\n          <Typography variant=\"h5\" component=\"h2\">\n            <Box fontWeight=\"fontWeightBold\">\n              Configuration\n            </Box>\n          </Typography>\n        </div>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <p>Update the <code>config.ini</code> files. The shared <code>config.ini</code> will be deployed to <em>all</em> Pioreactors, but configuration can be overwritten by editing specific Pioreactor's <code>config.ini</code>.</p>\n          <EditableCodeDiv/>\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}><span role=\"img\">💡</span> Learn more about Pioreactor  <a href=\"https://docs.pioreactor.com/user_guide/Configuration%20via%20config\" target=\"_blank\" rel=\"noopener noreferrer\">configuration</a>.</p>\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction EditConfig(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n             <EditConfigContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default EditConfig;\n\n","import React from \"react\";\nimport MarkdownView from 'react-showdown';\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport Snackbar from '@mui/material/Snackbar';\nimport Link from '@mui/material/Link';\nimport UpdateIcon from '@mui/icons-material/Update';\nimport Divider from '@mui/material/Divider';\nimport SystemUpdateAltIcon from '@mui/icons-material/SystemUpdateAlt';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textIcon: {\n    fontSize: 15,\n    verticalAlign: \"middle\",\n    margin: \"0px 3px\"\n  },\n}));\n\n\nfunction ConfirmDialog() {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [openSnackbar, setOpenSnackbar] = React.useState(false)\n\n  const updateVersion = () => {\n    setOpen(false)\n    setOpenSnackbar(true)\n    fetch(\"/update_app\", {method: \"POST\"})\n    .then(res => {\n      if (res.ok) {\n        window.location.reload();\n        return false\n      }\n    })\n  }\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button onClick={handleClickOpen} style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n        <UpdateIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> Update to latest release\n      </Button>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Confirm update to latest release\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Updating will not stop or change currently running activities or experiments.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={updateVersion} color=\"primary\">\n            Update now\n          </Button>\n          <Button onClick={handleClose} color=\"secondary\" autoFocus>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Snackbar\n        anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n        open={openSnackbar}\n        message={\"Updating in the background - you may leave this page\"}\n        autoHideDuration={20000}\n        key={\"snackbar-update\"}\n      />\n    </React.Fragment>\n  );\n}\n\n\nfunction PageHeader(props) {\n  const classes = useStyles();\n  const [version, setVersion] = React.useState(\"\")\n  const [latestVersion, setLatestVersion] = React.useState(\"\")\n\n\n\n  React.useEffect(() => {\n    async function getCurrentAppVersion() {\n         await fetch(\"/get_app_version\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setVersion(data)\n        });\n      }\n\n    async function getLatestAppVersion() {\n         await fetch(\"https://api.github.com/repos/pioreactor/pioreactor/releases/latest\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setLatestVersion(data['name'])\n        });\n      }\n\n      getCurrentAppVersion()\n      getLatestAppVersion()\n  }, [])\n\n  return (\n    <div>\n      <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: \"5px\"}}>\n        <Typography variant=\"h5\" component=\"h1\">\n          <Box fontWeight=\"fontWeightBold\">\n            Updates\n          </Box>\n        </Typography>\n        <div >\n          <ConfirmDialog/>\n          <Link color=\"inherit\" underline=\"none\" href=\"https://github.com/Pioreactor/pioreactor/releases\" target=\"_blank\" rel=\"noopener noreferrer\">\n            <Button style={{textTransform: 'none', float: \"right\", marginRight: \"0px\"}} color=\"primary\">\n              <OpenInNewIcon fontSize=\"15\" classes={{root: classes.textIcon}}/> View latest release\n            </Button>\n          </Link>\n        </div>\n      </div>\n      <Divider/>\n      <Typography variant=\"subtitle2\">\n\n        <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n          <SystemUpdateAltIcon style={{ fontSize: 14, verticalAlign: \"middle\" }}/> Version installed:\n        </Box>\n        <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n          {version}\n        </Box>\n\n        <Box fontWeight=\"fontWeightBold\" style={{margin: \"10px 2px 10px 2px\", display:\"inline-block\"}}>\n            <UpdateIcon style={{ fontSize: 14, verticalAlign: \"middle\" }}/>\n          Latest version available:\n        </Box>\n        <Box fontWeight=\"fontWeightRegular\" style={{marginRight: \"20px\", display:\"inline-block\"}}>\n          {latestVersion}\n        </Box>\n\n      </Typography>\n    </div>\n  )\n}\n\n\n\nfunction ChangelogContainer(){\n  const classes = useStyles();\n\n  const [changelog, setChangelog] = React.useState(\"\")\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"https://raw.githubusercontent.com/Pioreactor/pioreactor/master/CHANGELOG.md\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setChangelog(data)\n        });\n      }\n      getData()\n  }, [])\n\n\n  return(\n    <React.Fragment>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n        <Typography variant=\"h6\" component=\"h6\">\n            Change log\n        </Typography>\n          <MarkdownView\n            markdown={changelog}\n          />\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Updates(props) {\n    React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <PageHeader/>\n            <ChangelogContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Updates;\n\n","import { Hashicon } from \"@emeraldpay/hashicon-react\";\nimport React from \"react\";\n\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport Snackbar from '@mui/material/Snackbar';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemAvatar from '@mui/material/ListItemAvatar';\nimport ListItemSecondaryAction from '@mui/material/ListItemSecondaryAction';\nimport ListItemText from '@mui/material/ListItemText';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Avatar from '@mui/material/Avatar';\nimport GetAppIcon from '@mui/icons-material/GetApp';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  pluginList:{\n    width: \"95%\",\n    margin: \"auto\",\n    marginBottom: \"15px\"\n  },\n  secondaryActionButton:{\n    marginLeft: \"10px\"\n  }\n}));\n\n\n\nfunction PageHeader(props) {\n  return (\n    <React.Fragment>\n    <div>\n      <div>\n        <Typography variant=\"h5\" component=\"h2\">\n          <Box fontWeight=\"fontWeightBold\">\n            Plugins\n          </Box>\n        </Typography>\n      </div>\n    </div>\n    </React.Fragment>\n  )\n}\n\n\n\nfunction ListAvailablePlugins({alreadyInstalledPluginsNames}){\n\n  const classes = useStyles();\n  const [availablePlugins, setAvailablePlugins] = React.useState([])\n  const [snackbarOpen, setSnackbarOpen] = React.useState(false)\n  const [snackbarMsg, setSnackbarMsg] = React.useState(\"\")\n\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"https://raw.githubusercontent.com/Pioreactor/list-of-plugins/main/plugins.json\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((json) => {\n          setAvailablePlugins(json)\n        });\n      }\n      getData()\n  }, [])\n\n  const installPlugin = (plugin_name) => () => {\n      setSnackbarOpen(true);\n      setSnackbarMsg(`Installing ${plugin_name} in the background...`);\n      fetch('/install_plugin', {\n        method: \"POST\",\n        body: JSON.stringify({plugin_name: plugin_name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then((response) => {\n        if (response.ok) {\n          window.location.reload();\n        } else {\n          throw new Error('Installation went wrong');\n        }\n      })\n  }\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n  return (\n    <React.Fragment>\n    <div className={classes.pluginList}>\n     <List dense={true}>\n        {availablePlugins\n            .filter(plugin => (!alreadyInstalledPluginsNames.includes(plugin.name)))\n            .map(plugin =>\n          <ListItem key={plugin.name}>\n            <ListItemAvatar>\n              <Avatar variant=\"square\" style={{backgroundColor:\"#FFFFFF\"}}>\n                <Hashicon value={plugin.name} size={40} />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={plugin.name}\n              secondary={plugin.description}\n              style={{maxWidth: \"500px\"}}\n            />\n            <ListItemSecondaryAction sx={{display: {xs: 'contents', md: 'block'}}}>\n\n              <Button\n                onClick={installPlugin(plugin.name)}\n                variant=\"text\"\n                size=\"small\"\n                color=\"inherit\"\n                aria-label=\"delete\"\n                endIcon={<GetAppIcon />}\n                className={classes.secondaryActionButton}\n              >\n                Install\n              </Button>\n              <Button\n                href={plugin.homepage}\n                target=\"_blank\" rel=\"noopener\"\n                variant=\"text\"\n                size=\"small\"\n                color=\"inherit\"\n                aria-label=\"install\"\n                disabled={!plugin.homepage}\n                endIcon={<OpenInNewIcon />}\n                className={classes.secondaryActionButton}\n              >\n                View\n              </Button>\n              </ListItemSecondaryAction>\n\n          </ListItem>,\n        )}\n      </List>\n    </div>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMsg}\n      autoHideDuration={15000}\n      resumeHideDuration={2000}\n      key={\"snackbar-installation\"}\n    />\n    </React.Fragment>\n  )\n}\n\n\n\nfunction ListInstalledPlugins({installedPlugins}){\n  const [snackbarOpen, setSnackbarOpen] = React.useState(false)\n  const [snackbarMsg, setSnackbarMsg] = React.useState(\"\")\n  const classes = useStyles();\n\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false)\n  }\n\n  const uninstallPlugin = (plugin_name) => () => {\n      setSnackbarOpen(true);\n      setSnackbarMsg(`Uninstalling ${plugin_name} in the background...`);\n      fetch('/uninstall_plugin', {\n        method: \"POST\",\n        body: JSON.stringify({plugin_name: plugin_name}),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then((response) => {\n        if (response.ok) {\n          window.location.reload();\n        } else {\n          throw new Error('Uninstallation went wrong');\n        }\n      })\n  }\n\n  return (\n    <React.Fragment>\n    <div className={classes.pluginList}>\n     <List dense={true}>\n        {installedPlugins.map(plugin =>\n          <ListItem key={plugin.name}>\n            <ListItemAvatar>\n              <Avatar variant=\"square\" style={{backgroundColor:\"#FFFFFF\"}}>\n                <Hashicon value={plugin.name} size={40} />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={`${plugin.name} (${plugin.version})`}\n              secondary={plugin.description}\n            />\n            <ListItemSecondaryAction sx={{display: {xs: 'contents', md: 'block'}}}>\n              <Button\n                onClick={uninstallPlugin(plugin.name)}\n                variant=\"text\"\n                size=\"small\"\n                color=\"inherit\"\n                aria-label=\"delete\"\n                endIcon={<DeleteIcon />}\n                disabled={plugin.source === \"plugins_folder\"}\n                className={classes.secondaryActionButton}\n              >\n                {plugin.source === \"plugins_folder\" ? \"Delete from plugins folder\" : \"Uninstall\" }\n              </Button>\n              <Button\n                href={plugin.homepage}\n                target=\"_blank\" rel=\"noopener\"\n                variant=\"text\"\n                size=\"small\"\n                color=\"inherit\"\n                aria-label=\"delete\"\n                disabled={!plugin.homepage}\n                endIcon={<OpenInNewIcon />}\n                className={classes.secondaryActionButton}\n              >\n                View\n              </Button>\n            </ListItemSecondaryAction>\n          </ListItem>,\n        )}\n      </List>\n    </div>\n    <Snackbar\n      anchorOrigin={{vertical: \"bottom\", horizontal: \"center\"}}\n      open={snackbarOpen}\n      onClose={handleSnackbarClose}\n      message={snackbarMsg}\n      autoHideDuration={7000}\n      resumeHideDuration={2000}\n      key={\"snackbar-installation\"}\n    />\n    </React.Fragment>\n  )\n}\n\n\nfunction PluginContainer(){\n  const classes = useStyles();\n\n  const [installedPlugins, setInstalledPlugins] = React.useState([])\n\n  React.useEffect(() => {\n    async function getData() {\n         await fetch(\"/get_installed_plugins\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((json) => {\n          setInstalledPlugins(json)\n        });\n      }\n      getData()\n  }, [])\n\n\n  return(\n    <React.Fragment>\n      <PageHeader/>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n          <p> Install, manage, and discover new Pioreactor plugins created by the community. These plugins can provide new functionalities for your Pioreactor (additional hardware may be necessary), or new automations to control dosing, temperature and LED operations.</p>\n\n         <Typography variant=\"h6\" component=\"h3\">\n          Installed plugins\n         </Typography>\n          <ListInstalledPlugins installedPlugins={installedPlugins}/>\n\n\n         <Typography variant=\"h6\" component=\"h3\">\n          Available plugins from the community\n         </Typography>\n          <ListAvailablePlugins alreadyInstalledPluginsNames={installedPlugins.map(plugin => plugin.name)}/>\n\n\n          <p style={{textAlign: \"center\", marginTop: \"30px\"}}><span role=\"img\">💡</span> Learn more about Pioreactor  <a href=\"https://docs.pioreactor.com/user_guide/Using%20community-built%20plugins\" target=\"_blank\" rel=\"noopener noreferrer\">plugins</a>.</p>\n\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Plugins(props) {\n    React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title])\n    return (\n        <Grid container spacing={2} >\n          <Grid item md={12} xs={12}>\n            <PluginContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\n\nexport default Plugins;\n","import React from \"react\";\nimport moment from \"moment\";\n\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport Chart from \"./components/Chart\";\nimport PioreactorIcon from './components/PioreactorIcon';\nimport FormControl from '@mui/material/FormControl';\nimport { makeStyles } from '@mui/styles';\nimport Select from '@mui/material/Select';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\"\n  },\n  formControl: {\n    margin: theme.spacing(2),\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  caption: {\n    marginLeft: \"30px\",\n    maxWidth: \"650px\"\n  }\n}));\n\n\nfunction ExperimentSelection(props) {\n  const classes = useStyles();\n\n  const [experiments, setExperiments] = React.useState([{experiment: \"<All experiments>\"}])\n\n  React.useEffect(() => {\n    async function getData() {\n       await fetch(\"/get_experiments\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        setExperiments(prevState => [ ...data, ...prevState])\n        props.handleChange(data[0].experiment)\n      });\n    }\n    getData()\n  }, [])\n\n  const handleExperimentSelectionChange = (e) => {\n    props.handleChange(e.target.value)\n  }\n\n  return (\n    <div className={classes.root}>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n\n        <Select\n          native\n          variant=\"standard\"\n          value={props.ExperimentSelection}\n          onChange={handleExperimentSelectionChange}\n          inputProps={{\n            name: 'experiment',\n            id: 'experiment',\n          }}\n        >\n          {experiments.map((v) => {\n            return <option value={v.experiment}>{v.experiment +  (v.timestamp ? ` (started ${moment(v.timestamp).format(\"MMMM D, YYYY\")})` : \"\")}</option>\n            }\n          )}\n        </Select>\n      </FormControl>\n\n    </div>\n  )\n}\n\n\n\nfunction Analysis(props) {\n\n  const [experimentSelection, setExperimentSelection] = React.useState(\"\")\n\n  React.useEffect(() => {\n    document.title = props.title;\n  }, [props.title]);\n\n  function handleExperimentSelectionChange(value) {\n    setExperimentSelection(value)\n  };\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2} justifyContent=\"space-between\">\n        <Grid item xs={12}>\n          <ExperimentSelection\n          experimentSelection={experimentSelection}\n          handleChange={handleExperimentSelectionChange}\n          />\n        </Grid>\n        <Grid item xs={12} md={6} container spacing={2} justifyContent=\"flex-start\" style={{height: \"100%\"}}>\n          <Grid item xs={12}>\n            <Chart\n\n              dataSource=\"growth_rates\"\n              title=\"Implied growth rate\"\n              topic=\"growth_rate_calculating/growth_rate\"\n              payloadKey=\"growth_rate\"\n              yAxisLabel=\"Growth rate, h⁻¹\"\n              experiment={experimentSelection}\n              deltaHours={20}\n              interpolation=\"stepAfter\"\n              yAxisDomain={[-0.02, 0.1]}\n              lookback={100000}\n              fixedDecimals={2}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <Chart\n\n              dataSource=\"temperature_readings\"\n              title=\"Temperature of vials\"\n              topic=\"temperature_control/temperature\"\n              yAxisLabel=\"temperature, ℃\"\n              payloadKey=\"temperature\"\n              experiment={experimentSelection}\n              interpolation=\"stepAfter\"\n              lookback={10000}\n              deltaHours={1}\n              yAxisDomain={[22.5, 37.5]}\n              fixedDecimals={1}\n            />\n          </Grid>\n\n\n          <Grid item xs={12}>\n            <Chart\n\n              yAxisDomain={[0.00, 0.05]}\n              dataSource=\"alt_media_fraction\"\n              interpolation=\"stepAfter\"\n              payloadKey=\"alt_media_fraction\"\n              title=\"Fraction of volume that is alternative media\"\n              topic=\"alt_media_calculating/alt_media_fraction\"\n              yAxisLabel=\"Fraction\"\n              experiment={experimentSelection}\n              deltaHours={1} // hack to make all points display\n              fixedDecimals={3}\n              lookback={100000}\n            />\n          </Grid>\n\n        </Grid>\n        <Grid item xs={12} md={6} container spacing={2} justifyContent=\"flex-start\" style={{height: \"100%\"}}>\n\n          <Grid item xs={12}>\n            <Chart\n\n              isODReading={true}\n              dataSource=\"od_readings_filtered\"\n              title=\"Normalized optical density\"\n              payloadKey=\"od_filtered\"\n              topic=\"growth_rate_calculating/od_filtered\"\n              yAxisLabel=\"Current OD / initial OD\"\n              experiment={experimentSelection}\n              deltaHours={20}\n              interpolation=\"stepAfter\"\n              lookback={100000}\n              fixedDecimals={2}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <Chart\n\n              isODReading={true}\n              dataSource=\"od_readings_raw\"\n              title=\"Optical density\"\n              payloadKey=\"voltage\"\n              topic=\"od_reading/od_raw/+\"\n              yAxisLabel=\"Voltage\"\n              experiment={experimentSelection}\n              deltaHours={20}\n              interpolation=\"stepAfter\"\n              lookback={10000}\n              fixedDecimals={3}\n            />\n          </Grid>\n\n        </Grid>\n\n      </Grid>\n    </React.Fragment>\n  );\n}\n\nexport default Analysis;\n","import React from \"react\";\nimport Grid from '@mui/material/Grid';\nimport { makeStyles } from '@mui/styles';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/Card';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport Box from '@mui/material/Box';\nimport {Typography} from '@mui/material';\nimport FormGroup from '@mui/material/FormGroup';\nimport TextField from '@mui/material/TextField';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"15px\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  cardContent: {\n    padding: \"10px\"\n  },\n  pos: {\n    marginBottom: 0,\n  },\n  textField:{\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  halfTextField: {\n    width: \"70%\"\n  },\n}));\n\n\n\nfunction FeedbackContainer(props){\n  const classes = useStyles();\n  const [formError, setFormError] = React.useState(false);\n  const [helperText, setHelperText] = React.useState(\"\");\n  const [email, setEmail] = React.useState(\"\");\n  const [feedback, setFeedback] = React.useState(\"\");\n  const [sending, setSending] = React.useState(false);\n  const [hasBeenSent, setHasBeenSent] = React.useState(false);\n\n  function publishFeedbackToCloud(){\n    setSending(true)\n    fetch(\"https://us-central1-pioreactor-backend.cloudfunctions.net/feedback\", {\n      method:\"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n          email: email,\n          message: feedback\n          })\n      })\n    setSending(false)\n    setHasBeenSent(true)\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (email === \"\"){\n      setFormError(true)\n      setHelperText(\"Can't be blank.\")\n      return\n    }\n    publishFeedbackToCloud()\n  }\n\n  const onEmailChange = (e) => {\n    setFormError(false)\n    setHelperText(\"\")\n    setEmail(e.target.value)\n  }\n  const onFeedbackChange = (e) => {\n    setFeedback(e.target.value)\n  }\n\n  return(\n    <React.Fragment>\n      <div>\n        <Typography variant=\"h5\" component=\"h2\">\n          <Box fontWeight=\"fontWeightBold\">\n            Share feedback\n          </Box>\n        </Typography>\n      </div>\n      <Card className={classes.root}>\n        <CardContent className={classes.cardContent}>\n        <p>\n        Include your email, and we may get back to you with some questions or advice about your provided feedback.\n        We appreciate all feedback sent to us!\n        </p>\n        <FormGroup>\n          <Grid container spacing={1}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                error={formError}\n                id=\"email\"\n                type=\"email\"\n                label=\"Email\"\n                required\n                onChange={onEmailChange}\n                className={`${classes.halfTextField} ${classes.textField}`}\n                value={email}\n                helperText={helperText}\n                />\n            </Grid>\n            <Grid item xs={12} md={12}>\n              <TextField\n                label=\"What went wrong? What went right? What are you unsure about?\"\n                maxRows={4}\n                multiline\n                required\n                onChange={onFeedbackChange}\n                value={feedback}\n                className={classes.textField}\n                minRows={3}\n                fullWidth={true}\n              />\n            </Grid>\n\n            <Grid item xs={12} md={12}>\n              <LoadingButton\n                loading={sending}\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={hasBeenSent}\n                onClick={onSubmit}>\n                {hasBeenSent ? \"Submitted\" : \"Submit\"}\n              </LoadingButton>\n            </Grid>\n          </Grid>\n        </FormGroup>\n\n\n\n        </CardContent>\n      </Card>\n    </React.Fragment>\n)}\n\n\nfunction Feedback(props) {\n    React.useEffect(() => {\n      document.title = props.title;\n    }, [props.title])\n    return (\n        <Grid container spacing={3} >\n          <Grid item md={12} xs={12}>\n            <FeedbackContainer/>\n          </Grid>\n        </Grid>\n    )\n}\n\nexport default Feedback;\n\n","import React from 'react';\nimport { makeStyles } from '@mui/styles';\nimport Drawer from '@mui/material/Drawer';\nimport List from '@mui/material/List';\nimport ListItemButton from '@mui/material/ListItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Badge from '@mui/material/Badge';\nimport Divider from '@mui/material/Divider';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport IconButton from '@mui/material/IconButton';\nimport SaveAltIcon from '@mui/icons-material/SaveAlt';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport FeedbackOutlinedIcon from '@mui/icons-material/FeedbackOutlined';\nimport UpdateIcon from '@mui/icons-material/Update';\nimport Toolbar from '@mui/material/Toolbar';\nimport {AppBar, Typography, Link, Button} from '@mui/material';\nimport PioreactorIcon from './PioreactorIcon';\nimport LibraryAddOutlinedIcon from '@mui/icons-material/LibraryAddOutlined';\nimport DashboardOutlinedIcon from '@mui/icons-material/DashboardOutlined';\nimport SettingsOutlinedIcon from '@mui/icons-material/SettingsOutlined';\nimport InsertChartOutlinedIcon from '@mui/icons-material/InsertChartOutlined';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\n\nconst drawerWidth = 212;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  appBarRoot: {\n    [theme.breakpoints.up('sm')]: {\n      zIndex: theme.zIndex.drawer + 1\n    }\n  },\n  listItemIcon: {\n    minWidth: \"40px\"\n  },\n  divider: {\n    marginTop: \"15px\",\n    marginBottom: \"15px\",\n  }\n}));\n\n\n\nexport default function SideNavAndHeader() {\n  const classes = useStyles();\n\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [version, setVersion] = React.useState(null)\n  const [latestVersion, setLatestVersion] = React.useState(null)\n\n  React.useEffect(() => {\n    async function getCurrentApp() {\n         await fetch(\"/get_app_version\")\n        .then((response) => {\n          return response.text();\n        })\n        .then((data) => {\n          setVersion(data)\n        });\n      }\n\n    async function getLatestVersion() {\n         await fetch(\"https://api.github.com/repos/pioreactor/pioreactor/releases/latest\")\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setLatestVersion(data['name'])\n        });\n      }\n\n      getCurrentApp()\n      getLatestVersion()\n  }, [])\n\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  function isSelected(path) {\n    return (window.location.pathname === path)\n  }\n\n  const helpNode = <React.Fragment>\n                     Help <OpenInNewIcon style={{fontSize:\"15px\", verticalAlign: \"middle\"}}/>\n                    </React.Fragment>\n\n  const list = () => (\n    <div className={classes.drawerContainer}>\n      <List>\n\n        <ListItemButton href=\"/overview\" component=\"a\"  key={\"overview\"} selected={isSelected(\"/\") || isSelected(\"/overview\")}>\n          <ListItemIcon className={classes.listItemIcon}><DashboardOutlinedIcon color={(isSelected(\"/\") || isSelected(\"/overview\")) ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/\") || isSelected(\"/overview\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Overview\"} />\n        </ListItemButton>\n\n        <ListItemButton href=\"/pioreactors\"  component=\"a\" key={\"pioreactors\"} selected={isSelected(\"/pioreactors\")}>\n          <ListItemIcon className={classes.listItemIcon}> <PioreactorIcon color={isSelected(\"/pioreactors\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/pioreactors\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Pioreactors\"} />\n        </ListItemButton>\n\n\n        <ListItemButton href=\"/export-data\" component=\"a\"  key={\"export_data\"} selected={isSelected(\"/export-data\")}>\n          <ListItemIcon className={classes.listItemIcon}><SaveAltIcon color={isSelected(\"/export-data\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/export-data\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Export data\"} />\n        </ListItemButton>\n\n        <ListItemButton  href=\"/config\"  component=\"a\" key={\"config\"} selected={isSelected(\"/config\")}>\n          <ListItemIcon className={classes.listItemIcon}> <SettingsOutlinedIcon color={isSelected(\"/config\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/config\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Configuration\"} />\n        </ListItemButton>\n\n        <ListItemButton  href=\"/analysis\"  component=\"a\" key={\"analysis\"} selected={isSelected(\"/analysis\")}>\n          <ListItemIcon className={classes.listItemIcon}> <InsertChartOutlinedIcon color={isSelected(\"/analysis\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/analysis\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Analysis\"} />\n        </ListItemButton>\n\n        <Divider className={classes.divider} />\n\n        <ListItemButton href=\"/plugins\" component=\"a\"  key={\"plugins\"} selected={isSelected(\"/plugins\")}>\n          <ListItemIcon className={classes.listItemIcon}><LibraryAddOutlinedIcon color={isSelected(\"/plugins\") ? \"primary\" : \"inherit\"}/> </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/plugins\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Plugins\"} />\n        </ListItemButton>\n\n        <ListItemButton href=\"/updates\" component=\"a\"  key=\"updates\" selected={isSelected(\"/updates\")}>\n          <ListItemIcon className={classes.listItemIcon}>\n            <Badge variant=\"dot\" color=\"secondary\" invisible={!((version) && (latestVersion) && (version !== latestVersion))}>\n              <UpdateIcon color={isSelected(\"/updates\") ? \"primary\" : \"inherit\"}/>\n            </Badge>\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/updates\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Updates\"}/>\n        </ListItemButton>\n\n        <ListItemButton target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.pioreactor.com\" component=\"a\"  key=\"help\">\n          <ListItemIcon className={classes.listItemIcon}><HelpOutlineIcon/> </ListItemIcon>\n          <ListItemText primary={helpNode} primaryTypographyProps={{color: \"rgba(0, 0, 0, 0.87)\"}}/>\n        </ListItemButton>\n\n        <ListItemButton href=\"/feedback\" component=\"a\"  key=\"feedback\" selected={isSelected(\"/feedback\")}>\n          <ListItemIcon className={classes.listItemIcon}>\n            <FeedbackOutlinedIcon color={isSelected(\"/feedback\") ? \"primary\" : \"inherit\"}/>\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{color: isSelected(\"/feedback\") ? \"primary\" : \"rgba(0, 0, 0, 0.87)\"}} primary={\"Share feedback\"}/>\n        </ListItemButton>\n\n      </List>\n    </div>\n  );\n\n  return (\n    <React.Fragment>\n      <div className={classes.appBarRoot}>\n        <AppBar position=\"fixed\" >\n          <Toolbar variant=\"dense\">\n\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              onClick={handleDrawerToggle}\n              classes={{root: classes.menuButton}}\n              sx={{ display: { xs: 'block', sm: 'none' } }}\n              size=\"large\">\n              <MenuIcon />\n            </IconButton>\n\n\n            <Typography variant=\"h6\" className={classes.title}>\n              <Link color=\"inherit\" underline=\"none\" href=\"/\" className={classes.title}> <img alt=\"pioreactor logo\" src=\"/white_colour.png\" style={{width: \"120px\", height: \"29px\"}}/> </Link>\n            </Typography>\n            <Link color=\"inherit\" underline=\"none\" href=\"https://docs.pioreactor.com\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <Button color=\"inherit\" style={{textTransform: \"none\"}}>Help <HelpOutlineIcon style={{ fontSize: 18, verticalAlign: \"middle\", marginLeft: 5 }}/></Button>\n            </Link>\n          </Toolbar>\n        </AppBar>\n      </div>\n      <Drawer\n        variant=\"temporary\"\n        anchor=\"left\"\n        open={mobileOpen}\n        onClose={handleDrawerToggle}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        ModalProps={{\n          keepMounted: true, // Better open performance on mobile.\n        }}\n        sx={{ display: { xs: 'block', sm: 'none' } }}\n      >\n        {list()}\n      </Drawer>\n      <Drawer\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        variant=\"permanent\"\n        open\n        className={classes.drawer}\n        sx={{ display: { xs: 'none', sm: 'block' } }}\n      >\n        <Toolbar />\n        {list()}\n      </Drawer>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.log(error);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n      <div style={{maxWidth: 700, margin: \"auto\"}}>\n        <h1>Something went wrong with the PioreactorUI!</h1>\n        <h3>Don't worry. It's our fault. Here's what you can do:</h3>\n        <p> Looks like there's a bug in the UI. See the console (⌘+⌥+i) for error information. We would appreciate it\n        if you create an issue in <a href=\"https://github.com/Pioreactor/pioreactorui/issues\">Github</a> for us, with the information in the console (⌘+⌥+i).</p>\n      </div>\n      )\n    }\n\n    return this.props.children; \n  }\n}\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { ThemeProvider, createTheme} from '@mui/material/styles';\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport { StyledEngineProvider } from '@mui/material/styles';\n\n\nimport TactileButtonNotification from \"./components/TactileButtonNotification\";\nimport ErrorSnackbar from \"./components/ErrorSnackbar\";\nimport ExperimentOverview from \"./ExperimentOverview\";\nimport ExportData from \"./ExportData\";\nimport Pioreactors from \"./Pioreactors\";\nimport PioreactorUnit from \"./PioreactorUnit\";\nimport StartNewExperiment from \"./StartNewExperiment\";\nimport EditConfig from \"./EditConfig\";\nimport Updates from \"./Updates\";\nimport Plugins from \"./Plugins\";\nimport Analysis from \"./Analysis\";\nimport Feedback from \"./Feedback\";\nimport SideNavAndHeader from \"./components/SideNavAndHeader\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\n\nimport \"@fontsource/roboto/300.css\"\nimport \"@fontsource/roboto/400.css\"\nimport \"@fontsource/roboto/500.css\"\nimport \"@fontsource/roboto/700.css\"\nimport './styles.css';\nimport {parseINIString} from \"./utilities\"\n\n\nconst theme = createTheme({\n  palette: {\n    background: {\n      default: \"#f6f6f7\",\n    },\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: '#5331CA',\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n    secondary: {\n      main: '#f44336',\n    },\n  },\n});\n\n\n\nfunction App() {\n  return (\n    <React.StrictMode>\n      <StyledEngineProvider injectFirst>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <MainSite />\n        </ThemeProvider>\n      </StyledEngineProvider>\n    </React.StrictMode>\n  );\n}\n\nfunction MainSite() {\n  const [config, setConfig] = React.useState({})\n\n  React.useEffect(() => {\n\n    function getConfig() {\n      fetch(\"/get_config/config.ini\")\n        .then((response) => {\n            if (response.ok) {\n              return response.text();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          })\n        .then((config) => {\n          setConfig(parseINIString(config)); // TODO: parse on server side and send a json object\n        })\n        .catch((error) => {})\n    }\n    getConfig();\n  }, [])\n  return (\n    <div style={{display: 'flex'}}>\n      <ErrorBoundary>\n        <SideNavAndHeader />\n        <main style={{flexGrow: 1, paddingTop: theme.spacing(9), paddingLeft: theme.spacing(4), paddingRight: theme.spacing(4)}}>\n          <Router>\n            <div className=\"pageContainer\">\n              <Switch>\n                <Route path=\"/export-data\">\n                  <ExportData config={config} title=\"Pioreactor ~ Export data\"/>\n                </Route>\n                <Route path=\"/start-new-experiment\">\n                  <StartNewExperiment config={config} title=\"Pioreactor ~ Start new experiment\" />\n                </Route>\n                <Route path=\"/overview\">\n                  <ExperimentOverview config={config} title=\"Pioreactor ~ Overview\"/>\n                </Route>\n                <Route path=\"/plugins\">\n                  <Plugins config={config} title=\"Pioreactor ~ Plugins\"/>\n                </Route>\n                <Route path=\"/analysis\">\n                  <Analysis config={config} title=\"Pioreactor ~ Analysis\"/>\n                </Route>\n                <Route path=\"/config\">\n                  <EditConfig config={config} title=\"Pioreactor ~ Configuration\"/>\n                </Route>\n                <Route path=\"/pioreactors\" exact>\n                  <Pioreactors config={config} title=\"Pioreactor ~ Pioreactors\"/>\n                </Route>\n                <Route path=\"/pioreactors/:unit\">\n                  <PioreactorUnit config={config} title=\"Pioreactor ~ Unit\"/>\n                </Route>\n                <Route path=\"/updates\">\n                  <Updates config={config} title=\"Pioreactor ~ Updates\"/>\n                </Route>\n                <Route path=\"/feedback\">\n                  <Feedback config={config} title=\"Pioreactor ~ Feedback\"/>\n                </Route>\n                <Route path=\"/\">\n                  <ExperimentOverview config={config} title=\"Pioreactor ~ Pioreactor\"/>\n                </Route>\n              </Switch>\n              <ErrorSnackbar config={config} />\n              <TactileButtonNotification config={config}/>\n            </div>\n          </Router>\n        </main>\n      </ErrorBoundary>\n    </div>\n)}\n\nexport default App;\n","\nexport function parseINIString(data){\n    var regex = {\n        section: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\n        param: /^\\s*([^=]+?)\\s*=\\s*(.*?)\\s*$/,\n        comment: /^\\s*;.*$/\n    };\n    var value = {};\n    var lines = data.split(/[\\r\\n]+/);\n    var section = null;\n    lines.forEach(function(line){\n        if(regex.comment.test(line)){\n            return;\n        }else if(regex.param.test(line)){\n            var match = line.match(regex.param);\n            if(section){\n                value[section][match[1]] = match[2];\n            }else{\n                value[match[1]] = match[2];\n            }\n        }else if(regex.section.test(line)){\n            var match = line.match(regex.section);\n            value[match[1]] = {};\n            section = match[1];\n        }else if(line.length === 0 && section){\n            section = null;\n        };\n    });\n    return value;\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./styles.css\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}